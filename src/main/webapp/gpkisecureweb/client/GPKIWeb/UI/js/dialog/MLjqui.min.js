/* 2017-05-24 */ var MLjquiBaseFramework=window.minQuery||window.jQuery;!function(a){a.MLjqui=a.MLjqui||{},a.MLjqui.define=function(a,b,c){a[b]=function(){this.baseType&&(this.base=new a[this.baseType],this.base.defineInstance()),this.defineInstance()},a[b].prototype.defineInstance=function(){},a[b].prototype.base=null,a[b].prototype.baseType=void 0,c&&a[c]&&(a[b].prototype.baseType=c)},a.MLjqui.invoke=function(b,c){if(0!=c.length){for(var d=typeof c==Array||c.length>0?c[0]:c,e=typeof c==Array||c.length>1?Array.prototype.slice.call(c,1):a({}).toArray();void 0==b[d]&&null!=b.base;){if(void 0!=b[d]&&a.isFunction(b[d]))return b[d].apply(b,e);if("string"==typeof d){var f=d.toLowerCase();if(void 0!=b[f]&&a.isFunction(b[f]))return b[f].apply(b,e)}b=b.base}if(void 0!=b[d]&&a.isFunction(b[d]))return b[d].apply(b,e);if("string"==typeof d){var f=d.toLowerCase();if(void 0!=b[f]&&a.isFunction(b[f]))return b[f].apply(b,e)}}},a.MLjqui.hasProperty=function(a,b){if("object"==typeof b)for(var c in b){for(var d=a;d;){if(d.hasOwnProperty(c))return!0;if(d.hasOwnProperty(c.toLowerCase()))return!0;d=d.base}return!1}else for(;a;){if(a.hasOwnProperty(b))return!0;if(a.hasOwnProperty(b.toLowerCase()))return!0;a=a.base}return!1},a.MLjqui.hasFunction=function(b,c){if(0==c.length)return!1;if(void 0==b)return!1;var d=typeof c==Array||c.length>0?c[0]:c;for(typeof c==Array||c.length>1?Array.prototype.slice.call(c,1):{};void 0==b[d]&&null!=b.base;){if(b[d]&&a.isFunction(b[d]))return!0;if("string"==typeof d){var e=d.toLowerCase();if(b[e]&&a.isFunction(b[e]))return!0}b=b.base}if(b[d]&&a.isFunction(b[d]))return!0;if("string"==typeof d){var e=d.toLowerCase();if(b[e]&&a.isFunction(b[e]))return!0}return!1},a.MLjqui.isPropertySetter=function(b,c){return 1==c.length&&"object"==typeof c[0]?!0:2==c.length&&"string"==typeof c[0]&&!a.MLjqui.hasFunction(b,c)},a.MLjqui.validatePropertySetter=function(b,c,d){if(!a.MLjqui.propertySetterValidation)return!0;if(1==c.length&&"object"==typeof c[0]){for(var e in c[0]){for(var f=b;!f.hasOwnProperty(e)&&f.base;)f=f.base;if(!f||!f.hasOwnProperty(e)){if(!d){var g=f.hasOwnProperty(e.toString().toLowerCase());if(g)return!0;throw"Invalid property: "+e}return!1}}return!0}if(2!=c.length){if(!d)throw"Invalid property: "+c.length>=0?c[0]:"";return!1}for(;!b.hasOwnProperty(c[0])&&b.base;)b=b.base;if(!b||!b.hasOwnProperty(c[0])){if(!d)throw"Invalid property: "+c[0];return!1}return!0},Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),a.MLjqui.set=function(b,c){var d=0;if(1==c.length&&"object"==typeof c[0]){if(b.isInitialized&&Object.keys&&Object.keys(c[0]).length>1){var e=b.base?b.base.element:b.element,f=a.data(e,b.widgetName).initArgs;if(f&&JSON&&JSON.stringify&&c[0]&&f[0])try{if(JSON.stringify(c[0])==JSON.stringify(f[0])){var g=!0;if(a.each(c[0],function(a,c){return b[a]!=c?(g=!1,!1):void 0}),g)return}}catch(h){}b.batchUpdate=c[0];var i={},j={};a.each(c[0],function(a,c){for(var e=b;!e.hasOwnProperty(a)&&null!=e.base;)e=e.base;e.hasOwnProperty(a)?b[a]!=c&&(i[a]=b[a],j[a]=c,d++):e.hasOwnProperty(a.toLowerCase())&&b[a.toLowerCase()]!=c&&(i[a.toLowerCase()]=b[a.toLowerCase()],j[a.toLowerCase()]=c,d++)}),2>d&&(b.batchUpdate=null)}a.each(c[0],function(c,d){for(var e=b;!e.hasOwnProperty(c)&&null!=e.base;)e=e.base;if(e.hasOwnProperty(c))a.MLjqui.setvalueraiseevent(e,c,d);else if(e.hasOwnProperty(c.toLowerCase()))a.MLjqui.setvalueraiseevent(e,c.toLowerCase(),d);else if(a.MLjqui.propertySetterValidation)throw"MLjquiCore: invalid property '"+c+"'"}),null!=b.batchUpdate&&(b.batchUpdate=null,b.propertiesChangedHandler&&d>1&&b.propertiesChangedHandler(b,i,j))}else if(2==c.length){for(;!b.hasOwnProperty(c[0])&&b.base;)b=b.base;if(b.hasOwnProperty(c[0]))a.MLjqui.setvalueraiseevent(b,c[0],c[1]);else if(b.hasOwnProperty(c[0].toLowerCase()))a.MLjqui.setvalueraiseevent(b,c[0].toLowerCase(),c[1]);else if(a.MLjqui.propertySetterValidation)throw"MLjquiCore: invalid property '"+c[0]+"'"}},a.MLjqui.setvalueraiseevent=function(a,b,c){var d=a[b];a[b]=c,a.isInitialized&&(void 0!=a.propertyChangedHandler&&a.propertyChangedHandler(a,b,d,c),void 0!=a.propertyChangeMap&&void 0!=a.propertyChangeMap[b]&&a.propertyChangeMap[b](a,b,d,c))},a.MLjqui.get=function(a,b){if(void 0!=b&&null!=b){if(a.propertyMap){var c=a.propertyMap(b);if(null!=c)return c}if(a.hasOwnProperty(b))return a[b];if(a.hasOwnProperty(b.toLowerCase()))return a[b.toLowerCase()];var d=void 0;if(typeof b==Array){if(1!=b.length)return;d=b[0]}else"string"==typeof b&&(d=b);for(;!a.hasOwnProperty(d)&&a.base;)a=a.base;return a?a[d]:void 0}},a.MLjqui.serialize=function(b){var c="";if(a.isArray(b)){c="[";for(var d=0;d<b.length;d++)d>0&&(c+=", "),c+=a.MLjqui.serialize(b[d]);c+="]"}else if("object"==typeof b){c="{";var e=0;for(var d in b)e++>0&&(c+=", "),c+=d+": "+a.MLjqui.serialize(b[d]);c+="}"}else c=b.toString();return c},a.MLjqui.propertySetterValidation=!0,a.MLjqui.MLjquiWidgetProxy=function(b,c,d){var e=(a(c),a.data(c,b));if(void 0!=e){var f=e.instance;if(a.MLjqui.hasFunction(f,d))return a.MLjqui.invoke(f,d);if(a.MLjqui.isPropertySetter(f,d)){if(a.MLjqui.validatePropertySetter(f,d))return void a.MLjqui.set(f,d)}else{if("object"==typeof d&&0==d.length)return;if("object"==typeof d&&1==d.length&&a.MLjqui.hasProperty(f,d[0]))return a.MLjqui.get(f,d[0]);if("string"==typeof d&&a.MLjqui.hasProperty(f,d[0]))return a.MLjqui.get(f,d)}throw"MLjquiCore: Invalid parameter '"+a.MLjqui.serialize(d)+"' does not exist."}},a.MLjqui.applyWidget=function(b,c,d,e){var f=!1;try{f=void 0!=window.MSApp}catch(g){}var h=a(b);e?(e.host=h,e.element=b):e=new a.MLjqui["_"+c],""==b.id&&(b.id=a.MLjqui.utilities.createId());var i={host:h,element:b,instance:e,initArgs:d};e.widgetName=c,a.data(b,c,i),a.data(b,"MLjquiWidget",i.instance);for(var j=new Array,e=i.instance;e;)e.isInitialized=!1,j.push(e),e=e.base;j.reverse(),j[0].theme=a.MLjqui.theme||"",a.MLjqui.MLjquiWidgetProxy(c,b,d);for(var k in j)e=j[k],0==k&&(e.host=h,e.element=b,e.WinJS=f),void 0!=e&&(e.definedInstance&&e.definedInstance(),null!=e.createInstance&&(f?MSApp.execUnsafeLocalFunction(function(){e.createInstance(d)}):e.createInstance(d)));for(var k in j)void 0!=j[k]&&(j[k].isInitialized=!0);f?MSApp.execUnsafeLocalFunction(function(){i.instance.refresh(!0)}):i.instance.refresh(!0)},a.MLjqui.MLjquiWidget=function(b,c,d){var e=!1;try{MLjquiArgs=Array.prototype.slice.call(d,0)}catch(f){MLjquiArgs=""}try{e=void 0!=window.MSApp}catch(f){}var g=b,h="";c&&(h="_"+c),a.MLjqui.define(a.MLjqui,"_"+g,h);var i=new Array;if(!window[g]){var j=function(b){if(null==b)return"";var c=a.type(b);switch(c){case"string":case"number":case"date":case"boolean":case"bool":return null===b?"":b.toString()}var d="";return a.each(b,function(b){var c=this;b>0&&(d+=", "),d+="[";var e=0;if("object"==a.type(c))for(var f in c)e>0&&(d+=", "),d+="{"+f+":"+c[f]+"}",e++;else e>0&&(d+=", "),d+="{"+b+":"+c+"}",e++;d+="]"}),d};window[g]=function(b,c){var d=[];c||(c={}),d.push(c);var e=b;if("object"===a.type(e)&&b[0]&&(e=b[0].id,""===e&&(e=b[0].id=a.MLjqui.utilities.createId())),window.MLjquiWidgets&&window.MLjquiWidgets[e]){if(c&&a.each(window.MLjquiWidgets[e],function(b){var d=a(this.element).data();d&&d.MLjquiWidget&&a(this.element)[g](c)}),1==window.MLjquiWidgets[e].length){var f=a(window.MLjquiWidgets[e][0].widgetInstance.element).data();if(f&&f.MLjquiWidget)return window.MLjquiWidgets[e][0]}var f=a(window.MLjquiWidgets[e][0].widgetInstance.element).data();if(f&&f.MLjquiWidget)return window.MLjquiWidgets[e]}var h=a(b);if(0===h.length)throw new Error("Invalid Selector - "+b+"! Please, check whether the used ID or CSS Class name is correct.");var k=[];return a.each(h,function(b){var c=h[b],f=null;if(!i[g]){var l=c.id;c.id="",f=a(c).clone(),c.id=l}if(a.MLjqui.applyWidget(c,g,d,void 0),!i[g]){var m=a.data(c,"MLjquiWidget"),n=f[g]().data().MLjquiWidget.defineInstance(),o=function(b){var c=a.data(b,"MLjquiWidget");this.widgetInstance=c;var d=a.extend(this,c);return d.on=function(a,b){d.addHandler(d.host,a,b)},d.off=function(a){d.removeHandler(d.host,a)},d};i[g]=o,a.each(n,function(a,b){Object.defineProperty(o.prototype,a,{get:function(){return this.widgetInstance?this.widgetInstance[a]:b},set:function(b){if(this.widgetInstance&&this.widgetInstance[a]!=b&&this.widgetInstance[a]!=b&&j(this.widgetInstance[a])!=j(b)){var c={};c[a]=b,this.widgetInstance.host[g](c),this.widgetInstance[a]=b}}})})}var m=new i[g](c);k.push(m),window.MLjquiWidgets||(window.MLjquiWidgets=new Array),window.MLjquiWidgets[e]||(window.MLjquiWidgets[e]=new Array),window.MLjquiWidgets[e].push(m)}),1===k.length?k[0]:k}}a.fn[g]=function(){var b=Array.prototype.slice.call(arguments,0);if(0==b.length||1==b.length&&"object"==typeof b[0]){if(0==this.length)throw this.selector?new Error("Invalid Selector - "+this.selector+"! Please, check whether the used ID or CSS Class name is correct."):new Error("Invalid Selector! Please, check whether the used ID or CSS Class name is correct.");return this.each(function(){var c=(a(this),this),d=a.data(c,g);null==d?a.MLjqui.applyWidget(c,g,b,void 0):a.MLjqui.MLjquiWidgetProxy(g,this,b)})}if(0==this.length)throw this.selector?new Error("Invalid Selector - "+this.selector+"! Please, check whether the used ID or CSS Class name is correct."):new Error("Invalid Selector! Please, check whether the used ID or CSS Class name is correct.");var c=null,d=0;return this.each(function(){var e=a.MLjqui.MLjquiWidgetProxy(g,this,b);if(0==d)c=e,d++;else{if(1==d){var f=[];f.push(c),c=f}c.push(e)}}),c};try{a.extend(a.MLjqui["_"+g].prototype,Array.prototype.slice.call(d,0)[0])}catch(f){}a.extend(a.MLjqui["_"+g].prototype,{toThemeProperty:function(b,c){return a.MLjqui.toThemeProperty(this,b,c)}}),a.MLjqui["_"+g].prototype.refresh=function(){this.base&&this.base.refresh(!0)},a.MLjqui["_"+g].prototype.createInstance=function(){},a.MLjqui["_"+g].prototype.applyTo=function(b,c){if(!(c instanceof Array)){var d=[];d.push(c),c=d}a.MLjqui.applyWidget(b,g,c,this)},a.MLjqui["_"+g].prototype.getInstance=function(){return this},a.MLjqui["_"+g].prototype.propertyChangeMap={},a.MLjqui["_"+g].prototype.addHandler=function(b,c,d,e){a.MLjqui.addHandler(b,c,d,e)},a.MLjqui["_"+g].prototype.removeHandler=function(b,c,d){a.MLjqui.removeHandler(b,c,d)}},a.MLjqui.toThemeProperty=function(a,b,c){if(""==a.theme)return b;for(var d=b.split(" "),e="",f=0;f<d.length;f++){f>0&&(e+=" ");var g=d[f];e+=null!=c&&c?g+"-"+a.theme:g+" "+g+"-"+a.theme}return e},a.MLjqui.addHandler=function(b,c,d,e){for(var f=c.split(" "),g=0;g<f.length;g++){var h=f[g];if(window.addEventListener)switch(h){case"mousewheel":a.MLjqui.browser.mozilla?b[0].addEventListener("DOMMouseScroll",d,!1):b[0].addEventListener("mousewheel",d,!1);continue;case"mousemove":if(!e){b[0].addEventListener("mousemove",d,!1);continue}}void 0==e||null==e?b.on?b.on(h,d):b.bind(h,d):b.on?b.on(h,e,d):b.bind(h,e,d)}},a.MLjqui.removeHandler=function(b,c,d){if(!c)return void(b.off?b.off():b.unbind());for(var e=c.split(" "),f=0;f<e.length;f++){var g=e[f];if(window.removeEventListener)switch(g){case"mousewheel":a.MLjqui.browser.mozilla?b[0].removeEventListener("DOMMouseScroll",d,!1):b[0].removeEventListener("mousewheel",d,!1);continue;case"mousemove":if(d){b[0].removeEventListener("mousemove",d,!1);continue}}void 0!=g?void 0==d?b.off?b.off(g):b.unbind(g):b.off?b.off(g,d):b.unbind(g,d):b.off?b.off():b.unbind()}},a.MLjqui.theme=a.MLjqui.theme||"",a.MLjqui.scrollAnimation=a.MLjqui.scrollAnimation||!1,a.MLjqui.resizeDelay=a.MLjqui.resizeDelay||10,a.MLjqui.ready=function(){a(window).trigger("MLjquiReady")},a.MLjqui.init=function(){a.each(arguments[0],function(b,c){"theme"==b&&(a.MLjqui.theme=c),"scrollBarSize"==b&&(a.MLjqui.utilities.scrollBarSize=c),"touchScrollBarSize"==b&&(a.MLjqui.utilities.touchScrollBarSize=c),"scrollBarButtonsVisibility"==b&&(a.MLjqui.utilities.scrollBarButtonsVisibility=c)})},a.MLjqui.utilities=a.MLjqui.utilities||{},a.extend(a.MLjqui.utilities,{scrollBarSize:15,touchScrollBarSize:0,scrollBarButtonsVisibility:"visible",createId:function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return"MLjquiWidget"+a()+a()},setTheme:function(b,c,d){if("undefined"!=typeof d){for(var e=d[0].className.split(" "),f=[],g=[],h=d.children(),i=0;i<e.length;i+=1)e[i].indexOf(b)>=0&&(b.length>0?(f.push(e[i]),g.push(e[i].replace(b,c))):g.push(e[i].replace("-"+c,"")+"-"+c));this._removeOldClasses(f,d),this._addNewClasses(g,d);for(var i=0;i<h.length;i+=1)this.setTheme(b,c,a(h[i]))}},_removeOldClasses:function(a,b){for(var c=0;c<a.length;c+=1)b.removeClass(a[c])},_addNewClasses:function(a,b){for(var c=0;c<a.length;c+=1)b.addClass(a[c])},getOffset:function(b){var c=a.MLjqui.mobile.getLeftPos(b[0]),d=a.MLjqui.mobile.getTopPos(b[0]);return{top:d,left:c}},resize:function(b,c,d,e){void 0===e&&(e=!0);var f=-1,g=this,h=function(a){if(!g.hiddenWidgets)return-1;for(var b=-1,c=0;c<g.hiddenWidgets.length;c++)if(a.id){if(g.hiddenWidgets[c].id==a.id){b=c;break}}else if(g.hiddenWidgets[c].id==a[0].id){b=c;break}return b};if(this.resizeHandlers){for(var i=0;i<this.resizeHandlers.length;i++)if(b.id){if(this.resizeHandlers[i].id==b.id){f=i;break}}else if(this.resizeHandlers[i].id==b[0].id){f=i;break}if(d===!0){if(-1!=f&&this.resizeHandlers.splice(f,1),0==this.resizeHandlers.length){var j=a(window);j.off?(j.off("resize.MLjqui"),j.off("orientationchange.MLjqui"),j.off("orientationchanged.MLjqui")):(j.unbind("resize.MLjqui"),j.unbind("orientationchange.MLjqui"),j.unbind("orientationchanged.MLjqui")),this.resizeHandlers=null}var k=h(b);return void(-1!=k&&this.hiddenWidgets&&this.hiddenWidgets.splice(k,1))}}else if(d===!0){var k=h(b);return void(-1!=k&&this.hiddenWidgets&&this.hiddenWidgets.splice(k,1))}var g=this,l=function(b,c){if(g.resizeHandlers){var d=function(a){for(var b=-1,c=a.parentNode;c;)b++,c=c.parentNode;return b},e=function(a,b){if(!a.widget||!b.widget)return 0;var c=d(a.widget[0]),e=d(b.widget[0]);try{if(e>c)return-1;if(c>e)return 1}catch(f){}return 0},f=function(b){if(g.hiddenWidgets.length>0){g.hiddenWidgets.sort(e);var d=function(){for(var b=!1,d=new Array,e=0;e<g.hiddenWidgets.length;e++){var f=g.hiddenWidgets[e];a.MLjqui.isHidden(f.widget)?(b=!0,d.push(f)):f.callback&&f.callback(c)}g.hiddenWidgets=d,b||clearInterval(g.__resizeInterval)};if(0==b)return d(),void(g.__resizeInterval&&clearInterval(g.__resizeInterval));g.__resizeInterval&&clearInterval(g.__resizeInterval),g.__resizeInterval=setInterval(function(){d()},100)}};g.hiddenWidgets&&g.hiddenWidgets.length>0&&f(!1),g.hiddenWidgets=new Array,g.resizeHandlers.sort(e);for(var i=0;i<g.resizeHandlers.length;i++){var j=g.resizeHandlers[i],k=j.widget,l=j.data;if(l&&l.MLjquiWidget){var m=l.MLjquiWidget.width,n=l.MLjquiWidget.height;l.MLjquiWidget.base&&(void 0==m&&(m=l.MLjquiWidget.base.width),void 0==n&&(n=l.MLjquiWidget.base.height)),void 0===m&&void 0===n&&(m=l.MLjquiWidget.element.style.width,n=l.MLjquiWidget.element.style.height);var o=!1;if(null!=m&&-1!=m.toString().indexOf("%")&&(o=!0),null!=n&&-1!=n.toString().indexOf("%")&&(o=!0),a.MLjqui.isHidden(k))-1===h(k)&&(o||b===!0)&&j.data.nestedWidget!==!0&&g.hiddenWidgets.push(j);else if((void 0===b||b!==!0)&&(o&&(j.callback(c),g.hiddenWidgets.indexOf(j)>=0&&g.hiddenWidgets.splice(g.hiddenWidgets.indexOf(j),1)),l.MLjquiWidget.element)){var p=l.MLjquiWidget.element.className;if((p.indexOf("dropdownlist")>=0||p.indexOf("datetimeinput")>=0||p.indexOf("combobox")>=0||p.indexOf("menu")>=0)&&l.MLjquiWidget.isOpened){var q=l.MLjquiWidget.isOpened();if(q){if(c&&"resize"==c&&a.MLjqui.mobile.isTouchDevice())continue;l.MLjquiWidget.close()}}}}}f()}};if(!this.resizeHandlers){this.resizeHandlers=new Array;var j=a(window);j.on?(this._resizeTimer=null,this._initResize=null,j.on("resize.MLjqui",function(b){void 0!=g._resizeTimer&&clearTimeout(g._resizeTimer),g._initResize?g._resizeTimer=setTimeout(function(){l(null,"resize")},a.MLjqui.resizeDelay):(g._initResize=!0,l(null,"resize"))}),j.on("orientationchange.MLjqui",function(a){l(null,"orientationchange")}),j.on("orientationchanged.MLjqui",function(a){l(null,"orientationchange")})):(j.bind("resize.MLjqui",function(a){l(null,"orientationchange")}),j.bind("orientationchange.MLjqui",function(a){l(null,"orientationchange")}),j.bind("orientationchanged.MLjqui",function(a){l(null,"orientationchange")}))}var m=b.data();e&&-1===f&&this.resizeHandlers.push({id:b[0].id,widget:b,callback:c,data:m});try{var n=m.MLjquiWidget.width,o=m.MLjquiWidget.height;m.MLjquiWidget.base&&(void 0==n&&(n=m.MLjquiWidget.base.width),void 0==o&&(o=m.MLjquiWidget.base.height)),void 0===n&&void 0===o&&(n=m.MLjquiWidget.element.style.width,o=m.MLjquiWidget.element.style.height);var p=!1;if(null!=n&&-1!=n.toString().indexOf("%")&&(p=!0),null!=o&&-1!=o.toString().indexOf("%")&&(p=!0),p){this.watchedElementData||(this.watchedElementData=[]);var g=this,q=function(b){g.watchedElementData.forEach&&g.watchedElementData.forEach(function(b){b.element.offsetWidth===b.offsetWidth&&b.element.offsetHeight===b.offsetHeight||(b.offsetWidth=b.element.offsetWidth,b.offsetHeight=b.element.offsetHeight,b.timer&&clearTimeout(b.timer),b.timer=setTimeout(function(){a.MLjqui.isHidden(a(b.element))||b.callback()}))})};g.watchedElementData.push({element:b[0],offsetWidth:b[0].offsetWidth,offsetHeight:b[0].offsetHeight,callback:c}),g.observer||(g.observer=new MutationObserver(q),g.observer.observe(document.body,{attributes:!0,childList:!0,characterData:!0}))}}catch(r){}a.MLjqui.isHidden(b)&&e===!0&&l(!0),a.MLjqui.resize=function(){l(null,"resize")}},html:function(b,c){if(!a(b).on)return a(b).html(c);try{return a.access(b,function(c){var d=b[0]||{},e=0,f=b.length;if(void 0===c)return 1===d.nodeType?d.innerHTML.replace(rinlinejQuery,""):void 0;var g=/<(?:script|style|link)/i,h="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",i=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,j=/<([\w:]+)/,k=new RegExp("<(?:"+h+")[\\s/>]","i"),l=/^\s+/,m={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};if("string"==typeof c&&!g.test(c)&&(a.support.htmlSerialize||!k.test(c))&&(a.support.leadingWhitespace||!l.test(c))&&!m[(j.exec(c)||["",""])[1].toLowerCase()]){c=c.replace(i,"<$1></$2>");try{for(;f>e;e++)d=this[e]||{},1===d.nodeType&&(a.cleanData(d.getElementsByTagName("*")),d.innerHTML=c);d=0}catch(n){}}d&&b.empty().append(c)},null,c,arguments.length)}catch(d){return a(b).html(c)}},hasTransform:function(b){var c="";if(c=b.css("transform"),""==c||"none"==c){if(c=b.parents().css("transform"),""!=c&&"none"!=c)return""!=c&&"none"!=c;var d=a.MLjqui.utilities.getBrowser();"msie"==d.browser?(c=b.css("-ms-transform"),""!=c&&"none"!=c||(c=b.parents().css("-ms-transform"))):"chrome"==d.browser?(c=b.css("-webkit-transform"),""!=c&&"none"!=c||(c=b.parents().css("-webkit-transform"))):"opera"==d.browser?(c=b.css("-o-transform"),""!=c&&"none"!=c||(c=b.parents().css("-o-transform"))):"mozilla"==d.browser&&(c=b.css("-moz-transform"),""!=c&&"none"!=c||(c=b.parents().css("-moz-transform")))}return""!=c&&"none"!=c||(c=a(document.body).css("transform")),""!=c&&"none"!=c&&null!=c},getBrowser:function(){var a=navigator.userAgent.toLowerCase(),b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],c={browser:b[1]||"",version:b[2]||"0"};return a.indexOf("rv:11.0")>=0&&a.indexOf(".net4.0c")>=0&&(c.browser="msie",c.version="11",b[1]="msie"),a.indexOf("edge")>=0&&(c.browser="msie",c.version="12",b[1]="msie"),c[b[1]]=b[1],c}}),a.MLjqui.browser=a.MLjqui.utilities.getBrowser(),a.MLjqui.isHidden=function(a){if(!a||!a[0])return!1;var b=a[0].offsetWidth,c=a[0].offsetHeight;return 0===b||0===c},a.MLjqui.ariaEnabled=!0,a.MLjqui.aria=function(b,c,d){if(a.MLjqui.ariaEnabled)if(void 0==c)a.each(b.aria,function(c,d){var e=b.base?b.base.host.attr(c):b.host.attr(c);if(void 0==e||a.isFunction(e)){var e=b[d.name];a.isFunction(e)&&(e=b[d.name]()),void 0==e&&(e="");try{b.base?b.base.host.attr(c,e.toString()):b.host.attr(c,e.toString())}catch(f){}}else{var g=e;switch(d.type){case"number":g=new Number(e),isNaN(g)&&(g=e);break;case"boolean":g="true"==e;break;case"date":g=new Date(e),("Invalid Date"==g||isNaN(g))&&(g=e)}b[d.name]=g}});else try{b.host?b.base?b.base.host?b.base.host.attr(c,d.toString()):b.attr(c,d.toString()):b.host?b.element.setAttribute?b.element.setAttribute(c,d.toString()):b.host.attr(c,d.toString()):b.attr(c,d.toString()):b.setAttribute&&b.setAttribute(c,d.toString())}catch(e){}},Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),a.MLjqui.mobile=a.MLjqui.mobile||{},a.MLjqui.position=function(b){var c=parseInt(b.pageX),d=parseInt(b.pageY);if(a.MLjqui.mobile.isTouchDevice()){var e=a.MLjqui.mobile.getTouches(b),f=e[0];c=parseInt(f.pageX),d=parseInt(f.pageY)}return{left:c,top:d}},a.extend(a.MLjqui.mobile,{_touchListener:function(a,b){var c=function(a,b){var c=document.createEvent("MouseEvents");return c.initMouseEvent(a,b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget),c._pageX=b.pageX,c._pageY=b.pageY,c},d={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},e=c(d[a.type],a);a.target.dispatchEvent(e);var f=a.target["on"+d[a.type]];"function"==typeof f&&f(a)},setMobileSimulator:function(b,c){if(!this.isTouchDevice()){this.simulatetouches=!0,0==c&&(this.simulatetouches=!1);var d={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},e=this;if(window.addEventListener){var f=function(){for(var a in d)b.addEventListener&&(b.removeEventListener(a,e._touchListener),b.addEventListener(a,e._touchListener,!1))};a.MLjqui.browser.msie,f()}}},isTouchDevice:function(){if(void 0!=this.touchDevice)return this.touchDevice;var a="Browser CodeName: "+navigator.appCodeName;if(a+="Browser Name: "+navigator.appName,a+="Browser Version: "+navigator.appVersion,a+="Platform: "+navigator.platform,a+="User-agent header: "+navigator.userAgent,-1!=a.indexOf("Android"))return!0;if(-1!=a.indexOf("IEMobile"))return!0;if(-1!=a.indexOf("Windows Phone"))return!0;if(-1!=a.indexOf("WPDesktop"))return!0;if(-1!=a.indexOf("ZuneWP7"))return!0;if(-1!=a.indexOf("BlackBerry")&&-1!=a.indexOf("Mobile Safari"))return!0;if(-1!=a.indexOf("ipod"))return!0;if(-1!=a.indexOf("nokia")||-1!=a.indexOf("Nokia"))return!0;if(-1!=a.indexOf("Chrome/17"))return!1;if(-1!=a.indexOf("CrOS"))return!1;if(-1!=a.indexOf("Opera")&&-1==a.indexOf("Mobi")&&-1==a.indexOf("Mini")&&-1!=a.indexOf("Platform: Win"))return!1;if(-1!=a.indexOf("Opera")&&-1!=a.indexOf("Mobi")&&-1!=a.indexOf("Opera Mobi"))return!0;var b={ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",blackberry:"BlackBerry(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/"};try{if(void 0!=this.touchDevice)return this.touchDevice;this.touchDevice=!1;for(i in b)if(b.hasOwnProperty(i)&&(prefix=b[i],match=a.match(new RegExp("(?:"+prefix+")([^\\s;]+)")),match))return"blackberry"==i.toString()?(this.touchDevice=!1,!1):(this.touchDevice=!0,!0);var c=navigator.userAgent;if(-1!=navigator.platform.toLowerCase().indexOf("win")){if(c.indexOf("Windows Phone")>=0||c.indexOf("WPDesktop")>=0||c.indexOf("IEMobile")>=0||c.indexOf("ZuneWP7")>=0)return this.touchDevice=!0,!0;if(c.indexOf("Touch")>=0){var d="MSPointerDown"in window||"pointerdown"in window;return d?(this.touchDevice=!0,!0):c.indexOf("ARM")>=0?(this.touchDevice=!0,!0):(this.touchDevice=!1,!1)}}return-1!=navigator.platform.toLowerCase().indexOf("win")?(this.touchDevice=!1,!1):(("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(this.touchDevice=!0),this.touchDevice)}catch(e){return this.touchDevice=!1,!1}},getLeftPos:function(a){for(var b=a.offsetLeft;null!=(a=a.offsetParent);)"HTML"!=a.tagName&&(b+=a.offsetLeft,document.all&&(b+=a.clientLeft));return b},getTopPos:function(b){for(var c=b.offsetTop,d=a(b).coord();null!=(b=b.offsetParent);)"HTML"!=b.tagName&&(c+=b.offsetTop-b.scrollTop,document.all&&(c+=b.clientTop));var e=navigator.userAgent.toLowerCase(),f=(-1!=e.indexOf("windows phone")||-1!=e.indexOf("WPDesktop")||-1!=e.indexOf("ZuneWP7")||-1!=e.indexOf("msie 9")||-1!=e.indexOf("msie 11")||-1!=e.indexOf("msie 10"))&&-1!=e.indexOf("touch");return f?d.top:this.isSafariMobileBrowser()?this.isSafari4MobileBrowser()&&this.isIPadSafariMobileBrowser()?c:-1!=e.indexOf("version/7")?d.top:(-1==e.indexOf("version/6")&&-1==e.indexOf("version/5")||(c+=a(window).scrollTop()),/(Android.*Chrome\/[.0-9]* (!?Mobile))/.exec(navigator.userAgent)?c+a(window).scrollTop():/(Android.*Chrome\/[.0-9]* Mobile)/.exec(navigator.userAgent)?c+a(window).scrollTop():d.top):c},isChromeMobileBrowser:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("android");return b},isOperaMiniMobileBrowser:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("opera mini")||-1!=a.indexOf("opera mobi");return b},isOperaMiniBrowser:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("opera mini");return b},isNewSafariMobileBrowser:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("ipad")||-1!=a.indexOf("iphone")||-1!=a.indexOf("ipod");return b=b&&-1!=a.indexOf("version/5")},isSafari4MobileBrowser:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("ipad")||-1!=a.indexOf("iphone")||-1!=a.indexOf("ipod");return b=b&&-1!=a.indexOf("version/4")},isWindowsPhone:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("windows phone")||-1!=a.indexOf("WPDesktop")||-1!=a.indexOf("ZuneWP7")||-1!=a.indexOf("msie 9")||-1!=a.indexOf("msie 11")||-1!=a.indexOf("msie 10")&&-1!=a.indexOf("touch");return b},isSafariMobileBrowser:function(){var a=navigator.userAgent.toLowerCase();if(/(Android.*Chrome\/[.0-9]* (!?Mobile))/.exec(navigator.userAgent))return!0;if(/(Android.*Chrome\/[.0-9]* Mobile)/.exec(navigator.userAgent))return!0;var b=-1!=a.indexOf("ipad")||-1!=a.indexOf("iphone")||-1!=a.indexOf("ipod")||-1!=a.indexOf("mobile safari");return b},isIPadSafariMobileBrowser:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("ipad");return b},isMobileBrowser:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("ipad")||-1!=a.indexOf("iphone")||-1!=a.indexOf("android");return b},getTouches:function(a){if(a.originalEvent){if(a.originalEvent.touches&&a.originalEvent.touches.length)return a.originalEvent.touches;if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)return a.originalEvent.changedTouches}return a.touches||(a.touches=new Array,a.touches[0]=void 0!=a.originalEvent?a.originalEvent:a,void 0!=a.originalEvent&&a.pageX&&(a.touches[0]=a),"mousemove"==a.type&&(a.touches[0]=a)),a.touches},getTouchEventName:function(a){if(!this.isWindowsPhone())return a;var b=navigator.userAgent.toLowerCase();if(-1!=b.indexOf("windows phone 7")){if(-1!=a.toLowerCase().indexOf("start"))return"MSPointerDown";if(-1!=a.toLowerCase().indexOf("move"))return"MSPointerMove";if(-1!=a.toLowerCase().indexOf("end"))return"MSPointerUp"}return-1!=a.toLowerCase().indexOf("start")?"pointerdown":-1!=a.toLowerCase().indexOf("move")?"pointermove":-1!=a.toLowerCase().indexOf("end")?"pointerup":void 0},dispatchMouseEvent:function(a,b,c){if(!this.simulatetouches){var d=document.createEvent("MouseEvent");d.initMouseEvent(a,!0,!0,b.view,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null),null!=c&&c.dispatchEvent(d)}},getRootNode:function(a){for(;1!==a.nodeType;)a=a.parentNode;return a},setTouchScroll:function(a,b){this.enableScrolling||(this.enableScrolling=[]),this.enableScrolling[b]=a},touchScroll:function(b,c,d,e,f,g){function h(a){if(a.targetTouches&&a.targetTouches.length>=1)return a.targetTouches[0].clientY;if(a.originalEvent&&void 0!==a.originalEvent.clientY)return a.originalEvent.clientY;var b=l.getTouches(a);return b[0].clientY}function i(a){if(a.targetTouches&&a.targetTouches.length>=1)return a.targetTouches[0].clientX;if(a.originalEvent&&void 0!==a.originalEvent.clientX)return a.originalEvent.clientX;var b=l.getTouches(a);return b[0].clientX}function j(){var a,b;K&&(a=Date.now()-I,b=-K*Math.exp(-a/O),b>.5||-.5>b?(Q(L+b,event),requestAnimationFrame(j)):(Q(L),g.fadeOut("fast")))}function k(){var a,b;K&&(a=Date.now()-I,b=-K*Math.exp(-a/O),b>.5||-.5>b?(R(M+b),requestAnimationFrame(k)):(R(M),f.fadeOut("fast")))}if(null!=b){var l=this,m=0,n=0,o=0,p=0,q=0,r=0;this.scrolling||(this.scrolling=[]),this.scrolling[e]=!1;var s=!1,t=a(b),u=["select","input","textarea"],v=0,w=0;this.enableScrolling||(this.enableScrolling=[]),this.enableScrolling[e]=!0;var e=e,x=this.getTouchEventName("touchstart")+".touchScroll",y=this.getTouchEventName("touchend")+".touchScroll",z=this.getTouchEventName("touchmove")+".touchScroll";f.fadeOut(0),g.fadeOut(0);var A,B,C,D,E,F,G,H,I,J,K,L,M,N,O;C=c,B=0,D=0,xoffset=0,A=f.MLjquiScrollBar("max"),O=325;var P=function(){var a,b,c,d;a=Date.now(),b=a-I,I=a,c=D-H,xdelta=xoffset-xframe,H=D,xframe=xoffset,F=!0,d=1e3*c/(1+b),xv=1e3*xdelta/(1+b),G=.8*d+.2*G,xvelocity=.8*xv+.2*xvelocity},v=function(b){function c(a){F=!0,E=h(a),N=i(a),G=K=xvelocity=0,H=D,xframe=xoffset,I=Date.now(),clearInterval(J),J=setInterval(P,100),a.preventDefault()}if(!l.enableScrolling[e])return!0;if(-1===a.inArray(b.target.tagName.toLowerCase(),u)){D=g.MLjquiScrollBar("value"),xoffset=f.MLjquiScrollBar("value");var d=l.getTouches(b),j=d[0];return 1==d.length&&l.dispatchMouseEvent("mousedown",j,l.getRootNode(j.target)),c(b),s=!1,n=j.pageY,q=j.pageX,l.simulatetouches&&void 0!=j._pageY&&(n=j._pageY,q=j._pageX),l.scrolling[e]=!0,A=f.MLjquiScrollBar("max"),C=g.MLjquiScrollBar("max"),m=0,p=0,!0}};t.on?t.on(x,v):t.bind(x,v);var Q=function(a,b){D=a>C?C:B>a?B:a,d(null,a,0,0,b)},R=function(a,b){xoffset=a>A?A:B>a?B:a,d(a,null,0,0,b)},S=function(a){function b(a){var b,c,d;if(F){if(b=h(a),d=i(a),c=E-b,xdelta=N-d,c>2||-2>c)return E=b,Q(D+c,a),P(),a.preventDefault(),a.stopPropagation(),!1;if(xdelta>2||xdelta<-2)return N=d,R(xoffset+xdelta,a),P(),a.preventDefault(),a.stopPropagation(),!1;a.preventDefault()}}if(!l.enableScrolling[e])return!0;if(!l.scrolling[e])return!0;var c=l.getTouches(a);if(c.length>1)return!0;var d=c[0].pageY,j=c[0].pageX;l.simulatetouches&&void 0!=c[0]._pageY&&(d=c[0]._pageY,j=c[0]._pageX);var k=d-n,t=j-q;w=d,touchHorizontalEnd=j,o=k-m,r=t-p,s=!0,m=k,p=t;var u=null!=f?"hidden"!=f[0].style.visibility:!0,v=null!=g?"hidden"!=g[0].style.visibility:!0;(u||v)&&(u||v)&&b(a)};t.on?t.on(z,S):t.bind(z,S);var T=function(a){if(!l.enableScrolling[e])return!0;var b=l.getTouches(a)[0];if(!l.scrolling[e])return!0;if(F=!1,clearInterval(J),G>10||-10>G?(K=.8*G,L=Math.round(D+K),I=Date.now(),requestAnimationFrame(j),g.fadeIn(100)):xvelocity>10||xvelocity<-10?(K=.8*xvelocity,M=Math.round(xoffset+K),I=Date.now(),requestAnimationFrame(k),f.fadeIn(100)):(f.fadeOut(100),g.fadeOut(100)),l.scrolling[e]=!1,!s){var b=l.getTouches(a)[0],c=l.getRootNode(b.target);return l.dispatchMouseEvent("mouseup",b,c),l.dispatchMouseEvent("click",b,c),!0}l.dispatchMouseEvent("mouseup",b,a.target)};if(this.simulatetouches){
var U=(void 0!=a(window).on||a(window).bind,function(a){try{T(a)}catch(b){}l.scrolling[e]=!1});if(void 0!=a(window).on?a(document).on("mouseup.touchScroll",U):a(document).bind("mouseup.touchScroll",U),window.frameElement&&null!=window.top){var V=function(a){try{T(a)}catch(b){}l.scrolling[e]=!1};window.top.document&&(a(window.top.document).on?a(window.top.document).on("mouseup",V):a(window.top.document).bind("mouseup",V))}var W=(void 0!=a(document).on||a(document).bind,function(a){if(!l.scrolling[e])return!0;l.scrolling[e]=!1;var b=l.getTouches(a)[0],c=l.getRootNode(b.target);l.dispatchMouseEvent("mouseup",b,c),l.dispatchMouseEvent("click",b,c)});void 0!=a(document).on?a(document).on("touchend",W):a(document).bind("touchend",W)}t.on&&(t.on("dragstart",function(a){a.preventDefault()}),t.on("selectstart",function(a){a.preventDefault()})),t.on?t.on(y+" touchcancel.touchScroll",T):t.bind(y+" touchcancel.touchScroll",T)}}}),a.MLjqui.cookie=a.MLjqui.cookie||{},a.extend(a.MLjqui.cookie,{cookie:function(b,c,d){if(arguments.length>1&&"[object Object]"!==String(c)){if(d=a.extend({},d),null!==c&&void 0!==c||(d.expires=-1),"number"==typeof d.expires){var e=d.expires,f=d.expires=new Date;f.setDate(f.getDate()+e)}return c=String(c),document.cookie=[encodeURIComponent(b),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};var g,h=d.raw?function(a){return a}:decodeURIComponent;return(g=new RegExp("(?:^|; )"+encodeURIComponent(b)+"=([^;]*)").exec(document.cookie))?h(g[1]):null}}),a.MLjqui.string=a.MLjqui.string||{},a.extend(a.MLjqui.string,{replace:function(a,b,c){if(b===c)return this;for(var d=a,e=d.indexOf(b);-1!=e;)d=d.replace(b,c),e=d.indexOf(b);return d},contains:function(a,b){return null==a||null==b?!1:-1!=a.indexOf(b)},containsIgnoreCase:function(a,b){return null==a||null==b?!1:-1!=a.toString().toUpperCase().indexOf(b.toString().toUpperCase())},equals:function(a,b){return null==a||null==b?!1:(a=this.normalize(a),b.length==a.length?a.slice(0,b.length)==b:!1)},equalsIgnoreCase:function(a,b){return null==a||null==b?!1:(a=this.normalize(a),b.length==a.length?a.toUpperCase().slice(0,b.length)==b.toUpperCase():!1)},startsWith:function(a,b){return null==a||null==b?!1:a.slice(0,b.length)==b},startsWithIgnoreCase:function(a,b){return null==a||null==b?!1:a.toUpperCase().slice(0,b.length)==b.toUpperCase()},normalize:function(a){return 65279==a.charCodeAt(a.length-1)&&(a=a.substring(0,a.length-1)),a},endsWith:function(a,b){return null==a||null==b?!1:(a=this.normalize(a),a.slice(-b.length)==b)},endsWithIgnoreCase:function(a,b){return null==a||null==b?!1:(a=this.normalize(a),a.toUpperCase().slice(-b.length)==b.toUpperCase())}}),a.extend(a.easing,{easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c}})}(MLjquiBaseFramework),function(a){a.extend(a.event.special,{close:{noBubble:!0},open:{noBubble:!0},cellclick:{noBubble:!0},rowclick:{noBubble:!0},tabclick:{noBubble:!0},selected:{noBubble:!0},expanded:{noBubble:!0},collapsed:{noBubble:!0},valuechanged:{noBubble:!0},expandedItem:{noBubble:!0},collapsedItem:{noBubble:!0},expandingItem:{noBubble:!0},collapsingItem:{noBubble:!0}}),a.fn.extend({ischildof:function(b){for(var c=a(this).parents().get(),d=0;d<c.length;d++)if("string"!=typeof b){var e=c[d];if(void 0!==b&&e==b[0])return!0}else if(void 0!==b&&a(c[d]).is(b))return!0;return!1}}),a.fn.MLjquiProxy=function(){var b=a(this).data().MLjquiWidget,c=Array.prototype.slice.call(arguments,0),d=b.element;return d||(d=b.base.element),a.MLjqui.MLjquiWidgetProxy(b.widgetName,d,c)};var b=this.originalVal=a.fn.val;a.fn.val=function(c){if("undefined"==typeof c){if(a(this).hasClass("MLjqui-widget")){var d=a(this).data().MLjquiWidget;if(d&&d.val)return d.val()}return b.call(this)}if(a(this).hasClass("MLjqui-widget")){var d=a(this).data().MLjquiWidget;if(d&&d.val)return 2!=arguments.length?d.val(c):d.val(c,arguments[1])}return b.call(this,c)},a.fn.modal&&a.fn.modal.Constructor&&(a.fn.modal.Constructor.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(b){if(this.$element[0]!==b.target&&!this.$element.has(b.target).length){if(a(b.target).parents().hasClass("MLjqui-popup"))return!0;this.$element.trigger("focus")}},this))}),a.fn.coord=function(b){var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;if(g){if(c=g.documentElement,!a.contains(c,f))return e;void 0!==typeof f.getBoundingClientRect&&(e=f.getBoundingClientRect());var h=function(b){return a.isWindow(b)?b:9===b.nodeType?b.defaultView||b.parentWindow:!1};d=h(g);var i=0,j=0,k=navigator.userAgent.toLowerCase(),l=-1!=k.indexOf("ipad")||-1!=k.indexOf("iphone");if(l&&(i=2),1==b&&"static"!=a(document.body).css("position")){var m=a(document.body).coord();i=-m.left,j=-m.top}return{top:j+e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:i+e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}}}}(MLjquiBaseFramework),function(a){function b(b,c){return this.owner=b,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.editable=!0,this.hidden=!1,this.hideable=!0,this.groupable=!0,this.renderer=null,this.cellsRenderer=null,this.columntype=null,this.cellsFormat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.resizable=!0,this.draggable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.autoCellHeight=!0,this.validation=null,this.classname="",this.cellclassname="",this.aggregates=null,this.aggregatesRenderer=null,this.rendered=null,this.exportable=!0,this.nullable=!0,this.columngroup=null,this.columntype="textbox",this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsFormat:this.cellsFormat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(a,b){if(this[a]){var c=this[a];this[a]=b,this.owner._columnPropertyChanged(this,a,b,c)}else if(this[a.toLowerCase()]){var c=this[a.toLowerCase()];this[a.toLowerCase()]=b,this.owner._columnPropertyChanged(this,a.toLowerCase(),b,c)}},this._initfields=function(c){if(null!=c){var d=this;if(a.MLjqui.hasProperty(c,"dataField")&&(this.datafield=a.MLjqui.get(c,"dataField")),a.MLjqui.hasProperty(c,"displayField")?this.displayfield=a.MLjqui.get(c,"displayField"):this.displayfield=this.datafield,a.MLjqui.hasProperty(c,"columnType")&&(this.columntype=a.MLjqui.get(c,"columnType")),a.MLjqui.hasProperty(c,"validation")&&(this.validation=a.MLjqui.get(c,"validation")),a.MLjqui.hasProperty(c,"autoCellHeight")&&(this.autoCellHeight=a.MLjqui.get(c,"autoCellHeight")),a.MLjqui.hasProperty(c,"text")?this.text=a.MLjqui.get(c,"text"):this.text=this.displayfield,a.MLjqui.hasProperty(c,"sortable")&&(this.sortable=a.MLjqui.get(c,"sortable")),a.MLjqui.hasProperty(c,"hidden")&&(this.hidden=a.MLjqui.get(c,"hidden")),a.MLjqui.hasProperty(c,"groupable")&&(this.groupable=a.MLjqui.get(c,"groupable")),a.MLjqui.hasProperty(c,"renderer")&&(this.renderer=a.MLjqui.get(c,"renderer")),a.MLjqui.hasProperty(c,"align")&&(this.align=a.MLjqui.get(c,"align")),a.MLjqui.hasProperty(c,"cellsAlign")&&(this.cellsalign=a.MLjqui.get(c,"cellsAlign")),a.MLjqui.hasProperty(c,"cellsFormat")&&(this.cellsFormat=a.MLjqui.get(c,"cellsFormat")),a.MLjqui.hasProperty(c,"width")&&(this.width=a.MLjqui.get(c,"width")),a.MLjqui.hasProperty(c,"minWidth")&&(this.minwidth=a.MLjqui.get(c,"minWidth")),a.MLjqui.hasProperty(c,"maxWidth")&&(this.maxwidth=a.MLjqui.get(c,"maxWidth")),a.MLjqui.hasProperty(c,"cellsRenderer")&&(this.cellsRenderer=a.MLjqui.get(c,"cellsRenderer")),a.MLjqui.hasProperty(c,"columnType")&&(this.columntype=a.MLjqui.get(c,"columnType")),a.MLjqui.hasProperty(c,"pinned")&&(this.pinned=a.MLjqui.get(c,"pinned")),a.MLjqui.hasProperty(c,"filterable")&&(this.filterable=a.MLjqui.get(c,"filterable")),a.MLjqui.hasProperty(c,"filter")&&(this.filter=a.MLjqui.get(c,"filter")),a.MLjqui.hasProperty(c,"resizable")&&(this.resizable=a.MLjqui.get(c,"resizable")),a.MLjqui.hasProperty(c,"draggable")&&(this.draggable=a.MLjqui.get(c,"draggable")),a.MLjqui.hasProperty(c,"editable")&&(this.editable=a.MLjqui.get(c,"editable")),a.MLjqui.hasProperty(c,"initEditor")&&(this.initeditor=a.MLjqui.get(c,"initEditor")),a.MLjqui.hasProperty(c,"createEditor")&&(this.createeditor=a.MLjqui.get(c,"createEditor")),a.MLjqui.hasProperty(c,"destroyEditor")&&(this.destroyeditor=a.MLjqui.get(c,"destroyEditor")),a.MLjqui.hasProperty(c,"getEditorValue")&&(this.geteditorvalue=a.MLjqui.get(c,"getEditorValue")),a.MLjqui.hasProperty(c,"className")&&(this.classname=a.MLjqui.get(c,"className")),a.MLjqui.hasProperty(c,"cellClassName")&&(this.cellclassname=a.MLjqui.get(c,"cellClassName")),a.MLjqui.hasProperty(c,"aggregates")&&(this.aggregates=a.MLjqui.get(c,"aggregates")),a.MLjqui.hasProperty(c,"aggregatesRenderer")&&(this.aggregatesRenderer=a.MLjqui.get(c,"aggregatesRenderer")),a.MLjqui.hasProperty(c,"rendered")&&(this.rendered=a.MLjqui.get(c,"rendered")),a.MLjqui.hasProperty(c,"exportable")&&(this.exportable=a.MLjqui.get(c,"exportable")),a.MLjqui.hasProperty(c,"nullable")&&(this.nullable=a.MLjqui.get(c,"nullable")),a.MLjqui.hasProperty(c,"columnGroup")&&(this.columngroup=a.MLjqui.get(c,"columnGroup")),!c instanceof String&&"string"!=typeof c)for(var e in c)if(!d.hasOwnProperty(e)&&!d.hasOwnProperty(e.toLowerCase()))throw b.host.remove(),new Error("MLjquiDataTable: Invalid property name - "+e+".")}},this._initfields(c),this}a.MLjqui.MLjquiWidget("MLjquiDataTable","",{}),a.extend(a.MLjqui._MLjquiDataTable.prototype,{defineInstance:function(){var b={altRows:!1,aggregatesHeight:34,autoShowLoadElement:!0,autoRowHeight:!0,columnsHeight:30,columns:[],columnGroups:null,columnsResize:!1,columnsReorder:!1,dataview:null,disabled:!1,editable:!1,editSettings:{saveOnPageChange:!0,saveOnBlur:!0,saveOnSelectionChange:!0,cancelOnEsc:!0,saveOnEnter:!0,editSingleCell:!1,editOnDoubleClick:!0,editOnF2:!0},enableHover:!0,enableBrowserSelection:!1,filterHeight:30,filterable:!1,filterMode:"default",groupsRenderer:null,groups:new Array,headerZIndex:359,height:null,handleKeyboardNavigation:null,indentWidth:25,initRowDetails:!1,loadingErrorMessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. MLjquiDataTable raises the 'bindingComplete' event when the binding is completed.",localization:null,pagerHeight:28,pageSize:10,pageSizeOptions:["5","10","20"],pageable:!1,pagerPosition:"bottom",pagerMode:"default",pageSizeMode:"default",pagerButtonsCount:5,pagerRenderer:null,ready:null,rendertoolbar:null,rowDetails:!1,renderStatusBar:null,rendered:null,rendering:null,rtl:!1,sortable:!1,showtoolbar:!1,showstatusbar:!1,statusBarHeight:34,serverProcessing:!1,selectionMode:"multiplerows",scrollBarSize:a.MLjqui.utilities.scrollBarSize,touchScrollBarSize:a.MLjqui.utilities.touchScrollBarSize,showAggregates:!1,showHeader:!0,maxHeight:999999,maxWidth:999999,autoBind:!0,beginEdit:null,endEdit:null,autokoupdates:!0,columnsVirtualization:!1,exportSettings:{columnsHeader:!0,hiddenColumns:!1,serverURL:null,characterSet:null,collapsedRecords:!1,recordsInView:!0,fileName:"MLjquiDataTable"},source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},toolbarHeight:34,tableZIndex:369,_updating:!1,touchmode:"auto",width:null,that:this,incrementalSearch:!0,events:["bindingComplete","sort","filter","pageChanged","pageSizeChanged","rowClick","rowDoubleClick","cellValueChanged","rowBeginEdit","rowEndEdit","rowSelect","rowUnselect","rowCheck","rowUncheck","columnResized","columnReordered","rowExpand","rowCollapse","cellBeginEdit","cellEndEdit"]};return a.extend(!0,this,b),this.that=this,b},createInstance:function(b){var c=this;if(15!=a.MLjqui.utilities.scrollBarSize&&(c.scrollBarSize=a.MLjqui.utilities.scrollBarSize),"table"==c.element.nodeName.toLowerCase()||a(c.element).children("table").length>0){var d=c.host.find("tbody tr"),e=c.host.find("th"),f=new Array;0===e.length&&(e=d[0],d.splice(0,1)),c.localizestrings&&(c.localizestrings(),null!=c.localization&&c.localizestrings(c.localization,!1));for(var g=[],h=0;h<d.length;h++){for(var i=d[h],j={},k=0;k<e.length;k++){var l=a.trim(a(e[k]).text());if(0===h){var m={name:l};if(c.columns[k]&&c.columns[k].cellsFormat){var n=c.columns[k].cellsFormat.toLowerCase();-1==n.indexOf("p")&&-1==n.indexOf("c")&&-1==n.indexOf("n")&&-1==n.indexOf("f")||(m.type="number"),-1==n.indexOf("d")&&-1==n.indexOf("m")&&-1==n.indexOf("y")&&-1==n.indexOf("h")&&-1==n.indexOf("m")&&-1==n.indexOf("s")&&-1==n.indexOf("t")||(m.type="date")}f.push(m)}var o=a(i).find("td:eq("+k+")"),p=f[k].type;if(p){var q=c.getvaluebytype(a.trim(o.text()),f[k]);j[l]=q}else j[l]=a.trim(o.text())}g[g.length]=j}c.host.wrap("<div></div>");var r=c.host.parent(),s=c.host.data();s.MLjquiDataTable.host=r,s.MLjquiDataTable.element=r[0],c.host.parent()[0].id=c.element.id;try{c.host.parent()[0].style=c.element.style}catch(t){}c.element=r[0],c.host=r,c.host.data(s);var u={dataFields:f,localdata:g,datatype:"array"},v=new a.MLjqui.dataAdapter(u);c.source=v}c.source&&!c.source.dataBind&&(c.source=new a.MLjqui.dataAdapter(c.source));var w=c.source._source.datafields;w&&w.length>0&&(c._camelCase=void 0!==c.source._source.dataFields,c.selectionMode=c.selectionMode.toLowerCase()),null==c.host.attr("tabindex")&&c.host.attr("tabindex","0"),c.host.attr("role","grid"),c.host.attr("align","left"),c.host.addClass(c.toTP("MLjqui-grid")),c.host.addClass(c.toTP("MLjqui-reset")),c.host.addClass(c.toTP("MLjqui-rc-all")),c.host.addClass(c.toTP("MLjqui-widget")),c.host.addClass(c.toTP("MLjqui-widget-content")),c._testmodules()||(c.render(!0),a.MLjqui.utilities.resize(c.host,function(){var b=a(window).width(),d=a(window).height(),e=c.host.width(),f=c.host.height();c._lastHostWidth==e&&c._lastHostHeight==f||c._updatesize(c._lastHostWidth!=e,c._lastHostHeight!=f),c._lastWidth=b,c._lastHeight=d,c._lastHostWidth=e,c._lastHostHeight=f}))},getvaluebytype:function(b,c){var d=b;if(null==b)return b;if(","==this.gridlocalization.decimalseparator&&b.indexOf(this.gridlocalization.decimalseparator)>=0&&(b=b.replace(this.gridlocalization.decimalseparator,".")),b.indexOf(this.gridlocalization.currencysymbol)>=0&&(b=b.replace(this.gridlocalization.currencysymbol,"")),b.indexOf(this.gridlocalization.percentagesymbol)>=0&&(b=b.replace(this.gridlocalization.percentagesymbol,"")),a.isArray(b)&&"array"!=c.type){for(var e=0;e<b.length;e++)b[e]=this.getvaluebytype(b[e],c);return b}if("date"==c.type)if("NaN"==b)b="";else{var f=new Date(b);if("string"==typeof b&&c.format){var g=a.MLjqui.dataFormat.parsedate(b,c.format);null!=g&&(f=g)}b=("NaN"==f.toString()||"Invalid Date"==f.toString())&&a.MLjqui.dataFormat?a.MLjqui.dataFormat.tryparsedate(b):f,null==b&&(b=d)}else if("float"==c.type||"number"==c.type||"decimal"==c.type)if("NaN"==b)b="";else{var b=parseFloat(b);isNaN(b)&&(b=d)}else if("int"==c.type||"integer"==c.type){var b=parseInt(b);isNaN(b)&&(b=d)}else"bool"!=c.type&&"boolean"!=c.type||(null!=b&&void 0!=b.toLowerCase&&("false"==b.toLowerCase()?b=!1:"true"==b.toLowerCase()&&(b=!0)),b=1==b?!0:0==b&&""!==b?!1:"");return b},_builddataloadelement:function(){this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=a('<div class="MLjqui-datatable-load" style="z-index: 99998; background-color:rgba(50,50,50,0.1); overflow: hidden; position: absolute;"></div>');var b=a('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="MLjqui-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>");if(b.addClass(this.toTP("MLjqui-rc-all")),this.dataloadelement.addClass(this.toTP("MLjqui-rc-all")),b.addClass(this.toTP("MLjqui-tb-fill-state-normal")),this.dataloadelement.append(b),this.dataloadelement.width(this.width),this.dataloadelement.height(this.height),this.host.prepend(this.dataloadelement),""!=this.source._source.url){var c=!1;("auto"===this.height||null===this.height||this.autoheight)&&999999==this.maxHeight&&(c=!0),c?(this.host.height(100),this.dataloadelement.height(100)):(this.host.height(this.height),this.dataloadelement.height(this.height));var d=!1;("auto"===this.width||null===this.width||this.autoWidth)&&(d=!0),d?(this.host.width(300),this.dataloadelement.width(300)):(this.host.width(this.width),this.dataloadelement.width(this.width))}},_measureElement:function(b){var c=a("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");c.addClass(this.toTP("MLjqui-widget")),a(document.body).append(c),"cell"==b?this._cellheight=c.height():this._columnheight=c.height(),c.remove()},_testmodules:function(){var b="",c=this,d=function(){""!=b.length&&(b+=",")};if(this.host.MLjquiScrollBar||(d(),b+=" MLjquiscrollbar.js"),this.host.MLjquiButton||(d(),b+=" MLjquibuttons.js"),a.MLjqui.dataAdapter||(d(),b+=" MLjquidata.js"),""!=b||this.editable||this.filterable||this.pageable){var e=[],f=function(a){switch(a){case"checkbox":c.host.MLjquiCheckBox||e.checkbox||(e.checkbox=!0,d(),b+=" MLjquicheckbox.js");break;case"dropdownlist":c.host.MLjquiDropDownList||e.dropdownlist?c.host.MLjquiListBox||e.listbox||(d(),e.listbox=!0,b+=" MLjquilistbox.js"):(d(),e.dropdownlist=!0,b+=" MLjquidropdownlist.js(requires: MLjquilistbox.js)")}};if((this.filterable&&"simple"!=this.filterMode||"advanced"==this.pagerMode&&this.pageable)&&f("dropdownlist"),""!=b)throw new Error("MLjquiDataTable: Missing references to the following module(s): "+b)}return!1},focus:function(){try{this.wrapper.focus(),this.host.focus();var a=this;setTimeout(function(){a.wrapper.focus(),a.host.focus()},25),this.focused=!0}catch(b){}},hiddenParent:function(){return a.MLjqui.isHidden(this.host)},isBindingCompleted:function(){return!this._loading},_updatesize:function(b,c){if(!this._loading){var d=this,e=d.host.width(),f=d.host.height();d._oldWidth||(d._oldWidth=e),d._oldHeight||(d._oldHeight=f),void 0!=d._resizeTimer&&(clearTimeout(d._resizeTimer),d._resizeTimer=null);var g=300,h=function(){d._resizeTimer&&clearTimeout(d._resizeTimer),d.resizingGrid=!0,a.MLjqui.isHidden(d.host)||(d._updatecolumnwidths(),d.refresh(),d._oldWidth=e,d._oldHeight=f,d.resizingGrid=!1)};h(),d._resizeTimer=setTimeout(function(){var a=d.host.width(),b=d.host.height();d._oldWidth==a&&d._oldHeight==b||h()},g)}},resize:function(a,b){void 0!=a&&(this.width=a),void 0!=b&&(this.height=b),this._updatecolumnwidths(),this.refresh()},isTouchDevice:function(){if(void 0!=this.touchDevice)return this.touchDevice;var b=a.MLjqui.mobile.isTouchDevice();return this.touchDevice=b,1==this.touchmode?(b=!0,a.MLjqui.mobile.setMobileSimulator(this.table[0]),this.touchDevice=b):0==this.touchmode&&(b=!1),b&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("MLjqui-touch")),this.host.find("MLjqui-widget-content").addClass(this.toThemeProperty("MLjqui-touch")),this.host.find("MLjqui-widget-header").addClass(this.toThemeProperty("MLjqui-touch")),this.scrollBarSize=this.touchScrollBarSize),b},toTP:function(a){return this.toThemeProperty(a)},localizestrings:function(b,c){if(this._cellscache=new Array,a.MLjqui.dataFormat&&a.MLjqui.dataFormat.cleardatescache(),this._loading)throw new Error("MLjquiDataTable: "+this.loadingErrorMessage);if(null!=b){for(var d in b)d.toLowerCase()!==d&&(b[d.toLowerCase()]=b[d]);for(var e=["pagergotopagestring","pagershowrowsstring","pagerrangestring","pagernextbuttonstring","pagerpreviousbuttonstring","pagerfirstbuttonstring","pagerlastbuttonstring","toppagerstring","firstDay","days","months","AM","PM","patterns","percentsymbol","currencysymbol","currencysymbolposition","decimalseparator","thousandsseparator","filterapplystring","filteraddnew","filtercancelstring","filterclearstring","filterstring","filterstringcomparisonoperators","filternumericcomparisonoperators","filterdatecomparisonoperators","filterbooleancomparisonoperators","emptydatastring","filterselectstring","todaystring","clearstring","validationstring","loadtext","filtersearchstring","loadingErrorMessage"],f=this,g=0;g<e.length;g++){var h=e[g];void 0!==b[h]&&(f.gridlocalization[h]=b[h])}b.loadingErrorMessage&&(this.loadingErrorMessage=b.loadingErrorMessage),c!==!1&&(this._builddataloadelement(),a(this.dataloadelement).css("visibility","hidden"),a(this.dataloadelement).css("display","none"))}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",filterapplystring:"Apply",filtercancelstring:"Cancel",filterclearstring:"Clear Filter",filterstring:"advanced",filtersearchstring:"Search:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"  .",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",loadingErrorMessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. MLjquiDataTable raises the 'bindingComplete' event when the binding is completed."}},_updateScrollbars:function(a){var b=!1;("auto"===this.width||null===this.width||this.autowidth)&&999999==this.maxWidth&&(b=!0);var c=parseInt(this.scrollBarSize),d=this.table?this.table.height():0,e=0,f="inherit",g=this.vScrollBar[0].style.visibility;this.hScrollBar[0].style.visibility;if(a)var h=a;else var h=this.host.height();h-=this.columnGroups?this.showHeader?this.columnsheader.height():0:this.showHeader?this.columnsHeight:0,this.filterable&&(h-=this.filter.height()),this.pageable&&(h-=this.pagerHeight,"both"===this.pagerPosition&&(h-=this.pagerHeight)),this.showtoolbar&&(h-=this.toolbarHeight),this.showstatusbar&&(h-=this.statusBarHeight),this.showAggregates&&(h-=this.aggregatesHeight);var i=!1;if(("auto"===this.height||null===this.height||this.autoheight)&&999999==this.maxHeight&&(i=!0),!i&&d>h&&(this.source.records.length>0||this.source.hierarchy&&this.source.hierarchy.length>0)?(this.vScrollBar[0].style.visibility=f,e=4+parseInt(c),this.vScrollBar.MLjquiScrollBar({max:d-h})):this.vScrollBar[0].style.visibility="hidden",g!=this.vScrollBar[0].style.visibility){this._updatecolumnwidths();var j=this.table.height();d!=j&&(d=j,!i&&d>h&&(this.source.records.length>0||this.source.hierarchy&&this.source.hierarchy.length>0)&&(this.vScrollBar[0].style.visibility=f,e=4+parseInt(c),this.vScrollBar.MLjquiScrollBar({max:d-h})))}0==this.scrollBarSize&&(e=0);var k=this.table?this.table.width():0;k>3&&(k-=3);var l=parseInt(this.host.css("border-left-width"))+parseInt(this.host.css("border-right-width")),m=l+this.host.width()-e;if(k>m&&!b){if(this.hScrollBar[0].style.visibility=f,this.hScrollBar.MLjquiScrollBar({max:k-m}),e=4+parseInt(c),0==c&&(e=0),!i){if(d>h-e+4&&(this.source.records.length>0||this.source.hierarchy&&this.source.hierarchy.length>0)){this.hScrollBar.MLjquiScrollBar({max:l+k-m});var n="hidden"===this.vScrollBar[0].style.visibility;this.vScrollBar[0].style.visibility=f,this._updatecolumnwidths(),n&&this.hScrollBar.MLjquiScrollBar({max:k-m+e+l});var o=this.table?this.table.width():0;o>3&&(o-=3),o!=k&&m>o&&(this.hScrollBar.MLjquiScrollBar({max:l+o-m}),this.hScrollBar[0].style.visibility="hidden",e=0)}this.vScrollBar.MLjquiScrollBar({max:d-h+e})}}else this.hScrollBar[0].style.visibility="hidden";0===this.source.records.length&&this.source.hierarchy&&0===this.source.hierarchy.length&&(this.vScrollBar[0].style.visibility="hidden",this.bottomRight[0].style.visibility="hidden"),"hidden"==this.vScrollBar[0].style.visibility&&0!=this.vScrollInstance.value&&this.vScrollInstance.setPosition(0)},_measureElementWidth:function(b){var c=a("<span style='visibility: hidden; white-space: nowrap;'>"+b+"</span>");c.addClass(this.toTP("MLjqui-widget")),c.addClass(this.toTP("MLjqui-grid")),c.addClass(this.toTP("MLjqui-grid-column-header")),c.addClass(this.toTP("MLjqui-widget-header")),a(document.body).append(c);var d=c.outerWidth()+20;return c.remove(),d},_arrangeAutoHeight:function(a){if(a||(a=0),"auto"===this.height||null===this.height||this.autoheight){var b=this.table.height(),c=0;if(c+=this.columnGroups?this.showHeader?this.columnsheader.height():-1:this.showHeader?this.columnsHeight:-1,c+=this.showstatusbar?this.statusBarHeight:0,c+=this.showAggregates?this.aggregatesHeight:0,c+=this.showtoolbar?this.toolbarHeight:0,c+=this.pageable?this.pagerHeight:0,"both"===this.pagerPosition&&(c+=this.pageable?this.pagerHeight:0),c+=b,this.filterable){var d=this.filter.find(".filterrow"),e=this.filter.find(".filterrow-hidden"),f=1;e.length>0&&(f=0),c+=this.filterHeight-1+this.filterHeight*d.length*f}return c+a>this.maxHeight?this.host.height(this.maxHeight):this.host.height(c+a),!0}return!1},_arrangeAutoWidth:function(a){if(a||(a=0),"auto"===this.width||null===this.width||this.autowidth){for(var b=0,c=0;c<this.columns.records.length;c++){var d=this.columns.records[c].width;this.columns.records[c].hidden||("auto"==d?(d=this._measureElementWidth(this.columns.records[c].text),b+=d):b+=d)}return width=b,width+a>this.maxWidth?this.host.width(this.maxWidth):this.host.width(width+a),!0}return!1},_measureTopAndHeight:function(){var a=this.host.height(),b=0;if(this.showtoolbar&&(b+=this.toolbarHeight,a-=parseInt(this.toolbarHeight)),this.filterable){var c=this.filter.find(".filterrow"),d=this.filter.find(".filterrow-hidden"),e=1;d.length>0&&(e=0),b+=this.filterHeight,a-=parseInt(this.filterHeight);var f=1==e?c.length:0;b+=this.filterHeight*f,a-=this.filterHeight*f}return this.pageable&&"bottom"!=this.pagerPosition&&(b+=parseInt(this.pagerHeight)+1,a>this.pagerHeight&&"both"===this.pagerPosition&&(a-=parseInt(this.pagerHeight))),{top:b,height:a}},_arrange:function(){if(this.table){this._arrangeAutoHeight(),this._arrangeAutoWidth();var b=this.host.width(),c=this.host.height(),d=c;this.pageable?"bottom"===this.pagerPosition?(this.toppager[0].style.visibility="hidden",this.pager[0].style.visibility="inherit"):"both"===this.pagerPosition?(this.toppager[0].style.visibility="inherit",this.pager[0].style.visibility="inherit"):"top"===this.pagerPosition&&(this.toppager[0].style.visibility="inherit",this.pager[0].style.visibility="hidden"):(this.toppager[0].style.visibility="hidden",this.pager[0].style.visibility="hidden");var e=0;if(this.showtoolbar?(this.toolbar.width(b),this.toolbar.height(this.toolbarHeight-1),this.toolbar.css("top",0),e+=this.toolbarHeight,c-=parseInt(this.toolbarHeight)):this.toolbar[0].style.height="0px",this.filterable){this.filter.width(b),this.filter.css("top",e);var f=this.filter.find(".filterrow"),g=this.filter.find(".filterrow-hidden"),h=1;g.length>0&&(h=0),this.filter.height(this.filterHeight-1+this.filterHeight*f.length*h),e+=this.filterHeight,c-=parseInt(this.filterHeight);var i=1==h?f.length:0;e+=this.filterHeight*i,c-=this.filterHeight*i}if(this.showstatusbar?(this.statusbar.width(this.table?Math.max(b,this.table.width()):b),this.statusbar.height(this.statusBarHeight-1)):this.statusbar[0].style.height="0px",this.showAggregates?this.aggregates.height(this.aggregatesHeight-1):this.aggregates[0].style.height="0px",this.pageable&&"bottom"!=this.pagerPosition)this.toppager[0].style.width=b+"px",this.toppager[0].style.height=parseInt(this.pagerHeight)+"px",this.toppager[0].style.top=parseInt(e)+"px",e+=parseInt(this.pagerHeight)+1,c>this.pagerHeight&&(c-=parseInt(this.pagerHeight));else{this.toppager[0].style.width!=b+"px"&&(this.toppager[0].style.width=parseInt(b)+"px"),this.toppager[0].style.height!=this.pagerHeight+"px"&&(this.toppager[0].style.height=parseInt(this.pagerHeight)+"px"),this.toppager[0].style.top!=e+"px"&&(this.toppager[0].style.top=e+"px");var j="bottom"!=this.pagerPosition?this.pagerHeight:0,k=e+j+"px";this.content[0].style.top!=k&&(this.content[0].style.top=e+this.pagerHeight+"px")}this._updateScrollbars(d);var l=parseInt(this.scrollBarSize),m=4,n=2,o=0;if("hidden"!=this.vScrollBar[0].style.visibility&&(o=l+m),"hidden"!=this.hScrollBar[0].style.visibility&&(n=l+m+2),0==l&&(o=0,n=0),this.showAggregates&&("hidden"===this.hScrollBar[0].style.visibility?this.aggregates.width(this.table?Math.max(b,this.table.width())+4:b):this.aggregates.width("auto")),"hidden"!=this.vScrollBar[0].style.visibility||"hidden"!=this.hScrollBar[0].style.visibility){var p=this._arrangeAutoHeight(n-2),q=this._arrangeAutoWidth(o+1);if(p||q){var b=this.host.width();this.toppager[0].style.width=parseInt(b)+"px",this.toolbar[0].style.width=parseInt(b)+"px",this.statusbar[0].style.width=parseInt(b)+"px",this.filter[0].style.width=parseInt(b)+"px"}if(p){var r=this._measureTopAndHeight();
e=r.top,c=r.height}}var s=0;this.pageable&&(s=this.pagerHeight,"top"!=this.pagerPosition&&(n+=this.pagerHeight)),this.showAggregates&&(n+=this.aggregatesHeight,s+=this.aggregatesHeight),this.showstatusbar&&(n+=this.statusBarHeight,s+=this.statusBarHeight),this.hScrollBar[0].style.height!=l+"px"&&(this.hScrollBar[0].style.height=parseInt(l)+"px"),this.hScrollBar[0].style.top==e+c-m-l-s+"px"&&"0px"==this.hScrollBar[0].style.left||(this.hScrollBar[0].style.top=e+c-m-l-s-1+"px",this.hScrollBar[0].style.left="0px");var t=this.hScrollBar[0].style.width,u=!1,v=!1;0==o?t!=b-2+"px"&&(this.hScrollBar[0].style.width=b-2+"px",u=!0):t!=b-l-m+"px"&&(this.hScrollBar[0].style.width=b-l-m+"px",u=!0),this.vScrollBar[0].style.width!=l+"px"&&(this.vScrollBar[0].style.width=l+"px",v=!0),this.vScrollBar[0].style.height!=parseInt(c)-n+"px"&&(this.vScrollBar[0].style.height=parseInt(c)-n+"px",v=!0),this.vScrollBar[0].style.left==parseInt(b)-parseInt(l)-m+"px"&&this.vScrollBar[0].style.top==e+"px"||(this.vScrollBar[0].style.top=e+"px",this.vScrollBar[0].style.left=parseInt(b)-parseInt(l)-m+"px"),this.rtl&&(this.vScrollBar.css({left:"0px",top:e}),"hidden"!=this.vScrollBar.css("visibility")&&this.hScrollBar.css({left:l+2}));var w=this.vScrollInstance;w.disabled=this.disabled;var x=this.hScrollInstance;x.disabled=this.disabled,u&&x.refresh(),v&&w.refresh();var y=function(a){"hidden"!=a.vScrollBar[0].style.visibility&&"hidden"!=a.hScrollBar[0].style.visibility?(a.bottomRight[0].style.visibility="inherit",a.bottomRight[0].style.left=1+parseInt(a.vScrollBar.css("left"))+"px",a.bottomRight[0].style.top=parseInt(a.hScrollBar.css("top"))+"px",a.rtl&&a.bottomRight.css("left","0px"),a.bottomRight[0].style.width=parseInt(l)+3+"px",a.bottomRight[0].style.height=parseInt(l)+4+"px",a.showAggregates&&(a.bottomRight.css("z-index",99),a.bottomRight.height(parseInt(l)+4+a.aggregatesHeight),a.bottomRight.css({top:parseInt(a.hScrollBar.css("top"))-a.aggregatesHeight}))):a.bottomRight[0].style.visibility="hidden"};if(y(this),this.content[0].style.width!=b-o+"px"&&(this.content[0].style.width=b-o+"px"),this.content[0].style.height!=c-n+3+"px"&&(this.content[0].style.height=c-n+3+"px"),this.content[0].style.top!=e+"px"&&(this.content[0].style.top=parseInt(e)+"px"),this.rtl&&(this.content.css("left",o),this.filter&&this.filter.children().length>0&&a(this.filter.children()).css("left",o),this.table)){var z=this.table.width();b-o>z&&(this.content.css("left",b-z+2),this.filter&&this.filter.children().length>0&&a(this.filter.children()).css("left",b-z+2))}this.showAggregates&&(this.aggregates.css("top",e+c-this.aggregatesHeight-(this.pageable?this.pagerHeight:0)-(this.showstatusbar?this.statusBarHeight+1:0)),this.rtl&&this.aggregates.css("left","0px"),"hidden"!=this.hScrollBar.css("visibility")&&(this.hScrollBar.css({top:e+c-m-l-s+this.aggregatesHeight+"px"}),this.aggregates.css("top",1+e+c-l-5-this.aggregatesHeight-(this.pageable?this.pagerHeight:0)-(this.showstatusbar?this.statusBarHeight+1:0))),y(this)),this.showstatusbar&&(this.statusbar.css("top",e+c-this.statusBarHeight-(this.pageable?this.pagerHeight:0)),this.rtl&&("hidden"==this.hScrollBar.css("visibility")?this.statusbar.css("left",this.content.css("left")):this.statusbar.css("left","0px"))),this.pageable?(this.pager[0].style.width=b+"px",this.pager[0].style.height=this.pagerHeight+"px",this.pager[0].style.top=parseInt(e)+parseInt(c)-parseInt(this.pagerHeight)-1+"px"):this.pager[0].style.height="0px",this.vScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length,this.hScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length,b!=parseInt(this.dataloadelement[0].style.width)&&(this.dataloadelement[0].style.width=this.element.style.width),c!=parseInt(this.dataloadelement[0].style.height)&&(this.dataloadelement[0].style.height=this.element.style.height),this._hostwidth=b}},scrollOffset:function(a,b){if(0==arguments.length||null!=a&&"object"==typeof a&&!a.top)return{left:this.hScrollBar.MLjquiScrollBar("value"),top:this.vScrollBar.MLjquiScrollBar("value")};if(null!=a&&"object"==typeof a)var b=a.left,c=a.top,a=c;null!=a&&null!=b&&void 0!=a&&void 0!=b&&(this.vScrollBar.MLjquiScrollBar("setPosition",a),this.hScrollBar.MLjquiScrollBar("setPosition",b))},scrollleft:function(a){null!=a&&void 0!=a&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.MLjquiScrollBar("setPosition",a)},scrolltop:function(a){null!=a&&void 0!=a&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.MLjquiScrollBar("setPosition",a)},beginUpdate:function(){this._updating=!0,this._datachanged=!1},endUpdate:function(a){this._updating=!1,a!==!1&&(this._rendercolumnheaders(),this.refresh())},updating:function(){return this._updating},databind:function(b,c,d){if(this.loadingstate!==!0){"block"==this.host.css("display")&&(this.autoShowLoadElement?(a(this.dataloadelement).css("visibility","visible"),a(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height())):(a(this.dataloadelement).css("visibility","hidden"),a(this.dataloadelement).css("display","none")));var e=this;null==b&&(b={}),void 0!=b.sortcomparer&&null!=b.sortcomparer||(b.sortcomparer=null),void 0!=b.filter&&null!=b.filter||(b.filter=null),void 0!=b.sort&&null!=b.sort||(b.sort=null),void 0!=b.data&&null!=b.data||(b.data=null);var f=null;if(null!=b&&(f=void 0!=b._source?b._source.url:b.url),this.dataview=this.dataview||new a.MLjqui.dataView,this.dataview.pageable=this.pageable,this.dataview.grid=this,!e.initializedcall){if(b._source&&this.sortable&&(void 0!=b._source.sortcolumn&&(this.sortcolumn=b._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=b._source.sortcolumn,b._source.sortcolumn=null),void 0!=b._source.sortdirection)){this.dataview.sortfielddirection=b._source.sortdirection;var g=b._source.sortdirection;if("a"==g||"asc"==g||"ascending"==g||1==g)var h=!0;else var h=!1;null!=g?this.sortdirection={ascending:h,descending:!h}:this.sortdirection={ascending:!1,descending:!1}}this.pageable&&b._source&&(void 0!=b._source.pagenum&&(this.dataview.pagenum=b._source.pagenum),void 0!=b._source.pagesize?(this.pageSize=b._source.pagesize,this.dataview.pagesize=b._source.pagesize):(this.dataview.pagesize=b._source.pagesize,void 0==this.dataview.pagesize&&(this.dataview.pagesize=this.pageSize))),this.sortable&&(b.sortcolumn&&(this.dataview.sortfield=b.sortcolumn),b.sortdirection&&(this.dataview.sortfielddirection=b.sortdirection))}this._loading=!0,this.dataview.update=function(b){e._loading=!1,e.rowsByKey=new Array;var f=e.source._source.datafields;if(e.groups&&e.groups.length>0){var g=Object.prototype.toString,h=e.groups[0];if(Object.prototype.toString="function"==typeof h?h:function(){return this[h]},!e.source.records.sort){var i=new Array,j=0;a.each(data,function(){i[startindex+j++]=this}),data=i}e.source.records.sort(function(b,c){if(void 0===b&&(b=null),void 0===c&&(c=null),null===b&&null===c)return 0;if(null===b&&null!==c)return-1;if(null!==b&&null===c)return 1;var d=0,e=0;if(b&&b.uid&&(d=b.uid),c&&c.uid&&(e=c.uid),b=b.toString(),c=c.toString(),a.MLjqui.dataFormat.isNumber(b)&&a.MLjqui.dataFormat.isNumber(c))return c>b?-1:b>c?1:0;if(a.MLjqui.dataFormat.isDate(b)&&a.MLjqui.dataFormat.isDate(c))return c>b?-1:b>c?1:0;a.MLjqui.dataFormat.isNumber(b)||a.MLjqui.dataFormat.isNumber(c)||(b=String(b).toLowerCase(),c=String(c).toLowerCase());try{if(c>b)return-1;if(b>c)return 1}catch(f){}if("number"==typeof d){if(e>d)return-1;if(d>e)return 1}return 0}),Object.prototype.toString=g}for(var k=0;k<e.source.records.length;k++){var l=e.source.records[k];if(e.rowsByKey[l.uid]=l,l.records&&l.records.length>0){var m=function(a){for(var b=0;b<a.length;b++)a[b]&&(e.rowsByKey[a[b].uid]=a[b],a[b].records&&a[b].records.length>0&&m(a[b].records))};m(l.records)}if(0===k){var n=!1;if(f)for(var o=0;o<f.length;o++)if(f[o]&&!f[o].type){n=!0,f[o].type="string";var p=l[f[o].name];if(void 0==p)continue;if(p!==!0&&p!==!1||(f[o].type="boolean"),null!=p&&p.toString().indexOf(e.gridlocalization.currencysymbol)>-1||p.toString().indexOf(e.gridlocalization.percentsymbol)>-1){var q=p.toString().split(" ").length,r=new Number(e._toNumber(p.toString()));isNaN(r)||1!=q||(f[o].type="number")}(a.MLjqui.dataFormat.isNumber(p)||!isNaN(parseFloat(p))&&isFinite(p))&&(f[o].type="number"),a.MLjqui.dataFormat.isDate(p)&&(f[o].type="date")}if(n)for(var o=0;o<f.length;o++){var s=e.source.getvaluebytype(l[f[o].name],f[o]);if(null!=s&&"number"==f[o].type){var t=s;t=new Number(e._toNumber(t.toString())),isNaN(t)||(s=t)}l[f[o].name]=s}}}if("pager"===c||"filter"===c||"sort"===c?e.refresh():e._render(),e.autoShowLoadElement&&!e._loading&&(a(e.dataloadelement).css("visibility","hidden"),a(e.dataloadelement).css("display","none")),e.pageable&&(e.disabled||e.pagernexttop&&(e.pagerfirsttop.MLjquiButton({disabled:!1}),e.pagerfirstbottom.MLjquiButton({disabled:!1}),e.pagerlasttop.MLjquiButton({disabled:!1}),e.pagerlastbottom.MLjquiButton({disabled:!1}),e.pagernexttop.MLjquiButton({disabled:!1}),e.pagerprevioustop.MLjquiButton({disabled:!1}),e.pagershowrowscombotop.MLjquiDropDownList&&"advanced"==e.pagerMode&&(e.pagershowrowscombotop.MLjquiDropDownList({disabled:!1}),e.pagershowrowscombobottom.MLjquiDropDownList({disabled:!1})),e.pagernextbottom.MLjquiButton({disabled:!1}),e.pagerpreviousbottom.MLjquiButton({disabled:!1}))),e._updateTouchScrolling(),e._raiseEvent("bindingComplete"),d&&d(),!e.initializedcall&&(e.initializedcall=!0,e.isInitialized=!0,e.ready&&e.ready(),(null!=e.width&&-1!=e.width.toString().indexOf("%")||null!=e.height&&-1!=e.height.toString().indexOf("%"))&&e._updatesize(!0),"hidden"==e.host.css("visibility"))){a.MLjqui.browser.msie&&a.MLjqui.browser.version<8;"visible"==e.vScrollBar.css("visibility")&&e.vScrollBar.css("visibility","inherit"),"visible"==e.hScrollBar.css("visibility")&&e.hScrollBar.css("visibility","inherit"),e._intervalTimer=setInterval(function(){"visible"==e.host.css("visibility")&&(e._updatesize(!0),clearInterval(e._intervalTimer))},100)}},this.dataview.databind(b)}},_raiseEvent:function(b,c){void 0==c&&(c={owner:null});var d=b;args=c,args.owner=this;var e=new a.Event(d);e.owner=this,e.args=args;var f=this.host.trigger(e);return c=e.args,f},ensureColumnVisible:function(a){for(var b=0,c=0,d=0;d<this.columns.records.length;d++){if(this.columns.records[d].datafield==a){b+=this.columns.records[d].width,c=this.columns.records[d].width;break}b+=this.columns.records[d].width}if("hidden"!=this.hScrollBar.css("visibility")){var e=this.hScrollBar.MLjquiScrollBar("value"),f=e+this.host.width();e>b-c?this.hScrollBar.MLjquiScrollBar("setPosition",b-c):b>f&&this.hScrollBar.MLjquiScrollBar("setPosition",e+b-f)}},ensurerowvisiblebykey:function(b){if("hidden"===this.vScrollBar[0].style.visibility)return!1;var c=this._getuirow(b);if(c){var d=this.vScrollBar.MLjquiScrollBar("value"),e=this.host.height(),f=0;f+=this.columnGroups?this.showHeader?this.columnsheader.height():0:this.showHeader?this.columnsHeight:0,this.filterable&&(f+=this.filter.height()),this.pageable&&"top"===this.pagerPosition&&(f+=this.pagerHeight),this.showtoolbar&&(f+=this.toolbarHeight),e-=f,this.pageable&&"top"!==this.pagerPosition&&(e-=this.pagerHeight),this.showstatusbar&&(e-=this.statusBarHeightt),this.showAggregates&&(e-=this.aggregatesHeight),"hidden"!=this.hScrollBar.css("visibility")&&(e-=20);var g=this.host.coord().top+f,h=d,i=e+h,j=c.coord().top+d-g;j=Math.round(j);var k=j+c.outerHeight();if(k=Math.round(k),0===Math.round(c.position().top))return this.vScrollBar.MLjquiScrollBar("setPosition",0);var l=a(this._table.children()[1]).children().length-1,m=this._getuikey(l),n=this._getuirow(m);if(n&&n[0]===c[0])return this.vScrollBar.MLjquiScrollBar("setPosition",this.vScrollBar.MLjquiScrollBar("max"));if(h>j){var o=j-c.height();return 0>o&&(o=0),this.vScrollBar.MLjquiScrollBar("setPosition",o)}return k>i?this.vScrollBar.MLjquiScrollBar("setPosition",4+k-e-d):void 0}},ensureRowVisible:function(a){var b=this._getkey(a);this.ensurerowvisiblebykey(b)},getColumn:function(b){var c=null;return this.columns.records&&a.each(this.columns.records,function(){return this.datafield==b||this.displayfield==b?(c=this,!1):void 0}),c},_setcolumnproperty:function(a,b,c){if(null==a||null==b||null==c)return null;var d=b;b=b.toLowerCase();var e=this.getColumn(a);if(null!=e){e[b];e[b]=c,e[d]=c;var f=this.getColumn(a);switch(null!=f&&(f[b]=c),b){case"filteritems":case"text":case"editable":case"resizable":case"draggable":case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"class":case"width":case"minwidth":case"maxwidth":"align"==b?(this._rendercolumnheaders(),this.refresh()):"text"==b||"class"==b||"hidden"==b||"pinned"==b||"resizable"==b||"renderer"==b?(this._rendercolumnheaders(),this.refresh()):"width"==b||"maxwidth"==b||"minwidth"==b?(e._width=null,e._percentagewidth=null,this._updatecolumnwidths(),this.refresh()):this.refresh()}}},getColumnProperty:function(a,b){if(null==a||null==b)return null;b=b.toLowerCase();var c=this.getColumn(a);return c[b]},setColumnProperty:function(a,b,c){this._setcolumnproperty(a,b,c)},hideColumn:function(a){this._setcolumnproperty(a,"hidden",!0)},showColumn:function(a){this._setcolumnproperty(a,"hidden",!1)},updateBoundData:function(a,b){this.databind(this.source,a,b)},refresh:function(b){if(1!=b){if(a.MLjqui.isHidden(this.host))return;this.vScrollInstance.setPosition(0),this._renderrows(),this.updatepagerdetails(),this._arrange(),this._arrangeFilterRow&&this._arrangeFilterRow(),this._renderhorizontalscroll(),this._showicons(),this.showAggregates&&this._updateaggregates(),this._updateTouchScrolling()}},_updateTouchScrolling:function(){var b=this.that;if(b.isTouchDevice()){var c=a.MLjqui.mobile.getTouchEventName("touchstart"),d=a.MLjqui.mobile.getTouchEventName("touchend"),e=a.MLjqui.mobile.getTouchEventName("touchmove");b.table&&(b.removeHandler(b.table,c+".touchScroll"),b.removeHandler(b.table,e+".touchScroll"),b.removeHandler(b.table,d+".touchScroll"),b.removeHandler(b.table,"touchcancel.touchScroll"),a.MLjqui.mobile.touchScroll(b.table[0],Math.max(b.vScrollInstance.max,b.hScrollInstance.max),function(a,c){if(null!=c&&"hidden"!=b.vScrollBar.css("visibility")){b.vScrollInstance.value;b.vScrollInstance.setPosition(c)}if(null!=a&&"hidden"!=b.hScrollBar.css("visibility")){b.hScrollInstance.value;b.hScrollInstance.setPosition(a)}b.scrolled=new Date,b.vScrollInstance.thumbCapture=!0},this.element.id,this.hScrollBar,this.vScrollBar))}},_showicons:function(){if(this.table)for(var b=0;b<this.columns.records.length;b++){var c=this.columns.records[b];if(a(c.filtericon).hide(),a(c.sortasc).hide(),a(c.sortdesc).hide(),"simple"!==this.filterMode)for(var d=0;d<this.dataview.filters.length;d++){var e=this.dataview.filters[d];if(e.datafield===c.displayfield){a(c.filtericon).show();break}}if(null!==this.sortcolumn&&this.sortcolumn===c.displayfield&&null!=this.sortdirection&&(this.sortdirection.ascending?a(c.sortasc).show():a(c.sortdesc).show()),"left"!=c.align&&"center"!=c.align&&!this.rtl||this.rtl&&"right"!=c.align&&"center"!=c.align){var f=a.MLjqui.isHidden(a(c.filtericon))?0:16;f+=a.MLjqui.isHidden(a(c.sortasc))?0:16,f+=a.MLjqui.isHidden(a(c.sortdesc))?0:16;var g=a(a(a(c.element).children()[0]).children()[0]);this.rtl?f>0?g.css("margin-left",4+f+"px"):g.css("margin-left","4px"):f>0?g.css("margin-right",4+f+"px"):g.css("margin-right","4px")}}},render:function(b){var c="<div style='overflow: hidden; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='wrapper"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='toolbar' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='toppager' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='filter' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='content"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; margin-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='verticalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='horizontalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'></div><div id='aggregates' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='statusbar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='pager' style='z-index: 20; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div></div></div>";this.element.innerText="",this.element.innerHTML=c,this.wrapper=this.host.find("#wrapper"+this.element.id),this.content=this.host.find("#content"+this.element.id),this.content.addClass(this.toTP("MLjqui-reset"));var d=this.host.find("#verticalScrollBar"+this.element.id),e=this.host.find("#horizontalScrollBar"+this.element.id);this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("MLjqui-grid-bottomright")).addClass(this.toTP("MLjqui-scrollbar-state-normal")),this.vScrollBar&&this.vScrollBar.MLjquiScrollBar("destroy"),this.hScrollBar&&this.hScrollBar.MLjquiScrollBar("destroy"),this.vScrollBar=d.MLjquiScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchmode,theme:this.theme,_triggervaluechanged:!1}),this.hScrollBar=e.MLjquiScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchmode,theme:this.theme,_triggervaluechanged:!1}),this.vScrollBar.css("visibility","hidden"),this.hScrollBar.css("visibility","hidden"),this.vScrollInstance=a.data(this.vScrollBar[0],"MLjquiScrollBar").instance,this.hScrollInstance=a.data(this.hScrollBar[0],"MLjquiScrollBar").instance,this.filter=this.host.find("#filter"),this.filter[0].id="filter"+this.element.id,this.filter.addClass(this.toTP("MLjqui-widget-header")),this.filter.addClass(this.toTP("MLjqui-grid-toolbar")),this.pager=this.host.find("#pager"),this.pager[0].id="pager"+this.element.id,this.toolbar=this.host.find("#toolbar"),this.toolbar[0].id="toolbar"+this.element.id,this.toolbar.addClass(this.toTP("MLjqui-grid-toolbar")),this.toolbar.addClass(this.toTP("MLjqui-widget-header")),this.aggregates=this.host.find("#aggregates"),this.aggregates[0].id="aggregates"+this.element.id,this.aggregates.addClass(this.toTP("MLjqui-grid-statusbar")),this.aggregates.addClass(this.toTP("MLjqui-widget-header")),this.statusbar=this.host.find("#statusbar"),this.statusbar[0].id="statusbar"+this.element.id,this.statusbar.addClass(this.toTP("MLjqui-grid-statusbar")),this.statusbar.addClass(this.toTP("MLjqui-widget-header")),this.pager.addClass(this.toTP("MLjqui-grid-pager")),this.pager.addClass(this.toTP("MLjqui-widget-header")),this.toppager=this.host.find("#toppager"),this.toppager.addClass(this.toTP("MLjqui-grid-pager-top")),this.toppager.addClass(this.toTP("MLjqui-widget-header")),this.gridtable=null,this.localizestrings&&(this.localizestrings(),null!=this.localization&&this.localizestrings(this.localization,!1)),this._builddataloadelement(),this._cachedcolumns=this.columns;var f=this.source.datafields;if(null==f&&this.source._source&&(f=this.source._source.datafields),f)for(var g=0;g<this.columns.length;g++){var h=this.columns[g];if(h&&h.cellsFormat&&h.cellsFormat.length>2)for(var i=0;i<f.length;i++)if(f[i].name==h.datafield&&!f[i].format){f[i].format=h.cellsFormat;break}}this.databind(this.source),this.showtoolbar&&this.toolbar.css("visibility","inherit"),this.showstatusbar&&this.statusbar.css("visibility","inherit"),this.showAggregates&&this.aggregates.css("visibility","inherit"),this.tableheight=null;var j=this,k=function(){j.content&&(j.content[0].scrollTop=0,j.content[0].scrollLeft=0),j.gridcontent&&(j.gridcontent[0].scrollLeft=0,j.gridcontent[0].scrollTop=0)};this.removeHandler(this.content,"scroll"),this.removeHandler(this.content,"mousedown"),this.addHandler(this.content,"scroll",function(a){return k(),!1}),b!==!0&&this._render()},_render:function(){if(null!=this.dataview&&!this._loading){(25!=this.columnsHeight||this.columnGroups)&&this._measureElement("column"),this.filterable?this.filter[0].style.visibility="inherit":this.filter[0].style.visibility="hidden",this.rowinfo=new Array,this._removeHandlers(),null==this.columns?this.columns=new a.MLjqui.dataCollection(this.element):this._initializeColumns(),this.host.height(this.height),this.host.width(this.width),a.MLjqui.utilities.html(this.content,""),this.columnsheader=this.columnsheader||a('<div style="overflow: hidden;"></div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("MLjqui-widget-header")),this.columnsheader.addClass(this.toTP("MLjqui-grid-header")),this.showHeader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none"),this.gridcontent=this.gridcontent||a('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),this.gridcontent.remove();var b=this.columnsHeight;b=this._preparecolumnGroups(),this.columnsheader.height(b),this.content.append(this.columnsheader),this.content.append(this.gridcontent),this._rendercolumnheaders(),this.tableheight=null,this.gridcontent.find("#contenttable"+this.element.id).remove(),null!=this.table&&(this.table.remove(),this.table=null),this.table=a('<div id="contenttable'+this.element.id+'" style="overflow: hidden; position: relative;"></div>'),this.gridcontent.addClass(this.toTP("MLjqui-grid-content")),this.gridcontent.addClass(this.toTP("MLjqui-widget-content")),this.gridcontent.append(this.table),this._renderrows(),this.filterable&&this._renderfilter(),this.pageable&&this._initpager(),this._arrange(),this.renderStatusBar&&this.renderStatusBar(this.statusbar),this.rendertoolbar&&this.rendertoolbar(this.toolbar),this.showAggregates&&this._updateaggregates(),this.disabled&&this.host.addClass(this.toThemeProperty("MLjqui-fill-state-disabled")),this._renderhorizontalscroll(),this._showicons(),this._addHandlers()}},clear:function(){this.source&&(this.source.records=new Array,this.source.hierarchy=new Array),this.dataview._filteredData=new Array,this.databind(null),this._render()},_initpager:function(){var b=this.gridlocalization.pagergotopagestring,c=(this.gridlocalization.pagerrangestring,this.gridlocalization.pagershowrowsstring),d=(this.pagerHeight-17)/2;if(this.pagerdiv=this.pagerdiv||a('<div style="width: 100%; height: 100%; position: relative;"></div>'),this.toppagerdiv=this.toppagerdiv||a('<div style="width: 100%; height: 100%; position: relative;"></div>'),!this.pageable)return this.pagerdiv.remove(),void this.toppagerdiv.remove();if(this.pagerRenderer){this.pagerdiv.children().remove(),this.toppager.children().remove();var e=this.pagerRenderer();null!=e&&this.pagerdiv.append(a(e)),this.pager.append(this.pagerdiv);var e=this.pagerRenderer();null!=e&&this.toppagerdiv.append(a(e)),this.toppager.append(this.toppagerdiv)}else{this.pagerdiv.css("top",d),this.toppagerdiv.css("top",d);var f=function(d,e){var f=this,g=a('<div style="margin-right: 7px; width: 27px; height: 17px; float: right;"><input style="margin-top: 0px; text-align: right; width: 27px;" type="text"/></div>'),h=a('<div style="float: right; margin-right: 7px;"></div>'),i=a('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),j=a('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),k=a('<div type="button" style="margin-left: 3px; padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),l=a('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),m=a('<div style="margin-right: 7px; float: right;"></div>'),n=a('<div style="margin-right: 7px; float: right;"></div>'),o=a('<div style="padding-bottom: 3px; margin-right: 3px; float: right;"></div>');g.attr("disabled",f.disabled);var p=a('<div id="gridpagerlist" style="margin-top: 0px; margin-right: 7px; float: right;"></div>');if(p[0].id="gridpagerlist"+e+f.element.id,f.removeHandler(i,"mousedown"),f.removeHandler(i,"mouseup"),f.removeHandler(i,"click"),f.removeHandler(j,"mousedown"),f.removeHandler(j,"mouseup"),f.removeHandler(j,"click"),f.removeHandler(k,"mousedown"),f.removeHandler(k,"mouseup"),f.removeHandler(k,"click"),f.removeHandler(l,"mousedown"),f.removeHandler(l,"mouseup"),f.removeHandler(l,"click"),f.rtl?(i.attr("title",f.gridlocalization.pagerpreviousbuttonstring),j.attr("title",f.gridlocalization.pagernextbuttonstring)):(j.attr("title",f.gridlocalization.pagerpreviousbuttonstring),i.attr("title",f.gridlocalization.pagernextbuttonstring)),a.MLjqui.browser.msie&&a.MLjqui.browser.version<8&&o.css("padding-top","3px"),this["pagerfirst"+e]=k,this["pagerlast"+e]=l,this["pagernext"+e]=i,this["pagerprevious"+e]=j,this["pagergotoinput"+e]=g,this["pagerdetails"+e]=m,this["pagershowrows"+e]=n,this["pagergotolabel"+e]=h,this["pagershowrowscombo"+e]=p,this["pagerbuttons"+e]=o,"default"==f.pagerMode){f.rtl?(l.attr("title",f.gridlocalization.pagerfirstbuttonstring),k.attr("title",f.gridlocalization.pagerlastbuttonstring)):(k.attr("title",f.gridlocalization.pagerfirstbuttonstring),l.attr("title",f.gridlocalization.pagerlastbuttonstring));var q=a("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");q.addClass(f.toThemeProperty("MLjqui-icon-arrow-first")),k.wrapInner(q);var r=a("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");r.addClass(f.toThemeProperty("MLjqui-icon-arrow-last")),l.wrapInner(r),f.rtl?(d.append(l),d.append(i),d.append(o),d.append(j),d.append(k)):(d.append(k),d.append(j),d.append(o),d.append(i),d.append(l)),l.MLjquiButton({cursor:"pointer",disabled:f.disabled,theme:f.theme}),k.MLjquiButton({cursor:"pointer",disabled:f.disabled,theme:f.theme});var s=f.rtl?"right":"left";o.css("float",s),l.css("float",s),k.css("float",s),i.css("float",s),j.css("float",s),m.css("float",f.rtl?"left":"right"),f.rtl?(m.css("margin-left","7px"),m.css("margin-right","0px")):(m.css("margin-left","0px"),m.css("margin-right","7px"))}else f.rtl||(d.append(i),d.append(j));i.MLjquiButton({cursor:"pointer",disabled:f.disabled,theme:f.theme}),j.MLjquiButton({cursor:"pointer",disabled:f.disabled,theme:f.theme});var t=a("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");t.addClass(f.toThemeProperty("MLjqui-icon-arrow-left")),j.wrapInner(t);var u=a("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");if(u.addClass(f.toThemeProperty("MLjqui-icon-arrow-right")),i.wrapInner(u),f.rtl||d.append(m),"default"!=f.pagerMode){f.rtl?(d.append(h),d.append(g),d.append(n),d.append(p),d.append(m),d.append(i),d.append(j)):(d.append(p),d.append(n),d.append(g),d.append(h));var v=f.pageSizeOptions;p.MLjquiDropDownList({_checkForHiddenParent:!1,rtl:f.rtl,disabled:f.disabled,source:v,enableBrowserBoundsDetection:!0,keyboardSelection:!1,autoDropDownHeight:!0,width:44,height:16,theme:f.theme});for(var w=0,x=0;x<v.length;x++)this.pageSize>=v[x]&&(w=x);h[0].innerHTML=b,p.MLjquiDropDownList({selectedIndex:w});var y=g.find("input");y.addClass(f.toThemeProperty("MLjqui-input")),y.addClass(f.toThemeProperty("MLjqui-widget-content")),this.rtl&&y.css("direction","rtl");var f=this;this.removeHandler(p,"select"),this.addHandler(p,"select",function(a){if(a.args){f.vScrollInstance&&f.vScrollInstance.setPosition(0);var b=a.args.index;f.pagershowrowscombotop.data().MLjquiDropDownList.instance.selectIndex(b),f.pagershowrowscombobottom.data().MLjquiDropDownList.instance.selectIndex(b),f.pagershowrowscombobottom.data().MLjquiDropDownList.instance.renderSelection("mouse"),f.pagershowrowscombotop.data().MLjquiDropDownList.instance.renderSelection("mouse");var c=f.dataview.pagenum*f.dataview.pagesize,d=v[b],e=f.pageSize;f.pageSize=parseInt(d),isNaN(f.pageSize)&&(f.pageSize=10),d>=100?(f.pagershowrowscombotop.MLjquiDropDownList({width:55}),f.pagershowrowscombobottom.MLjquiDropDownList({width:55})):(f.pagershowrowscombotop.MLjquiDropDownList({width:44}),f.pagershowrowscombobottom.MLjquiDropDownList({width:44})),f.dataview.pagesize=f.pageSize;var g=Math.floor(c/f.dataview.pagesize);if(g!==f.dataview.pagenum||parseInt(d)!==parseInt(e)){f._raiseEvent("pageSizeChanged",{pagenum:g,oldpageSize:e,pageSize:f.dataview.pagesize});var h=f.goToPage(g);h||(f.serverProcessing?f.updateBoundData("pager"):f.refresh())}}});var g=g.find("input");g.addClass(f.toThemeProperty("MLjqui-grid-pager-input")),g.addClass(f.toThemeProperty("MLjqui-rc-all")),this.removeHandler(g,"keydown"),this.removeHandler(g,"change"),f.addHandler(g,"keydown",function(a){if(a.keyCode>=65&&a.keyCode<=90)return!1;if("13"==a.keyCode){var b=g.val();return b=parseInt(b),isNaN(b)||f.goToPage(b-1),!1}}),f.addHandler(g,"change",function(){var a=g.val();a=parseInt(a),isNaN(a)||f.goToPage(a-1)})}n[0].innerHTML=c,f.addHandler(i,"mouseenter",function(){u.addClass(f.toThemeProperty("MLjqui-icon-arrow-right-hover"))}),f.addHandler(j,"mouseenter",function(){t.addClass(f.toThemeProperty("MLjqui-icon-arrow-left-hover"))}),f.addHandler(i,"mouseleave",function(){u.removeClass(f.toThemeProperty("MLjqui-icon-arrow-right-hover"))}),f.addHandler(j,"mouseleave",function(){t.removeClass(f.toThemeProperty("MLjqui-icon-arrow-left-hover"))}),f.addHandler(i,"mousedown",function(){u.addClass(f.toThemeProperty("MLjqui-icon-arrow-right-selected"))}),f.addHandler(i,"mouseup",function(){u.removeClass(f.toThemeProperty("MLjqui-icon-arrow-right-selected"))}),f.addHandler(j,"mousedown",function(){t.addClass(f.toThemeProperty("MLjqui-icon-arrow-left-selected"))}),f.addHandler(j,"mouseup",function(){t.removeClass(f.toThemeProperty("MLjqui-icon-arrow-left-selected"))}),"default"===f.pagerMode&&(f.addHandler(l,"mouseenter",function(){r.addClass(f.toThemeProperty("MLjqui-icon-arrow-last-hover"))}),f.addHandler(k,"mouseenter",function(){q.addClass(f.toThemeProperty("MLjqui-icon-arrow-first-hover"))}),f.addHandler(l,"mouseleave",function(){r.removeClass(f.toThemeProperty("MLjqui-icon-arrow-last-hover"))}),f.addHandler(k,"mouseleave",function(){q.removeClass(f.toThemeProperty("MLjqui-icon-arrow-first-hover"))}),f.addHandler(l,"mousedown",function(){r.addClass(f.toThemeProperty("MLjqui-icon-arrow-last-selected"))}),f.addHandler(k,"mousedown",function(){q.addClass(f.toThemeProperty("MLjqui-icon-arrow-first-selected"))}),f.addHandler(l,"mouseup",function(){r.removeClass(f.toThemeProperty("MLjqui-icon-arrow-last-selected"))}),f.addHandler(k,"mouseup",function(){q.removeClass(f.toThemeProperty("MLjqui-icon-arrow-first-selected"))})),f.addHandler(a(document),"mouseup.pagerbuttons"+e+this.element.id,function(){u.removeClass(f.toThemeProperty("MLjqui-icon-arrow-right-selected")),t.removeClass(f.toThemeProperty("MLjqui-icon-arrow-left-selected")),r&&(r.removeClass(f.toThemeProperty("MLjqui-icon-arrow-last-selected")),q.removeClass(f.toThemeProperty("MLjqui-icon-arrow-first-selected")))}),f.addHandler(i,"click",function(){i.MLjquiButton("disabled")||(f.rtl?f.goToPrevPage():f.goToNextPage())}),f.addHandler(j,"click",function(){j.MLjquiButton("disabled")||(f.rtl?f.goToNextPage():f.goToPrevPage())}),"default"===this.pagerMode&&(f.addHandler(k,"click",function(){
if(!k.MLjquiButton("disabled"))if(f.rtl){var a=f.dataview.totalrecords,b=Math.ceil(a/f.pageSize);f.goToPage(b-1)}else f.goToPage(0)}),f.addHandler(l,"click",function(){if(!l.MLjquiButton("disabled"))if(f.rtl)f.goToPage(0);else{var a=f.dataview.totalrecords,b=Math.ceil(a/f.pageSize);f.goToPage(b-1)}}))};this.pagerdiv.children().remove(),this.toppagerdiv.children().remove(),f.call(this,this.pagerdiv,"bottom"),f.call(this,this.toppagerdiv,"top"),this.pager.append(this.pagerdiv),this.toppager.append(this.toppagerdiv),this.updatepagerdetails()}},_updatepagertheme:function(){},goToPage:function(b,c){if(this._loading)return!1;if(void 0!=this.editKey){if(!this.editSettings.saveOnPageChange)return!1;var d=this.endroweditbykey(this.editKey);if(!d)return!1}if(null!=b&&void 0!=b||(b=0),-1==b&&(b=0),0>b)return!1;var e=this.dataview.totalrecords,f=this.dataview.pagenum,g=Math.ceil(e/this.pageSize);return b>=g&&(0==this.dataview.totalrecords&&(this.dataview.pagenum=0,this.updatepagerdetails()),b>0&&(b=g-1)),this.dataview.pagenum!=b?(this.pageable&&(this.dataview.pagenum=b,this._raiseEvent("pageChanged",{pagenum:b,oldpagenum:f,pageSize:this.dataview.pagesize})),this.serverProcessing?this.updateBoundData("pager",c):(this.refresh(),c&&a.isFunction(c)&&c()),!0):!1},goToPrevPage:function(a){if(this.dataview.pagenum>0)return this.goToPage(this.dataview.pagenum-1,a);if("default"!=this.pagerMode&&"advanced"!=this.pagerMode){var b=this.dataview.totalrecords,c=Math.ceil(b/this.pageSize);return this.goToPage(c-1,a)}return!1},goToNextPage:function(a){var b=this.dataview.totalrecords;this.summaryrows&&(b+=this.summaryrows.length);var c=Math.ceil(b/this.pageSize);return this.dataview.pagenum<c-1?this.goToPage(this.dataview.pagenum+1,a):"default"!=this.pagerMode&&"advanced"!=this.pagerMode?this.goToPage(0,a):!1},updatepagerdetails:function(){if(this.pageable){var b=this;if(!this.serverProcessing)if(this.source.hierarchy){var c=b._names(),d=0,e=function(f,g){for(var h=0;h<g.length;h++)0==b.dataview.filters.length&&(g[h]._visible=!0),g[h]._visible!==!1&&d++,b.treeGrid&&"root"==b.treeGrid.pageSizeMode||g[h].records&&(g[h][c.expanded]||g[h][c.leaf])&&g[h]._visible!==!1&&(e(f+1,g[h].records),this.treeGrid&&a(this.treeGrid).MLjquiTreeGrid("showSubAggregates")&&0!=f&&d--)};e(0,this.dataview.rows),this.dataview.totalrecords=d}else this.dataview.totalrecords=this.dataview.rows.length;var f=this.dataview.pagenum*this.pageSize,g=(this.dataview.pagenum+1)*this.pageSize;g>=this.dataview.totalrecords&&(g=this.dataview.totalrecords);var h=this.dataview.totalrecords;f++;var i=Math.ceil(h/this.dataview.pagesize);if(i>=1&&i--,i++,"root"==this.pageSizeMode&&(i=Math.ceil(this.rootRecordsLength/this.dataview.pagesize),i>=1&&i--,i++,h=this.rootRecordsLength,this.dataview.totalrecords=this.rootRecordsLength),"default"!=this.pagerMode){if(this.pagergotoinputbottom){var j=this.pagergotoinputbottom.find("input");j.val(this.dataview.pagenum+1),j.attr("title","1 - "+i),j=this.pagergotoinputtop.find("input"),j.val(this.dataview.pagenum+1),j.attr("title","1 - "+i)}}else{var k="",l=this.pagerButtonsCount;0!=l&&l||(l=5);var m=0;for(this.rtl&&(m=l-1);this.rtl&&m>=0||!this.rtl&&l>m;){var n=1+m,o=this.dataview.pagenum/l,p=Math.floor(o);n+=p*l;var q=this.toTP("MLjqui-grid-pager-number");if(q+=" "+this.toTP("MLjqui-rc-all"),n>i&&!this.rtl)break;if(this.rtl&&n>i)m--;else{if(this.rtl||0==m&&n>l&&(k+="<a class='"+q+"' tabindex=-1 href='javascript:;' data-page='"+(-1+n)+"'>...</a>"),this.dataview.pagenum===n-1&&(q+=" "+this.toTP("MLjqui-tb-fill-state-pressed")),this.rtl){if(m===l-1){var q=this.toTP("MLjqui-grid-pager-number");q+=" "+this.toTP("MLjqui-rc-all"),i>=1+n&&(k+="<a class='"+q+"' tabindex=-1 href='javascript:;' data-page='"+(1+n)+"'>...</a>")}this.dataview.pagenum===n-1&&(q+=" "+this.toTP("MLjqui-tb-fill-state-pressed")),k+="<a class='"+q+"' tabindex=-1 href='javascript:;' data-page='"+n+"'>"+n+"</a>"}else if(k+="<a class='"+q+"' tabindex=-1 href='javascript:;' data-page='"+n+"'>"+n+"</a>",m===l-1){var q=this.toTP("MLjqui-grid-pager-number");q+=" "+this.toTP("MLjqui-rc-all"),i>=1+n&&(k+="<a class='"+q+"' tabindex=-1 href='javascript:;' data-page='"+(1+n)+"'>...</a>")}if(this.rtl){var q=this.toTP("MLjqui-grid-pager-number");q+=" "+this.toTP("MLjqui-rc-all"),0==m&&n>l&&(k+="<a class='"+q+"' tabindex=-1 href='javascript:;' data-page='"+(-1+n)+"'>...</a>")}this.rtl?m--:m++}}if(!this.pagerbuttonsbottom)return;var r=this.pagerbuttonsbottom.find("a");this.removeHandler(r,"click"),this.removeHandler(r,"mouseenter"),this.removeHandler(r,"mouseleave");var r=this.pagerbuttonstop.find("a");this.removeHandler(r,"click"),this.removeHandler(r,"mouseenter"),this.removeHandler(r,"mouseleave"),this.pagerbuttonsbottom[0].innerHTML=k,this.pagerbuttonstop[0].innerHTML=k,this.disabled&&this.host.find(".MLjqui-grid-pager-number").css("cursor","default");var s=function(){r.click(function(c){if(!b.disabled){var d=a(c.target).attr("data-page");b.goToPage(parseInt(d)-1)}}),r.mouseenter(function(c){b.disabled||a(c.target).addClass(b.toTP("MLjqui-tb-fill-state-hover"))}),r.mouseleave(function(c){b.disabled||a(c.target).removeClass(b.toTP("MLjqui-tb-fill-state-hover"))})};if("both"===this.pagerPosition||"bottom"===this.pagerPosition){var r=this.pagerbuttonsbottom.find("a");s(r)}if("both"===this.pagerPosition||"top"===this.pagerPosition){var r=this.pagerbuttonstop.find("a");s(r)}}if(0==g&&f>g&&(f=0),this.pagerdetailsbottom&&(this.rtl?(this.pagerdetailsbottom[0].innerHTML=h+this.gridlocalization.pagerrangestring+g+"-"+f,this.pagerdetailstop[0].innerHTML=h+this.gridlocalization.pagerrangestring+g+"-"+f):(this.pagerdetailsbottom[0].innerHTML=f+"-"+g+this.gridlocalization.pagerrangestring+h,this.pagerdetailstop[0].innerHTML=f+"-"+g+this.gridlocalization.pagerrangestring+h)),"default"==this.pagerMode){var t=this.pagerbuttonsbottom.width()+a(this.pagerdetailsbottom).width()+160;this.pagerdiv.css("min-width",t),this.toppagerdiv.css("min-width",t)}f>g&&this.goToPrevPage()}},_preparecolumnGroups:function(){var a=this.columnsHeight;if(this.columnGroups){if(this.columnshierarchy=new Array,this.columnGroups.length){for(var b=this,c=0;c<this.columnGroups.length;c++)this.columnGroups[c].parent=null,this.columnGroups[c].groups=null;for(var c=0;c<this.columns.records.length;c++)this.columns.records[c].parent=null,this.columns.records[c].groups=null;for(var d=function(a){for(var c=0;c<b.columnGroups.length;c++){var d=b.columnGroups[c];if(d.name===a)return d}return null},c=0;c<this.columnGroups.length;c++){var e=this.columnGroups[c];if(e.groups||(e.groups=null),e.parentGroup&&(e.parentgroup=e.parentGroup),e.parentgroup){var f=d(e.parentgroup);f&&(e.parent=f,f.groups||(f.groups=new Array),-1===f.groups.indexOf(e)&&f.groups.push(e))}}for(var c=0;c<this.columns.records.length;c++){var e=this.columns.records[c];if(e.columngroup){var f=d(e.columngroup);f&&(f.groups||(f.groups=new Array),e.parent=f,-1===f.groups.indexOf(e)&&f.groups.push(e))}}for(var g=0,c=0;c<this.columns.records.length;c++){var e=this.columns.records[c],h=e;for(e.level=0;h.parent;)h=h.parent,e.level++;var h=e,i=e.level;for(g=Math.max(g,e.level);h.parent;)h=h.parent,h&&(h.level=--i)}for(var j=function(a){var b=new Array;if(a.columngroup&&b.push(a),!a.groups)return new Array;for(var c=0;c<a.groups.length;c++)if(a.groups[c].columngroup)b.push(a.groups[c]);else if(a.groups[c].groups)for(var d=j(a.groups[c]),e=0;e<d.length;e++)b.push(d[e]);return b},c=0;c<this.columnGroups.length;c++){var e=this.columnGroups[c],k=j(e);e.columns=k;for(var l=new Array,m=0,n=0;n<k.length;n++)l.push(this.columns.records.indexOf(k[n])),k[n].pinned&&m++;if(0!=m)throw new Error("MLjquiDataTable: Column Groups initialization Error. Please, check the initialization of the MLjquiDataTable's columns array. The columns in a column group cannot be pinned.");l.sort(function(a,b){return a=parseInt(a),b=parseInt(b),b>a?-1:a>b?1:0});for(var o=1;o<l.length;o++)if(l[o]!=l[o-1]+1)throw new Error("MLjquiDataTable: Column Groups initialization Error. Please, check the initialization of the MLjquiDataTable's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columnGroupslevel=1+g,a=this.columnGroupslevel*this.columnsHeight}return a},wheel:function(a,b){if(b.autoheight&&"hidden"==b.hScrollBar.css("visibility"))return a.returnValue=!0,!0;var c=0;if(a||(a=window.event),a.originalEvent&&a.originalEvent.wheelDelta&&(a.wheelDelta=a.originalEvent.wheelDelta),a.wheelDelta?c=a.wheelDelta/120:a.detail&&(c=-a.detail/3),c){var d=b._handleDelta(c);return d&&(a.preventDefault&&a.preventDefault(),null!=a.originalEvent&&(a.originalEvent.mouseHandled=!0),void 0!=a.stopPropagation&&a.stopPropagation()),d?(d=!1,a.returnValue=d,d):!1}a.preventDefault&&a.preventDefault(),a.returnValue=!1},_handleDelta:function(a){if("hidden"!=this.vScrollBar.css("visibility")){var b=this.vScrollInstance.value;0>a?this.vScrollInstance.setPosition(this.vScrollInstance.value+20):this.vScrollInstance.setPosition(this.vScrollInstance.value-20);var c=this.vScrollInstance.value;if(b!=c)return!0}else if("hidden"!=this.hScrollBar.css("visibility")){var b=this.hScrollInstance.value;a>0?this.hScrollInstance.value>20?this.hScrollInstance.setPosition(this.hScrollInstance.value-20):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+20):this.hScrollInstance.setPosition(this.hScrollInstance.max);var c=this.hScrollInstance.value;if(b!=c)return!0}return!1},_removeHandlers:function(){this.removeHandler(this.host,"focus"),this.removeHandler(a(window),"MLjquiReady."+this.element.id),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);var b="mousedown";this.isTouchDevice()&&(b=a.MLjqui.mobile.getTouchEventName("touchstart")),this.removeHandler(this.host,"dragstart."+this.element.id),this.removeHandler(this.host,"keydown"),this.table&&(this.removeHandler(this.table,"mouseleave"),this.removeHandler(this.table,"mousemove"),this.removeHandler(this.table,b),this.removeHandler(this.table,"selectstart."+this.element.id),a.MLjqui.browser.msie&&a.MLjqui.browser.version<9&&this.removeHandler(this.table,"dblclick"))},_addHandlers:function(){var b=this;this._mousewheelfunc=this._mousewheelfunc||function(a){return b.wheel(a,b),!1},this.addHandler(this.host,"dragstart."+this.element.id,function(a){return!1}),this.addHandler(this.table,"selectstart."+this.element.id,function(c){return b.enableBrowserSelection?!0:b.filterable&&a(c.target).ischildof(b.filterrow)?!0:b.rowDetails&&a(c.target).parents("[data-role=details]").length>0?!0:void 0==b.editKey?!1:void 0}),this.addHandler(a(window),"MLjquiReady."+this.element.id,function(){b._updatecolumnwidths(),b.refresh()}),this.editable&&this.addHandler(a(document),"mousedown.gridedit"+this.element.id,function(c){if(b.editable&&b.editSettings.saveOnBlur&&null!=b.editKey&&!b.vScrollInstance.isScrolling()&&!b.vScrollInstance.isScrolling()){var d=b.host.coord(),e=b.host.width(),f=b.host.height(),g=!1,h=!1,i=!1;if((c.pageY<d.top||c.pageY>d.top+f)&&(g=!0,h=!0),(c.pageX<d.left||c.pageX>d.left+e)&&(g=!0,i=!0),g){var j=function(b){var d=a(b.children()[0]).data();if(d&&!d.MLjquiWidget&&(d=b.data()),d||(d=b.data()),d.MLjquiWidget&&d.MLjquiWidget.container&&"block"==d.MLjquiWidget.container[0].style.display){var e=d.MLjquiWidget,f=e.container.coord().top,i=e.container.coord().top+e.container.height();return h&&(c.pageY<f||c.pageY>i)?(g=!0,e.close(),!0):!1}},k=b._editors;if(k)for(var l=0;l<k.length;l++){var m=k[l].editor,n=j(m),o=m.attr("aria-owns");if(o){if(o==document.activeElement.id)return!0;if(a(document.activeElement).ischildof(a("#"+o)))return!0}else if(o=m.children().attr("aria-owns")){if(o==document.activeElement.id)return!0;if(a(document.activeElement).ischildof(a("#"+o)))return!0}if(n===!1)return}}g&&b.endroweditbykey(b.editKey)}}),this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"focus",function(a){a.preventDefault});var c=this.isTouchDevice();this.vScrollInstance.valueChanged=function(a){b._timer&&clearTimeout(b._timer),c?b.table&&(b.table[0].style.top=0-b.vScrollInstance.value+"px"):b._timer=setTimeout(function(){b.table&&(b.table[0].style.top=0-b.vScrollInstance.value+"px")},5)},this.hScrollInstance.valueChanged=function(a){b._timer&&clearTimeout(b._timer),c?b.table&&b._renderhorizontalscroll():b._timer=setTimeout(function(){b.table&&b._renderhorizontalscroll()},5)};var d="mousedown";this.isTouchDevice()&&(d=a.MLjqui.mobile.getTouchEventName("touchend"),a.MLjqui.browser.msie&&a.MLjqui.browser.version<10&&(d="mousedown"));var e=function(a,c){for(var d=null,e=b._table.coord(),f=e.top,g=e.left,h=b._table[0].rows,i=0;i<h.length;i++)for(var j=h[i],k=j.cells,l=0;l<k.length;l++){var m=k[l],n=m.offsetLeft+g,o=m.offsetTop+f,p=m.offsetWidth,q=m.offsetHeight;if(0!==p&&0!==q){if(!(c>=o&&o+q>c))break;if(a>=n&&n+p>a){d=m;break}}}return d},f=function(){if(b.hoveredRow){var a=b.hoveredRow[0].cells,c=function(a){for(var c=0;c<a.length;c++){var d=a[c],e=d.className;e=e.replace(" "+b.toTP("MLjqui-tb-fill-state-hover"),""),e=e.replace(" "+b.toTP("MLjqui-grid-cell-hover"),""),d.className=e}};if(c(a),b._pinnedTable&&a.length>0){var d=b._pinnedTable[0].rows[b.hoveredRow[0].rowIndex].cells;c(d)}}b.hoveredRow=null};this.addHandler(this.table,"mouseleave",function(a){f(),b.wrapper&&(b.wrapper.parent().removeAttr("tabindex",0),b.wrapper.removeAttr("tabindex",1),b.content.removeAttr("tabindex",2))});var g=function(a){if(!b.enableHover)return!0;if(b.hoveredRow=a,!a)return!0;var c=a[0].cells,d=b.rowDetails&&!b.treeGrid,e=d&&!b.treeGrid?1:0,f=0;e>0&&b.rtl&&(e=0,f=1);for(var g=e;g<c.length-f;g++){var h=c[g];h.className+=" "+b.toTP("MLjqui-tb-fill-state-hover")+" "+b.toTP("MLjqui-grid-cell-hover")}if(b._pinnedTable&&b._pinnedTable[0].rows.length)for(var i=b._pinnedTable[0].rows[b.hoveredRow[0].rowIndex].cells,g=e;g<i.length-f;g++){var h=i[g];h.className+=" "+b.toTP("MLjqui-tb-fill-state-hover")+" "+b.toTP("MLjqui-grid-cell-hover")}};b.isTouchDevice()&&(b.enableHover=!1),this.addHandler(this.table,"mousemove",function(c){var d=c.pageX,h=c.pageY;if(b.disabled)return!0;if(!b.enableHover)return!0;if(b.hScrollInstance.isScrolling()||b.vScrollInstance.isScrolling())return!0;var i=e(d,h);if(!i)return!0;var j=a(i).parent();return f(),b.rowDetails&&b.treeGrid&&"row-details"==j.attr("data-role")?!0:b.renderedRecords&&0===b.renderedRecords.length?!0:null!=b.editKey&&b.editKey===j.attr("data-key")?!0:(g(j),!0)}),this.addHandler(this.host,"keydown",function(a){return b._handleKey(a)}),a.MLjqui.browser.msie&&a.MLjqui.browser.version<9&&this.addHandler(this.table,"dblclick",function(a){b.table.trigger("mousedown",a)}),this.addHandler(this.table,d,function(c){var d=(c.target,null);if(b.disabled)return!0;if(!(b.touchmode&&c.originalEvent&&c.originalEvent._pageX)){var f=(b.table.coord(),c.pageX),h=c.pageY;if(a.MLjqui.browser.msie&&a.MLjqui.browser.version<9&&arguments&&2==arguments.length&&(f=arguments[1].pageX,h=arguments[1].pageY),b.isTouchDevice()){var i=a.MLjqui.position(c);if(f=i.left,h=i.top,isNaN(f)||isNaN(h)){var i=a.MLjqui.position(c.originalEvent);f=i.left,h=i.top}}d=e(f,h);var j=a(d).parent(),k=j.attr("data-key");if(b.rowDetails&&b.treeGrid&&"row-details"==j.attr("data-role"))return!0;var l=function(){b.enableBrowserSelection||(c.preventDefault&&c.preventDefault(),c.stopPropagation()),b.host.focus()};if(void 0!==k){var m=a(d).index(),n=b.columns.records[m];if(k==b.editKey){if(!b.editSettings.editSingleCell)return!0;if(b.clickedTD==d)return!0;if(null!=b.editKey&&b.editSettings.saveOnSelectionChange){var o=b.endroweditbykey(b.editKey);if(!o)return!0}}else if(null!=b.editKey&&b.editSettings.saveOnSelectionChange){var o=b.endroweditbykey(b.editKey);if(!o)return!0}b.clickedTD=d;var p=b.rowinfo[k];if(p&&p.group)return!0;var q=!1;if(p){var r=b.getrowdisplayindex(p.row),s=b.getrowindex(p.row);b._raiseEvent("rowClick",{index:r,boundIndex:s,key:k,row:p.row,originalEvent:c,dataField:n.datafield});var t=(new Date).getTime(),u=300;b.clickTime||(b.clickTime=new Date),b._lastSelectedKey==k&&t-b.clickTime.getTime()<u&&(b._raiseEvent("rowDoubleClick",{index:r,boundIndex:s,key:k,row:p.row,originalEvent:c,dataField:n.datafield}),q=!0,c.preventDefault&&c.preventDefault())}if(b.clickTime=new Date,d.className.indexOf("MLjqui-grid-group")>=0)p.expanded?b.hidedetailsbykey(k):b.showdetailsbykey(k);else if(c.target&&c.target.className.indexOf&&c.target.className.indexOf("MLjqui-grid-group")>=0&&b.treeGrid)p.expanded?b.treeGrid.collapseRow(k):b.treeGrid.expandRow(k),g(b._getuirow(k)),c.stopPropagation&&c.stopPropagation(),c.preventDefault&&c.preventDefault();else{if(!(c.target&&c.target.className.indexOf&&c.target.className.indexOf("checkbox")>=0&&b.treeGrid)){var m=a(d).index(),n=b.columns.records[m];if(c.stopPropagation&&c.stopPropagation(),b.editable&&null==b.editKey&&b._lastSelectedKey==k&&b.editSettings.editOnDoubleClick&&q){var o=b.beginroweditbykey(k,n);return!0}if(b.isTouchDevice()&&b.scrolled&&new Date-b.scrolled<500)return b.enableBrowserSelection||c.preventDefault&&c.preventDefault(),!1;if("singlerow"===b.selectionMode&&"custom"!==b.selectionMode)return b.selectrowbykey(k,"mouse",!1),b._lastSelectedKey=k,b._updateSelection(),c.preventDefault&&c.preventDefault(),l(),!0;if("custom"!==b.selectionMode&&(c.ctrlKey||c.metaKey||b.clearSelection(!1),c.shiftKey&&b._lastSelectedKey)){var p=b.rowinfo[b._lastSelectedKey];b._doSelection(b._lastSelectedKey,!0,!1);var v=a(b._table.children()[1]).children("[data-key="+b._lastSelectedKey+"]"),w=v.index(),x=j.index();return b._selectRange(x,w),b.selectrowbykey(k,"mouse",!1),b._updateSelection(),c.preventDefault&&c.preventDefault(),l(),!0}return b._lastSelectedKey=k,b.clickTime=new Date,"custom"===b.selectionMode?!0:(p&&(p.selected?b.unselectrowbykey(k,"mouse",!1):b.selectrowbykey(k,"mouse",!1),l()),b._updateSelection(),b.enableBrowserSelection||c.preventDefault&&c.preventDefault(),!0)}p.checked?b.treeGrid.uncheckRow(k):b.treeGrid.checkRow(k),g(b._getuirow(k)),c.stopPropagation&&c.stopPropagation()}}}})},_updateSelection:function(){var b=this,c=a(b._table.children()[1]).children(),d=b._pinnedTable?a(b._pinnedTable.children()[1]).children():null,e=b.rowDetails&&!b.treeGrid,f=e?1:0,g=0;f>0&&b.rtl&&(f=0,g=1);for(var h=0;h<c.length;h++){var i=c[h].cells;if(d)var j=d[h].cells;var k=null;if(c[h].getAttribute&&(k=c[h].getAttribute("data-key")),b.rowinfo[k]&&"none"!==b.selectionMode)if(b.rowinfo[k].selected)for(var l=f;l<i.length-g;l++){var m=i[l];a(m).addClass(b.toTP("MLjqui-grid-cell-selected")+" "+b.toTP("MLjqui-tb-fill-state-pressed")),j&&a(j[l]).addClass(b.toTP("MLjqui-grid-cell-selected")+" "+b.toTP("MLjqui-tb-fill-state-pressed"))}else for(var l=f;l<i.length-g;l++){var m=i[l];if(j)var n=j[l];var o=m.className;o=o.replace(" MLjqui-tb-fill-state-pressed",""),o=o.replace(" MLjqui-tb-fill-state-pressed-"+b.theme,""),o=o.replace(" MLjqui-grid-cell-selected",""),o=o.replace(" MLjqui-grid-cell-selected-"+b.theme,""),m.className=o,n&&(n.className=o)}}},_selectRange:function(b,c){var d=a(a(this._table.children()[1]).children()[c]),e=this;if(b>c)for(var f=c,g=d;b>f;){var g=g.next(),h=g.attr("data-key");e._doSelection(h,!0,!1),f++}else if(c>b)for(var f=c,g=d;f>b;){var g=g.prev(),h=g.attr("data-key");this._doSelection(h,!0,!1),f--}},_getuikey:function(b,c){var d=null,e=a(this._table.children()[1]).children();if(d=a(e[b]).attr("data-key"),a(e[b]).attr("data-role")){var f=a(e[b]);if("next"==c){for(;f;)if(f=f.next()){var g=f.attr("data-role");if(!g)return d=f.attr("data-key")}}else if("prev"==c)for(;f;)if(f=f.prev()){var g=f.attr("data-role");if(!g)return d=f.attr("data-key")}return null}return d},getRows:function(){return this.source.records},getView:function(){var b=this,c=this._names(),d=new Array,e=function(d,f){if(f)for(var g=0;g<f.length;g++)if(f[g]&&f[g]._visible!==!1){var h=a.extend({},f[g]);d.push(h),f[g][c.expanded]?(h.records=new Array,e(h.records,f[g].records)):b.dataview.filters.length>0&&(h.records=new Array,e(h.records,f[g].records))}};return e(d,this.dataViewRecords),d},getKeys:function(){for(var a=new Array,b=this.source.records,c=0;c<b.length;c++)a.push(b[c].uid);return a},getKey:function(a){var b=this.getRows();return b?b[a].uid:-1},_getkey:function(b){if(this._loading)throw new Error("MLjquiDataTable: "+this.loadingErrorMessage);var c=null,d=function(){var c=a(this._table.children()[1]).children(),d=null,e=0;if(this.pageable&&(e-=this.dataview.pagenum*this.dataview.pagesize),this.groups.length>0){for(var f=0,g=0;g<c.length;g++){var h=a(c[g]),i=h.children()[0].getAttribute("colspan");if(!(i>0)){if(f===e+b)return d=h.attr("data-key");f++}}return d}if(this.rowDetails)for(var f=0,g=0;g<c.length;g++){if(f===b+e)return d=a(c[g]).attr("data-key");g%2==1&&f++}else d=a(c[e+b]).attr("data-key");return d};if(c=d.call(this),null==c&&this.pageable){var e=Math.floor(b/this.dataview.pagesize);if(this.dataview.pagenum!=e){var f=this.getRows()[b];if(f&&null!=f.uid)return f.uid;if(isNaN(e))return null;this.goToPage(e),c=d.call(this)}}return c},_getuirow:function(b){try{var c=a(this._table.children()[1]).children("[data-key="+b+"]");if(c.length>0)return c}catch(d){for(var e=a(this._table.children()[1]).children(),f=0;f<e.length;f++){var g=e[f],h=g.getAttribute("data-key");if(b==h)return a(g)}return null}return null},_getpinneduirow:function(b){if(!this._pinnedTable)return null;try{var c=a(this._pinnedTable.children()[1]).children("[data-key="+b+"]");if(c.length>0)return c}catch(d){for(var e=a(this._pinnedTable.children()[1]).children(),f=0;f<e.length;f++){var g=e[f],h=g.getAttribute("data-key");if(b==h)return a(g)}return null}return null},_names:function(){var a={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};if(!this.source||this.source&&!this.source._source.hierarchy)return a;var b=this.source._source.hierarchy.reservedNames;return b?b:a},_getMatches:function(b,c){if(void 0==b||0==b.length)return-1;var d=this.renderedRecords;void 0!=c&&(d=d.slice(c));var e=0;if(this.rowDetails&&!this.treeGrid&&e++,e<this.columns.records.length)var f=this.columns.records[e].datafield;else new Array;var g=new Array;return a.each(d,function(c){var d=this[f];d||(d="");var e=a.MLjqui.string.startsWithIgnoreCase(d.toString(),b);e&&g.push(this.uid)}),g},_handleKey:function(b){if(this._loading)return!0;if(a(b.target).ischildof(this.filter))return!0;if(a(b.target).ischildof(this.toolbar))return!0;if(a(b.target).ischildof(this.statusbar))return!0;var c=this._names(),d=this,e=b.charCode?b.charCode:b.keyCode?b.keyCode:0,f=this._lastSelectedKey,g=(this.rowinfo[f],this._getuirow(f)),h=b.shiftKey&&"singlerow"!=this.selectionMode,i=b.ctrlKey||b.metaKey;if(g){if(this.handleKeyboardNavigation){var j=this.handleKeyboardNavigation(e);if(j)return!0}if(this.editable&&void 0==this.editKey&&113===e&&this.editSettings.editOnF2&&this.beginroweditbykey(g.attr("data-key")),void 0==this.editKey&&!i&&!h&&this.incrementalSearch&&!(e>=33&&40>=e)){var k=-1;this._searchString||(this._searchString=""),(8==e||46==e)&&this._searchString.length>=1&&(this._searchString=this._searchString.substr(0,this._searchString.length-1));var l=String.fromCharCode(e),m=!isNaN(parseInt(l)),n=!1;if(e>=65&&97>=e||m||8==e||32==e||46==e){b.shiftKey||(l=l.toLocaleLowerCase()),8!=e&&32!=e&&46!=e&&(this._searchString.length>0&&this._searchString.substr(0,1)==l||(this._searchString+=l)),32==e&&(this._searchString+=" "),this._searchTime=new Date;var f=this.getSelection();if(f.length>=1){for(var o=f[0].uid,p=-1,q=0;q<this.renderedRecords.length;q++)if(this.renderedRecords[q].uid==o){p=q;break}var r=this._getMatches(this._searchString,p);if(0==r.length||r.length>0&&r[0]==o)var r=this._getMatches(this._searchString)}else var r=this._getMatches(this._searchString);if(r.length>0){var f=this.getSelection();if(f.length>=1){var s=r.indexOf(f[0].uid);if(-1==s)this.clearSelection(!1),this.selectrowbykey(r[0]);else{var t=s+1;t>=r.length&&(t=0),this.clearSelection(!1),this.selectrowbykey(r[t])}}else this.clearSelection(!1),this.selectrowbykey(r[0]);this._lastSearchString=this._searchString}}if(void 0!=this._searchTimer&&clearTimeout(this._searchTimer),27!=e&&13!=e||(this._searchString="",this._lastSearchString=""),this._searchTimer=setTimeout(function(){d._searchString="",d._lastSearchString=""},500),k>=0)return;if(n)return!1}if(void 0!=this.editKey){if(27===e&&this.editSettings.cancelOnEsc)this.endroweditbykey(this.editKey,!0);else if(13===e&&this.editSettings.saveOnEnter){if(b.target&&"div"!=b.target.nodeName.toLowerCase()&&"input"!=b.target.nodeName.toLowerCase())return!0;this.endroweditbykey(this.editKey,!1)}else if(this.editSettings.editSingleCell&&this.editColumn){var u=this.columns.records.indexOf(this.editColumn);if(9==e&&u<this.columns.records.length-1&&!b.shiftKey){for(var v=this.editKey,w=null,q=u+1;q<this.columns.records.length;q++)if(this.columns.records[q].editable&&!this.columns.records[q].hidden){w=this.columns.records[q];break}w&&(this.endroweditbykey(this.editKey,!1),this.beginroweditbykey(v,w))}else if(9==e&&b.shiftKey&&u>0){for(var v=this.editKey,x=null,q=u-1;q>=0;q--)if(this.columns.records[q].editable&&!this.columns.records[q].hidden){x=this.columns.records[q];break}x&&(this.endroweditbykey(this.editKey,!1),this.beginroweditbykey(v,x))}if(9==e){var y=this.rowinfo[this.editKey],p=this.getrowindex(y),g=this._getuirow(this.editKey);if(b.shiftKey||w){if(!x&&b.shiftKey){for(var z=null,q=this.columns.records.length-1;q>=0;q--)if(this.columns.records[q].editable&&!this.columns.records[q].hidden){z=this.columns.records[q];break}if(z){for(;g;)if(g=g.prev()){var A=g.attr("data-role");if(!A){var B=g.attr("data-key");break}}if(B){this.clearSelection(!1),this._lastSelectedKey=B;var y=this.rowsByKey[B],p=this.getrowindex(y),C=this.getrowdisplayindex(y);this._raiseEvent("rowSelect",{key:B,index:C,boundIndex:p,row:this.rowsByKey[B]}),this.endroweditbykey(this.editKey,!1),this._doSelection(B,!0,!0),this.beginroweditbykey(B,z)}}}}else{for(var z=null,q=0;q<this.columns.records.length;q++)if(this.columns.records[q].editable&&!this.columns.records[q].hidden){z=this.columns.records[q];break}if(z){for(;g;)if(g=g.next()){var A=g.attr("data-role");if(!A){var B=g.attr("data-key");break}}if(B){this.clearSelection(!1),this._lastSelectedKey=B;var y=this.rowsByKey[B],p=this.getrowindex(y),C=this.getrowdisplayindex(y);this._raiseEvent("rowSelect",{key:B,index:C,boundIndex:p,row:this.rowsByKey[B]});var D=this.endroweditbykey(this.editKey,!1);D?(this._doSelection(B,!0,!0),this.beginroweditbykey(B,z)):this.beginroweditbykey(this.editKey,z)}}}return!1}}return!0}if(b.ctrlKey||b.metaKey){var E=String.fromCharCode(e).toLowerCase();if("c"==E||"x"==E){var f=this.getSelection();if(f.length>=1){for(var F="",G=0;G<this.renderedRecords.length;G++)for(var H=this.renderedRecords[G],q=0;q<f.length;q++){var y=f[q];if(y.uid===H.uid){for(var I=0;I<this.columns.records.length;I++){var J=this.getCellTextByKey(y.uid,this.columns.records[I].displayfield);F+=J,I<this.columns.records.length-1&&(F+="	")}F+="\r\n";break}}if(""!=F&&(F=F.substring(0,F.length-1)),window.clipboardData)window.clipboardData.setData("Text",F);else{var K=a('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');K.val(F),a("body").append(K),K.select(),setTimeout(function(){document.designMode="off",K.select(),K.remove()},100)}}}}if(32===e&&this.treeGrid&&this.treeGrid.checkboxes){var f=this.getSelection();if(f.length>1){for(var q=0;q<f.length;q++){var L=f[q].uid;this.rowinfo[L].checked?this.treeGrid.uncheckRow(L,!1):this.treeGrid.checkRow(L,!1)}return this._renderrows(),!1}var o=g.attr("data-key");if(o)return this.rowinfo[o].checked?this.treeGrid.uncheckRow(o):this.treeGrid.checkRow(o),!1}var M=g.index(),N=function(b){var c=null,e=a(d._table.children()[1]).children().length-1,f=a(a(d._table.children()[1]).children()[e]),g=f.attr("data-role");if(g){for(;f;)if(f=f.prev()){var g=f.attr("data-role");if(!g){c=f.attr("data-key");break}}}else c=f.attr("data-key");return"all"==b?{row:f,key:c}:c},O=function(b){var c=null,e=a(a(d._table.children()[1]).children()[0]),f=e.attr("data-role");if(f){for(;e;)if(e=e.next()){var f=e.attr("data-role");if(!f){c=e.attr("data-key");break}}}else c=e.attr("data-key");return"all"==b?{row:e,key:c}:c},o=null,P=function(){if(i||h||d.clearSelection(!1),33==e||37==e){var a=M;o=d._getuikey(a,"prev"),o||(o=O())}else if(34==e||39==e){var a=M;o=d._getuikey(a,"next"),o||(o=N())}else 38==e?o=N():40==e&&(o=O());d._lastSelectedKey=o;var b=d.rowsByKey[o],a=d.getrowindex(b),c=d.getrowdisplayindex(b);d._raiseEvent("rowSelect",{key:o,index:c,boundIndex:a,row:d.rowsByKey[o]}),d._doSelection(o,!0,!0),d.host.focus()},Q=function(){d.clearSelection(!1);var a=O();h||i?d._selectRange(g.index(),0):d._lastSelectedKey=a,d.selectrowbykey(a,"keyboard")},R=function(){d.clearSelection(!1);var a=N("all"),b=a.key;h||i?d._selectRange(g.index(),a.row.index()):d._lastSelectedKey=b,d.selectrowbykey(b,"keyboard")};if(this.treeGrid&&this.rtl&&(37==e?e=39:39==e&&(e=37)),36==e||i&&38==e)return Q(),!1;if(35==e||i&&40==e)return R(),!1;if(33==e||37==e){var o=g.attr("data-key");if(this.rowDetails&&37==e&&!this.treeGrid)return this.hidedetailsbykey(o),!1;if(this.treeGrid&&37==e){if(this.rowinfo[o].row&&!this.rowinfo[o].row[c.parent]&&!this.rowinfo[o][c.leaf]&&!this.rowinfo[o].expanded)return!1;if(this.rowinfo[o].expanded&&!this.rowinfo[o][c.leaf])return this.treeGrid.collapseRow(o),!1;if(this.rowinfo[o].row&&this.rowinfo[o].row[c.parent]&&(o=this.rowinfo[o].row[c.parent].uid),this.rowinfo[o][c.leaf])return!1}if(this.pageable&&!this.treeGrid)return this.rtl?this.goToNextPage(P):this.goToPrevPage(P),!1;if(this.treeGrid&&this.pageable&&33==e)return this.goToPrevPage(P),!1}else if(34==e||39==e){var o=g.attr("data-key");if(this.rowDetails&&39==e&&!this.treeGrid)return this.showdetailsbykey(o),!1;if(this.treeGrid&&39==e){if(this.rowinfo[o][c.leaf])return!1;if(!this.rowinfo[o].expanded)return this.treeGrid.expandRow(o),!1;if(this.rowinfo[o].row&&this.rowinfo[o].row.records&&this.rowinfo[o].row.records.length>0)if(this.dataview.filters.length>0){for(var S=this.rowinfo[o].row.records,q=0;q<S.length;q++)if(S[q]._visible){o=S[q].uid;break}}else o=this.rowinfo[o].row.records[0].uid}if(this.pageable&&!this.treeGrid)return this.rtl?this.goToPrevPage(P):this.goToNextPage(P),!1;if(this.treeGrid&&this.pageable&&34==e)return this.goToNextPage(P),!1}else if(38==e){for(;g;)if(g=g.prev()){var A=g.attr("data-role");if(!A){o=g.attr("data-key");break}}if(this.pageable&&null==o)return this.goToPrevPage(P),!1}else if(40==e){for(;g;)if(g=g.next()){var A=g.attr("data-role");if(!A){o=g.attr("data-key");break}}if(this.pageable&&null==o)return this.goToNextPage(P),!1}if(null!=o){if(i||h||this.clearSelection(!1),this.rowinfo[o]&&this.rowinfo[o].selected&&(i||h)){this._doSelection(this._lastSelectedKey,!1,!1),this._lastSelectedKey=o;var y=this.rowsByKey[o],p=this.getrowindex(y);d._updateSelection();var C=this.getrowdisplayindex(y);return this._raiseEvent("rowUnselect",{key:o,index:C,boundIndex:p,row:y}),!1}this._lastSelectedKey=o;var y=this.rowsByKey[o],p=this.getrowindex(y);this._doSelection(o,!0,!1),d._updateSelection();var C=this.getrowdisplayindex(y);if(this._raiseEvent("rowSelect",{key:o,index:C,boundIndex:p,row:y}),this.treeGrid)if(37==e){var g=this._getuirow(o),T=null;if(g){var A=g.attr("data-role");A||(T=g.attr("data-key"))}if(this.pageable&&null==T&&this.dataview.pagenum>0)for(;null==this._getuirow(o)&&this.dataview.pagenum>0;)this.goToPrevPage()}else if(39==e){var g=this._getuirow(o),T=null;if(g){var A=g.attr("data-role");A||(T=g.attr("data-key"))}this.pageable&&null==T&&this.goToNextPage()}return!1}}},_selection:function(a){if("selectionStart"in a[0]){var b=a[0],c=b.selectionEnd-b.selectionStart;return{start:b.selectionStart,end:b.selectionEnd,length:c,text:b.value
}}var d=document.selection.createRange();if(null==d)return{start:0,end:b.value.length,length:0};var e=a[0].createTextRange(),f=e.duplicate();e.moveToBookmark(d.getBookmark()),f.setEndPoint("EndToStart",e);var c=d.text.length;return{start:f.text.length,end:f.text.length+d.text.length,length:c,text:d.text}},_doSelection:function(a,b,c){if(null==a)return void this.clearSelection();"singlerow"===this.selectionMode&&this.clearSelection(!1);var d=this.rowinfo[a];if(d)d.selected=b,this.ensurerowvisiblebykey(a);else{this.ensurerowvisiblebykey(a);var d=this.rowinfo[a];d?d.selected=b:this.rowinfo[a]={selected:b}}"none"!=this.selectionMode&&c!==!1&&this._renderrows()},clearSelection:function(a){if(this.rowinfo){var b=this.getRows();for(var c in this.rowinfo){var d=this.rowinfo[c];if(d.selected){d.selected=!1;var e=b.indexOf(d.row),f=this.getrowdisplayindex(d.row);this._raiseEvent("rowUnselect",{key:c,index:f,boundIndex:e,row:d.row})}}}a!==!1&&this._renderrows()},exportData:function(c){if(!a.MLjqui.dataAdapter.ArrayExporter){if(!this.treeGrid)throw"MLjquiDataTable: Missing reference to MLjquidata.export.js!";throw"MLjquiTreeGrid: Missing reference to MLjquidata.export.js!"}var d=this.exportSettings.columnsHeader;void 0==d&&(d=!0);var e=this.exportSettings.hiddenColumns;void 0==e&&(e=!1);var f=this.exportSettings.serverURL,g=this.exportSettings.characterSet,h=this.exportSettings.collapsedRecords;void 0==h&&(h=!1);var i=this.exportSettings.fileName;void 0===i&&(i=this.treeGrid?"MLjquiTreeGrid_Data":"MLjquiDataTable_Data");var j=this,k=this.getRows();if(1==this.exportSettings.recordsInView&&(k=this.getView()),this.treeGrid&&this.treeGrid.virtualModeCreateRecords)var k=this.treeGrid.getRows();if(this.groups&&this.groups.length>0){var l=this.source.getGroupedRecords(this.groups,"records","label",null,"data",null,"parent",k),m=function(b,c){for(var d=0;d<b.length;d++){var e=a.extend({},b[d]);if(c.push(e),e.records&&e.records.length>0)for(var f=m(e.records,new Array),g=0;g<f.length;g++)f[g].leaf?c.push(f[g]):c.push(f[g])}return c},n=m.call(this,l,new Array);k=n}if(0==k.length)throw"No data to export.";this.exporting=!0,this.altRows&&this._renderrows();for(var o=new Array,p=0;p<this.columns.records.length;p++)!e&&this.columns.records[p].hidden||o.push(a.extend({},this.columns.records[p]));if(this.groups&&this.groups.length>0&&o.length>0)for(var q=this._names(),p=0;p<k.length;p++)k[p][q.leaf]||(j.rtl?k[p][o[o.length-1].displayfield]=k[p].label:k[p][o[0].displayfield]=k[p].label);var r=0;if(this.treeGrid){var s=this.treeGrid.getRows();1==this.exportSettings.recordsInView&&(s=this.getView());var q=this._names(),t=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c[q.expanded]||!c[q.expanded]&&h;r=Math.max(r,1+c[q.level]),c.records&&c.records.length>0&&d&&t(a[b].records)}};if(t(s),"xml"!=c&&"json"!=c){for(var u=o.length,p=0;r>p;p++){var v=new b(this,this);v.width=this.indentWidth,v.datafield="Level"+p,v.displayfield="Level"+p,v.align="center",v.cellsalign="center",v.text="",this.rtl?o.splice(u,0,v):o.splice(p,0,v)}var w=new Array,x=!(!this.source._source.hierarchy||!this.source._source.hierarchy.groupingDataFields),y=function(b){for(var d=0;d<b.length;d++){for(var e=a.extend({},b[d]),f=0;f<e[q.level];f++)e["Level"+f]="";var g=e[q.expanded]||!e[q.expanded]&&h;("xls"==c||"html"==c||"pdf"==c)&&e.records&&e.records.length>0?e["Level"+e[q.level]]=g?"-":"+":e["Level"+e[q.level]]="",e[q.leaf]&&(e["Level"+e[q.level]]="");for(var f=e[q.level]+1;r>f;f++)e["Level"+f]="";if(x&&!e[q.leaf]&&(j.rtl?e[o[o.length-r-1].displayfield]=e.label:e[o[r].displayfield]=e.label),e.aggregate)for(var i="xls"==c?"_AG":"",f=r;f<o.length;f++){var k=f;j.rtl&&(k=o.length-f-1),void 0!=e[o[k].displayfield]&&(e[o[k].displayfield]=i+e[o[k].displayfield])}w.push(e),g&&!e[q.leaf]&&y(e.records)}};y(s),k=w}else k=s}var z=void 0!=e?e:!1,A={},B={},C=this.host.find(".MLjqui-grid-cell:first"),D=this.host.find(".MLjqui-grid-cell-alt:first"),E=this.toThemeProperty;C.removeClass(E("MLjqui-grid-cell-selected")),C.removeClass(E("MLjqui-tb-fill-state-pressed")),D.removeClass(E("MLjqui-grid-cell-selected")),D.removeClass(E("MLjqui-tb-fill-state-pressed")),C.removeClass(E("MLjqui-grid-cell-hover")),C.removeClass(E("MLjqui-tb-fill-state-hover")),D.removeClass(E("MLjqui-grid-cell-hover")),D.removeClass(E("MLjqui-tb-fill-state-hover"));for(var F="cell",G=1,H="column",I=1,J=[],K=0;K<o.length;K++){var v=o[K];if(""!=v.cellclassname)if(v.customCellStyles=new Array,"string"==typeof v.cellclassname)v.customCellStyles.push(v.cellclassname);else for(var p=0;p<k.length;p++){var L=p,M=v.cellclassname(L,v.displayfield,k[p][v.displayfield],k[p]);M&&(v.customCellStyles[p]=M)}}if(a.each(o,function(b){var e=b;j.treeGrid&&(b>=r?e=o.length-r-1:r>0&&r>b&&(e=0));var f=a(j._table[0].rows[0].cells[e]);if(j._table[0].rows.length>1){var g=a(j._table[0].rows[1].cells[e]);if(0==g.length)var g=a(j._table[0].rows[1].cells[0])}if(0==f.length)var f=a(j._table[0].rows[0].cells[0]);var h=this,i=function(a){var b=j.toThemeProperty;if(a.removeClass(b("MLjqui-cell")),a.removeClass(b("MLjqui-grid-cell-selected")),a.removeClass(b("MLjqui-tb-fill-state-pressed")),a.removeClass(b("MLjqui-grid-cell-hover")),a.removeClass(b("MLjqui-tb-fill-state-hover")),h.customCellStyles)for(var c in h.customCellStyles)a.removeClass(h.customCellStyles[c])};if(i(f),g&&i(g),null==this.displayfield)return!0;j.showAggregates&&j.getcolumnaggregateddata&&J.push(j.getcolumnaggregateddata(this.displayfield,this.aggregates,!0,k));var l=j._getexportcolumntype(this);!this.exportable||this.hidden&&!z||(A[this.displayfield]={},A[this.displayfield].text=this.text,A[this.displayfield].width=parseInt(this.width),isNaN(A[this.displayfield].width)&&(A[this.displayfield].width=60),A[this.displayfield].width>500&&(A[this.displayfield].width=500),A[this.displayfield].formatString=this.cellsFormat,A[this.displayfield].localization=j.gridlocalization,A[this.displayfield].type=l,A[this.displayfield].cellsAlign=this.cellsalign,A[this.displayfield].hidden=!d,A[this.displayfield].index=e,A[this.displayfield].maxIndex=o.length),F="cell"+G;var m=this.element;if("json"!=c&&"xml"!=c){H="column"+I;var n=function(a,b,d,e,f,g,h,i,j){B[a]={index:1+h,maxIndex:o.length},g.rtl&&(B[a].index=o.length-h),"html"!=c&&"xls"!=c&&"pdf"!=c||(b&&(B[a]["font-size"]=b.css("font-size"),B[a]["font-weight"]=b.css("font-weight"),B[a]["font-style"]=b.css("font-style"),B[a]["background-color"]=g._getexportcolor(b.css("background-color")),B[a].color=g._getexportcolor(b.css("color")),B[a]["border-color"]=g._getexportcolor(b.css("border-top-color"))),d?B[a]["text-align"]=f.align:(B[a]["text-align"]=f.cellsalign,B[a].formatString=f.cellsFormat,B[a].dataType=l),"html"!=c&&"pdf"!=c||(B[a]["border-top-width"]="0px",g.rtl?(B[a]["border-left-width"]="1px",B[a]["border-right-width"]="0px",h==o.length-r-1&&d&&(B[a]["border-right-width"]="1px")):(B[a]["border-left-width"]="0px",B[a]["border-right-width"]="1px"),B[a]["border-bottom-width"]="1px",b&&(B[a]["border-top-style"]=b.css("border-top-style"),B[a]["border-left-style"]=b.css("border-left-style"),B[a]["border-right-style"]=b.css("border-right-style"),B[a]["border-bottom-style"]=b.css("border-bottom-style")),d?(0!=h||g.rtl?h==o.length-1&&g.rtl&&(B[a]["border-right-width"]="1px"):B[a]["border-left-width"]="1px",b&&(B[a]["border-top-width"]="1px",B[a]["border-bottom-width"]=b.css("border-bottom-width"))):0!=h||g.rtl?h==o.length-1&&g.rtl&&(B[a]["border-right-width"]="1px"):B[a]["border-left-width"]="1px",b&&(B[a].height=b.css("height")),g.treeGrid&&!d&&(B[a].index-1<r?g.rtl?B[a]["border-left-width"]="0px":B[a]["border-right-width"]="0px":B[a].index-1==r&&(g.rtl?B[a]["border-right-width"]="0px":B[a]["border-left-width"]="0px")))),!f.exportable||f.hidden&&!z||(1==i?(A[f.displayfield].customCellStyles||(A[f.displayfield].customCellStyles=new Array),A[f.displayfield].customCellStyles[j]=a):d?A[f.displayfield].style=a:e?A[f.displayfield].cellAltStyle=a:A[f.displayfield].cellStyle=a)};if(n(H,m,!0,!1,this,j,b),I++,n(F,f,!1,!1,this,j,b),j.altRows&&(F="cellalt"+G,n(F,g,!1,!0,this,j,b)),this.customCellStyles){for(var p in h.customCellStyles)f.removeClass(h.customCellStyles[p]);for(var p in h.customCellStyles)f.addClass(h.customCellStyles[p]),n(F+h.customCellStyles[p],f,!1,!1,this,j,b,!0,p),f.removeClass(h.customCellStyles[p])}G++}}),"json"!=c&&"xml"!=c&&r>0&&this.treeGrid){var N=r+1;if(this.rtl&&(N=o.length-r),B["column"+N]){var O=B["column"+N];O.merge=r,O["border-left-width"]="1px";for(var p=(B["cell"+N],0);p<o.length;p++){var N=p+1;this.rtl&&(N=o.length-p),B["column"+N].level=p,B["column"+N].maxLevel=r,B["cell"+N].maxLevel=r;var v=o[p];if(v.customCellStyles)for(var P in v.customCellStyles)B["cell"+N+v.customCellStyles[P]]&&(B["cell"+N+v.customCellStyles[P]].maxLevel=r);B["cellalt"+N]&&(B["cellalt"+N].maxLevel=r)}for(var p=0;r>p;p++){var N=p+1,Q=p;this.rtl&&(N=o.length-p);var R=B["column"+N];R.disabled=!0,B["cell"+N].level=Q,B["cell"+N].maxLevel=r,B["column"+N].level=Q,B["cellalt"+N]&&(B["cellalt"+N].level=Q,B["cellalt"+N].maxLevel=r);var v=o[p];if(v.customCellStyles)for(var P in v.customCellStyles)B["cell"+N+v.customCellStyles[P]]&&(B["cell"+N+v.customCellStyles[P]].maxLevel=r,B["cell"+N+v.customCellStyles[P]].level=Q);if(("html"==c||"pdf"==c||"xls"==c)&&(R["font-size"]=O["font-size"],R["font-weight"]=O["font-weight"],R["font-style"]=O["font-style"],R["background-color"]=O["background-color"],R.color=O.color,R["border-color"]=O["border-color"],"html"==c||"pdf"==c)){R["border-top-width"]=O["border-top-width"],R["border-left-width"]=O["border-left-width"],this.rtl&&(R["border-right-width"]=O["border-right-width"],0==p&&(R["border-right-width"]="1px")),0!=p||this.rtl?0==p&&this.rtl&&(R["border-left-width"]="0px"):R["border-left-width"]="0px",this.rtl?this.rtl&&(R["border-left-width"]="0px"):R["border-right-width"]="0px",R["border-bottom-width"]="0px";var R=B["cell"+N];this.rtl?this.rtl&&(R["border-left-width"]="0px"):R["border-right-width"]="0px"}}}}if(this.showAggregates){var S=[],T="xls"==c?"_AG":"",U=0;this.rowDetails&&!this.treeGrid&&U++,J.length>0&&(a.each(o,function(a){if(this.aggregates)for(var b=0;b<this.aggregates.length;b++)if(S[b]||(S[b]={}),S[b]){var c=j._getaggregatename(this.aggregates[b]),d=j._getaggregatetype(this.aggregates[b]),e=J[a-U];e&&(S[b][this.displayfield]=T+c+": "+e[d])}}),a.each(o,function(a){for(var b=0;b<S.length;b++)void 0==S[b][this.displayfield]&&(S[b][this.displayfield]=T)})),a.each(S,function(){k.push(this)})}var V=this,W=a.MLjqui.dataAdapter.ArrayExporter(k,A,B,f,this.treeGrid&&("xml"==c||"json"==c));if(void 0==i){this._renderrows();var X=this.treeGrid&&("xml"==c||"json"==c),Y=W.exportTo(c,this.treeGrid&&("xml"==c||"json"==c));return this.showAggregates&&a.each(S,function(){k.pop(this)}),setTimeout(function(){V.exporting=!1},50),Y}var X=this.treeGrid&&("xml"==c||"json"==c);W.exportToFile(c,i,f,g,X),this.showAggregates&&a.each(S,function(){k.pop(this)}),this._renderrows(),setTimeout(function(){V.exporting=!1},50)},_getexportcolor:function(a){var b=a;if("transparent"==a&&(b="#FFFFFF"),b&&b.toString()||(b="#FFFFFF"),-1!=b.toString().indexOf("rgb")){var c=b.split(",");if(-1!=b.toString().indexOf("rgba")){var d=parseInt(c[0].substring(5)),e=parseInt(c[1]),f=parseInt(c[2]),g=parseInt(c[3].substring(1,4)),h={r:d,g:e,b:f},i=this._rgbToHex(h);return 0==d&&0==e&&0==f&&0==g?"#ffffff":"#"+i}var d=parseInt(c[0].substring(4)),e=parseInt(c[1]),f=parseInt(c[2].substring(1,4)),h={r:d,g:e,b:f},i=this._rgbToHex(h);return"#"+i}if(-1!=b.toString().indexOf("#")&&4==b.toString().length){var j=b.toString().substring(1,4);b+=j}return b},_rgbToHex:function(a){return this._intToHex(a.r)+this._intToHex(a.g)+this._intToHex(a.b)},_intToHex:function(a){var b=parseInt(a).toString(16);return 1==b.length&&(b="0"+b),b.toUpperCase()},_getexportcolumntype:function(b){var c=this,d="string",e=c.source.datafields||(c.source._source?c.source._source.datafields:null);if(e){var f="";if(a.each(e,function(){return this.name==b.displayfield?(this.type&&(f=this.type),!1):void 0}),f)return f}if(null!=b){if(void 0==this.dataview.cachedrecords)return d;var g=null;if(this.virtualmode)a.each(this.dataview.cachedrecords,function(){return g=this[b.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return d;if(g=this.dataview.cachedrecords[0][b.displayfield],null!=g&&""==g.toString())return"string"}if(null!=g){if(-1!=b.cellsFormat.indexOf("c"))return"number";if(-1!=b.cellsFormat.indexOf("n"))return"number";if(-1!=b.cellsFormat.indexOf("p"))return"number";if(-1!=b.cellsFormat.indexOf("d"))return"date";if(-1!=b.cellsFormat.indexOf("y"))return"date";if(-1!=b.cellsFormat.indexOf("M"))return"date";if(-1!=b.cellsFormat.indexOf("m"))return"date";if(-1!=b.cellsFormat.indexOf("t"))return"date";if("boolean"==typeof g)d="boolean";else if(a.MLjqui.dataFormat.isNumber(g))d="number";else{var h=new Date(g);if("NaN"==h.toString()||"Invalid Date"==h.toString())if(a.MLjqui.dataFormat){if(h=a.MLjqui.dataFormat.tryparsedate(g),null!=h){if(h&&h.getFullYear()&&1970==h.getFullYear()&&0==h.getMonth()&&1==h.getDate()){var i=new Number(g);return isNaN(i)?"string":"number"}return"date"}d="string"}else d="string";else d="date"}}}return d},showDetails:function(a){var b=this._getkey(a);this.showdetailsbykey(b)},hideDetails:function(a){var b=this._getkey(a);this.hidedetailsbykey(b)},setCellValueByKey:function(b,c,d){var e=this,f=this.rowsByKey[b],g=this.getrowindex(f),h=f;if(null!=h&&h[c]==d)return!1;if(null==h||null!==h[c]||""!==d){var i="";if(null!=h&&h[c]!==d){var j=this.getColumn(c),k="string",l=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(l){var m="";a.each(l,function(){return this.name==j.displayfield?(this.type&&(m=this.type),!1):void 0}),m&&(k=m)}if(i=h[c],!j.nullable||null!=d&&""!==d&&j.nullable&&void 0===d.label){if(a.MLjqui.dataFormat.isNumber(i)||"number"==k||"float"==k||"int"==k||"decimal"==k&&"date"!=k)d=new Number(d),d=parseFloat(d),isNaN(d)&&(d=0);else if((a.MLjqui.dataFormat.isDate(i)||"date"==k)&&""!=d){var n=d;n=new Date(n),"Invalid Date"!=n&&null!=n?d=n:"Invalid Date"==n&&(n=new Date,d=n)}if(h[c]===d)return}if(e.dataview._filteredData=null,e.dataview._sortData=null,e.dataview._sortHierarchyData=null,h[c]=d,this.treeGrid){var o=this.treeGrid.getRow(b);o&&(o[c]=d)}if(null!=d&&null!=d.label){var j=this.getColumn(c);if(h[j.displayfield]=d.label,h[c]=d.value,this.treeGrid){var o=this.treeGrid.getRow(b);o&&(o[j.displayfield]=d.label,o[c]=d.value)}}}if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var p=g,q=this.source._source._localdata()[p];this.source.suspendKO=!0;var r=q;if(r[c]&&r[c].subscribe)null!=d&&null!=d.label?(r[j.displayfield](d.label),r[c](d.value)):r[c](d);else{var l=this.source._source.datafields,s=null;if(l&&a.each(l,function(){return this.name==c?(s=this.map,!1):void 0}),null==s)null!=d&&null!=d.label?(r[c]=d.value,r[j.displayfield]=d.label):r[c]=d;else{var t=s.split(this.source.mapChar);if(t.length>0){for(var u=r,v=0;v<t.length-1;v++)u=u[t[v]];u[t[t.length-1]]=d}}this.source._source._localdata.replace(q,a.extend({},r))}this.source.suspendKO=!1}if(this.source.updaterow&&(void 0==sync||1==sync)){var w=!1,x=function(a){0==a&&this.setCellValue(f,c,i,!0,!1)};try{var y=b;w=this.source.updaterow(y,h,x),void 0==w&&(w=!0)}catch(z){return w=!1,void this.setCellValue(f,c,i)}}var A=this.getrowdisplayindex(f),j=this.getColumn(c);this._raiseEvent("cellValueChanged",{value:d,oldValue:i,dataField:c,displayField:j.displayfield,key:b,boundIndex:g,index:A,row:this.rowsByKey[b]}),this.editable&&null!=this.editKey||this._renderrows()}},setCellValue:function(a,b,c){if(null==a||null==b)return!1;var d=parseInt(a),e=this._getkey(d);this.setCellValueByKey(e,b,c)},getCellText:function(a,b){if(null==a||null==b)return!1;var c=parseInt(a),d=this._getkey(c);return this.getCellTextByKey(d,b)},getCellTextByKey:function(b,c){if(null==b||null==c)return null;var d=this.getCellValueByKey(b,c),e=this.getColumn(c);return e&&""!=e.cellsFormat&&a.MLjqui.dataFormat&&(a.MLjqui.dataFormat.isDate(d)?d=a.MLjqui.dataFormat.formatdate(d,e.cellsFormat,this.gridlocalization):(a.MLjqui.dataFormat.isNumber(d)||!isNaN(parseFloat(d))&&isFinite(d))&&(d=a.MLjqui.dataFormat.formatnumber(d,e.cellsFormat,this.gridlocalization))),d},getCellValue:function(a,b){if(null==a||null==b)return!1;var c=parseInt(a),d=this._getkey(c);return this.getCellValueByKey(d,b)},getCellValueByKey:function(a,b){var c=this.rowsByKey[a];!c&&this.treeGrid&&(c=this.treeGrid.getRow(a));var d=(this.getrowindex(c),c);return null!=d?d[b]:null},beginRowEdit:function(a){var b=this._getkey(a);this.beginroweditbykey(b)},beginCellEdit:function(a,b){var c=this._getkey(a),d=this.getColumn(b);this.beginroweditbykey(c,d)},endCellEdit:function(a,b,c){this.endRowEdit(a,c)},endRowEdit:function(a,b){var c=this._getkey(a);this.endroweditbykey(c,b)},getrowindex:function(a){var b=this.getRows().indexOf(a);if(-1!=b)return b;if(this.groups&&this.groups.length>0)for(var c=this.getRows(),d=0;d<c.length;d++)if(a.originalRecord){if(c[d].uid==a.originalRecord.uid){b=d;break}}else if(c[d].uid==a.uid){b=d;break}return b},getrowdisplayindex:function(a){if(this.treeGrid)return-1;var b=this.getView(),c=b.indexOf(a);if(-1!=c)return c;if(void 0==a)return c;for(var d=b,e=0;e<d.length;e++)if(d[e].uid==a.uid||a.originalRecord&&d[e].uid==a.originalRecord.uid){c=e;break}return c},beginroweditbykey:function(b,c){if(this.beginEdit){var d=this.beginEdit(b,c);if(d===!1)return!1}var e=this.treeGrid?this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0:this.groups.length;if(e>0){var f=this.rowsByKey[b];if(this.treeGrid)var f=this.treeGrid.getRow(b);if(f.level<e)return!1}if(null==this._lastSelectedKey&&this.selectrowbykey(b),this.editKey===b&&void 0!=this.editKey)return!1;if(this.rowinfo[b]&&this.rowinfo[b].locked)return!1;if(null!=this.editKey)return this.endroweditbykey(b,!0),!1;var g=this.editSettings.editSingleCell;if(!c&&g&&this.columns.records&&this.columns.records.length>0){for(var h=0;h<this.columns.records.length&&(c=this.columns.records[h],!c.editable||c.hidden);h++);if(!c)return!1}if(g&&c&&!c.editable)return this.editKey=null,!1;g&&(this.editColumn=c);var i=this,f=this.rowsByKey[b];if(this.treeGrid)var f=this.treeGrid.getRow(b);var j=this.getrowindex(f),k=this._getuirow(b),l=this._getpinneduirow(b);this._editors=new Array;var m=!1;if(k)for(var n=k[0].cells,o=0,h=0;h<n.length;h++){var p=this.columns.records[h],q=n[h];if(!p.rowDetailscolumn&&!(p.checkboxcolumn||(p.pinned&&(q=l[0].cells[h]),g&&c&&p.datafield!=c.datafield||(a(q).removeClass(this.toTP("MLjqui-grid-cell-selected")),a(q).removeClass(this.toTP("MLjqui-tb-fill-state-pressed")),a(q).removeClass(this.toTP("MLjqui-grid-cell-hover")),a(q).removeClass(this.toTP("MLjqui-tb-fill-state-hover")),"none"==p.columntype)))){var r=a(q).outerWidth(),s=a(q).width();0===o&&(o=a(q).outerHeight()-1),a(q).css("padding","0px"),cellContent="<div style='height:"+o+"px; width: 100%; overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 9999;'></div>";var t=this.getCellTextByKey(b,p.displayfield);q.innerHTML=cellContent;var u=a(q.firstChild);switch(p.columntype){case"textbox":case"default":var v=a("<input style='border: none;' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textbox'/>").appendTo(u);if(this.rtl&&v.css("direction","rtl"),v.addClass(this.toThemeProperty("MLjqui-input")),v.addClass(this.toThemeProperty("MLjqui-widget-content")),v.addClass(this.toThemeProperty("MLjqui-cell-editor")),v[0].onfocus=function(b){setTimeout(function(){if(b){var c=a(b.target).parent().parent().index();c>=0&&i.ensureColumnVisible(i.columns.records[c].datafield)}else{var c=a(document.activeElement).parent().parent().index();c>=0&&i.ensureColumnVisible(i.columns.records[c].datafield)}i.content&&(i.content[0].scrollTop=0,i.content[0].scrollLeft=0),i.gridcontent&&(i.gridcontent[0].scrollLeft=0,i.gridcontent[0].scrollTop=0)},10)},p.editable){if(!m){m=!0;var w=a.MLjqui.browser.msie&&a.MLjqui.browser.version>10;w||v.focus();var x=v;setTimeout(function(){var a=x.val().length;w||x.focus();try{if("selectionStart"in x[0])x[0].setSelectionRange(0,a);else{var b=x[0].createTextRange();b.collapse(!0),b.moveEnd("character",a),b.moveStart("character",0),b.select()}}catch(c){}},10)}}else v.attr("disabled",!0),v.attr("readOnly",!0),v.addClass(this.toThemeProperty("MLjqui-fill-state-disabled"));if(v.width(s),v.height(o),a.MLjqui.browser.msie&&a.MLjqui.browser.version<9&&v.css("line-height",parseInt(o)+"px"),v.css("text-align",p.cellsalign),null===t&&(t=""),void 0==t&&(t=""),v.val(t),p.createeditor){var y=t,t=this.getCellValueByKey(b,p.displayfield);p.createeditor(this.treeGrid?b:j,t,v,y,s,o)}if(this._editors.push({column:p,editor:v}),""!=p.cellsFormat&&(-1==p.cellsFormat.indexOf("p")&&-1==p.cellsFormat.indexOf("c")&&-1==p.cellsFormat.indexOf("n")&&-1==p.cellsFormat.indexOf("f")||v.keydown(function(a){var b=a.charCode?a.charCode:a.keyCode?a.keyCode:0,c=String.fromCharCode(b),d=parseInt(c);if(isNaN(d))return!0;if(i._selection(v).length>0)return!0;var e="",f=v.val();if(p.cellsFormat.length>1){var g=parseInt(p.cellsFormat.substring(1));isNaN(g)&&(g=0)}else var g=0;if(g>0&&-1!=f.indexOf(i.gridlocalization.decimalseparator)&&i._selection(v).start>f.indexOf(i.gridlocalization.decimalseparator))return!0;for(var h=0;h<f.length-g;h++){var j=f.substring(h,h+1);null!=j.match(/^[0-9]+$/)&&(e+=j)}return e.length>=11?!1:void 0})),p.initeditor){var y=t,t=this.getCellValueByKey(b,p.displayfield);p.initeditor(this.treeGrid?b:j,t,v,y,s,o)}break;case"custom":case"template":this.editorsCache||(this.editorsCache=new Array);var z=a("<div style='width: 100%; height: 100%; border: none;'></div>").appendTo(u),A=a.trim(p.datafield).split(" ").join("");-1!=A.indexOf(".")&&(A=A.replace(".",""));var B=this.editorsCache["templateeditor_"+A];if("custom"==p.columntype)var B=this.editorsCache["customeditor_"+A+"_"+b];var y=t,t=this.getCellValueByKey(b,p.displayfield);if(B){var v=B;v.width(r),v.height(o),v.appendTo(z)}else{var v=a("<div style='border: none;'></div>");v.width(r),v.height(o),B=v,null===t&&(t=""),"custom"!=p.columntype?this.editorsCache["templateeditor_"+A]=v:this.editorsCache["customeditor_"+A+"_"+b]=v,v.appendTo(z),p.createeditor&&p.createeditor(this.treeGrid?b:j,t,v,y,r,o)}p.initeditor&&p.initeditor(this.treeGrid?b:j,t,v,y,r,o),this._editors.push({column:p,editor:v})}}}this.editKey=b,this.beginUpdate();var C=this.getrowdisplayindex(f);if(this._raiseEvent("rowBeginEdit",{key:b,index:C,boundIndex:j,row:this.rowsByKey[b]}),g){var f=this.rowsByKey[b],D=null,E=null;f&&(D=f[c.datafield],E=f[c.displayfield]),this._raiseEvent("cellBeginEdit",{value:D,displayValue:E,key:b,index:C,dataField:c.datafield,displayField:c.displayfield,boundIndex:j,row:this.rowsByKey[b]})}this.endUpdate(!1)},_toNumber:function(a){a.indexOf||void 0==a||(a=a.toString()),a.indexOf(this.gridlocalization.currencysymbol)>-1&&(a=a.replace(this.gridlocalization.currencysymbol,""));var b=function(a,b,c){var d=a;if(b==c)return a;for(var e=d.indexOf(b);-1!=e;)d=d.replace(b,c),e=d.indexOf(b);return d};a=b(a,this.gridlocalization.thousandsseparator,""),a=a.replace(this.gridlocalization.decimalseparator,"."),a.indexOf(this.gridlocalization.percentsymbol)>-1&&(a=a.replace(this.gridlocalization.percentsymbol,""));for(var c="",d=0;d<a.length;d++){var e=a.substring(d,d+1);"-"===e&&(c+="-"),"."===e&&(c+="."),null!=e.match(/^[0-9]+$/)&&(c+=e)}return a=c,a=a.replace(/ /g,"")},_geteditorvalue:function(b,c,d,e){var f=new String;if(c){if(!b.geteditorvalue)switch(b.columntype){case"textbox":default:if(f=c.val(),""!=b.cellsFormat){var g="string",h=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(h){var i="";a.each(h,function(){return this.name==b.displayfield?(this.type&&(i=this.type),!1):void 0}),i&&(g=i)}var j="number"===g||"float"===g||"int"===g||"integer"===g,k="date"===g||"time"===g;if(j||"string"===g&&(-1!=b.cellsFormat.indexOf("p")||-1!=b.cellsFormat.indexOf("c")||-1!=b.cellsFormat.indexOf("n")||-1!=b.cellsFormat.indexOf("f"))){if(""===f&&b.nullable)return"";f=this._toNumber(f),f=new Number(f),isNaN(f)&&(f="")}if(k||"string"===g&&(-1!=b.cellsFormat.indexOf("H")||-1!=b.cellsFormat.indexOf("m")||-1!=b.cellsFormat.indexOf("M")||-1!=b.cellsFormat.indexOf("y")||-1!=b.cellsFormat.indexOf("h")||-1!=b.cellsFormat.indexOf("d"))){if(""===f&&b.nullable)return"";var l=f;f=new Date(f),("Invalid Date"==f||null==f||b.cellsFormat.length>1)&&(a.MLjqui.dataFormat&&(f=a.MLjqui.dataFormat.parsedate(l,b.cellsFormat,this.gridlocalization)),"Invalid Date"!=f&&null!=f||(f=""))}}b.displayfield!=b.datafield&&(f={label:f,value:f})}if(b.geteditorvalue){var m=this.getCellValueByKey(e,b.displayfield);f=b.geteditorvalue(this.treeGrid?e:d,m,c)}}return f},_validateEditors:function(a){for(var b=this,c=!0,d=b.rowsByKey[a],e=b.getrowindex(d),f=b._editors,a=b.editKey,g=b._getuirow(a),h=0;h<f.length;h++){var i=f[h].editor,j=f[h].column,k=b._geteditorvalue(j,i,e,a);if(j.validation){i.removeClass(b.toThemeProperty("MLjqui-grid-validation-label"));var l=j.datafield;try{var m=j.validation({value:k,row:a,datafield:j.datafield,displayfield:j.displayfield,column:j},k),n=b.gridlocalization.validationstring;void 0!=m.message&&(n=m.message);var o="boolean"==typeof m?m:m.result;o||(void 0!=m.showmessage&&1!=m.showmessage||b._showvalidationpopup(g,l,n,i),c=!1)}catch(p){b._showvalidationpopup(g,l,b.gridlocalization.validationstring,i),c=!1}}}return c},endroweditbykey:function(b,c){var d=this;if(null!==d.editKey){if(this.endEdit){var e=this.endEdit(b);if(e===!1)return}var f=d.rowsByKey[b],g=d.getrowindex(f),h=d._editors,i=d.editKey;d._getuirow(i);if(c!==!0){var j=!0;if(h&&(j=d._validateEditors(i))){for(var k=a.extend({},f),l=a.extend({},f),m=0;m<h.length;m++){var n=h[m].editor,o=h[m].column,p=d._geteditorvalue(o,n,g,i);p&&void 0!=p.label?(k[o.displayfield]=p.label,k[o.datafield]=p.value):k[o.displayfield]=p}var q=function(){d.dataview._sortHierarchyData=null,d.dataview._sortData=null;for(var c=0;c<h.length;c++){var e=h[c].editor,j=h[c].column,k=d._geteditorvalue(j,e,g,i),m=l[j.displayfield];if(k&&void 0!=k.label?(f[j.displayfield]=k.label,f[j.datafield]=k.value):f[j.displayfield]=k,d.treeGrid){var n=d.treeGrid.getRow(i);n&&(n[j.displayfield]=k)}if(d.editorsCache){var o=function(a){if(a&&a.MLjquiWidget){var b=a.MLjquiWidget.element.className;if((b.indexOf("dropdownlist")>=0||b.indexOf("datetimeinput")>=0||b.indexOf("combobox")>=0||b.indexOf("menu")>=0)&&a.MLjquiWidget.isOpened){var c=a.MLjquiWidget.isOpened();c&&a.MLjquiWidget.close()}}},p="customeditor_"+j.displayfield+"_"+b,q="templateeditor_"+j.displayfield;if(d.editorsCache[p]){var r=a(d.editorsCache[p]).data(),s=d.editorsCache[p];!r.MLjquiWidget&&a(s).children()[0]&&a(a(s).children()[0]).data().MLjquiWidget&&(r=a(a(s).children()[0]).data()),o(r),d.editorsCache[p].detach()}if(d.editorsCache[q]){d.editorsCache[q].detach();var r=a(d.editorsCache[q]).data(),s=d.editorsCache[q];!r.MLjquiWidget&&a(s).children()[0]&&a(a(s).children()[0]).data().MLjquiWidget&&(r=a(a(s).children()[0]).data()),o(r)}}k!=m&&(d.beginUpdate(),d._raiseEvent("cellValueChanged",{value:k,oldValue:m,dataField:j.datafield,displayField:j.displayfield,key:b,index:g,row:f}),d.endUpdate(!1))}};d.updaterowbykey(d.editKey,k,!1,q)}if(!j)return!1}return d._detachEditors(i),!0}},_detachEditors:function(b){var c=this,d=c.rowsByKey[b],e=c.getrowindex(d);if(c.editorsCache)for(var f in c.editorsCache){var g=a(c.editorsCache[f]).data();if(g&&g.MLjquiWidget){var h=g.MLjquiWidget.element.className;if((h.indexOf("dropdownlist")>=0||h.indexOf("datetimeinput")>=0||h.indexOf("combobox")>=0||h.indexOf("menu")>=0)&&g.MLjquiWidget.isOpened){var i=g.MLjquiWidget.isOpened();i&&g.MLjquiWidget.close()}}a(c.editorsCache[f]).detach()}c.beginUpdate();var j=c.getrowdisplayindex(d);if(c.editSettings.editSingleCell){var d=c.rowsByKey[b],k=null,l=null;d&&(k=d[c.editColumn.datafield],l=d[c.editColumn.displayfield]),c._raiseEvent("cellEndEdit",{value:k,displayValue:l,key:b,index:j,dataField:c.editColumn.datafield,displayField:c.editColumn.displayfield,boundIndex:e,row:c.rowsByKey[b]})}c._raiseEvent("rowEndEdit",{key:b,index:j,boundIndex:e,row:c.rowsByKey[b]}),c.endUpdate(!1),c.editColumn=null,c.editKey=null,c._renderrows(),c._renderhorizontalscroll(),c.host.focus(),setTimeout(function(){c.host.focus()},10)},_showvalidationpopup:function(b,c,d,e){if(void 0==d)var d=this.gridlocalization.validationstring;e.addClass(this.toThemeProperty("MLjqui-grid-validation-label"));var f=a("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),g=a("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");f.html(d),g.addClass(this.toThemeProperty("MLjqui-grid-validation-arrow-up")),f.addClass(this.toThemeProperty("MLjqui-grid-validation")),f.addClass(this.toThemeProperty("MLjqui-rc-all")),f.hide(),g.hide(),f.prependTo(this.table),g.prependTo(this.table);var h=this.hScrollInstance,i=h.value,j=parseInt(i),k=this.getColumn(c).uielement;if(b){var l=b;f.css("top",parseInt(l.position().top)+30+"px");var m=parseInt(f.css("top"));g.css("top",m-11),g.removeClass(),g.addClass(this.toThemeProperty("MLjqui-grid-validation-arrow-up"));var n=!1;m>=this._table.height()&&(g.removeClass(this.toThemeProperty("MLjqui-grid-validation-arrow-up")),g.addClass(this.toThemeProperty("MLjqui-grid-validation-arrow-down")),m=parseInt(l.position().top)-l.outerHeight()-5,0>m&&(m=0,g.removeClass(this.toThemeProperty("MLjqui-grid-validation-arrow-down")),n=!0),f.css("top",m+"px"),g.css("top",m+f.outerHeight()-9));var o=-j+parseInt(a(k).position().left),p=parseInt(this._table.css("left"));isNaN(p)&&(p=0),0!=p&&(j=0),g.css("left",j+o+30);var q=f.width();if(q+o>this.host.width()-20){var r=q+o-this.host.width()+40;o-=r}n?f.css("left",j+parseInt(a(k).position().left)-f.outerWidth()):f.css("left",j+o),e.mouseenter(function(){e.hasClass("MLjqui-grid-validation-label")&&(f.show(),g.show())}),e.mouseleave(function(){f.hide(),g.hide()}),this.popups||(this.popups=new Array),this.popups[this.popups.length]={validation:f,validationrow:g}}},addRow:function(b,c,d,e){if(void 0!=c){this._datachanged=!0,void 0==d&&(d="last");var f=!1,g=this.that;if(null==b){var h=this.dataview.filters&&this.dataview.filters.length>0,i=h?this.source.records.length:this.dataview.totalrecords;if(!this.pageable){this.source._source.totalrecords?this.dataview.totalrecords=this.source._source.totalrecords:this.source._source.totalRecords?this.dataview.totalrecords=this.source._source.totalRecords:0!==this.source.hierarchy.length?this.dataview.totalrecords=this.source.hierarchy.length:this.dataview.totalrecords=this.source.records.length;var i=h?this.source.records.length:this.dataview.totalrecords}if(a.isArray(c)){var j=new Array;a.each(c,function(a,b){var d=g.dataview.getid(g.dataview.source.id,c[a],i+a);j.push(d),g.getColumn(g.dataview.source.id)&&(c[a][g.dataview.source.id]=d)}),b=j}else b=this.dataview.getid(this.dataview.source.id,c,i),this.getColumn(this.dataview.source.id)&&(c[this.dataview.source.id]=b)}else a.isArray(c)?a.each(c,function(a,d){var e=b[a];g.getColumn(g.dataview.source.id)&&(c[a][g.dataview.source.id]=e)}):this.getColumn(this.dataview.source.id)&&(c[this.dataview.source.id]=b);var k=this.treeGrid?!!this.treeGrid.virtualModeCreateRecords:!1,l=function(b,c,d,f){if(b._loading)throw new Error("MLjquiDataTable: "+b.loadingErrorMessage);var g=b.vScrollInstance.value,h=!1;if(a.isArray(d)?a.each(d,function(a,d){var g=null;null!=c&&null!=c[a]&&(g=c[a]),this.uid=g,b.rowsByKey[g]=this,c==e&&(e=null),h=b.source.addRecord(this,f,e,k)}):(d.uid=c,b.rowsByKey[c]=d,c==e&&(e=null),h=b.source.addRecord(d,f,e,k)),b.groups&&b.groups.length>0){var i=Object.prototype.toString,j=b.groups[0];if(Object.prototype.toString="function"==typeof j?j:function(){
return this[j]},!b.source.records.sort){var l=new Array,m=0;a.each(data,function(){l[startindex+m++]=this}),data=l}b.source.records.sort(function(b,c){if(void 0===b&&(b=null),void 0===c&&(c=null),null===b&&null===c)return 0;if(null===b&&null!==c)return-1;if(null!==b&&null===c)return 1;var d=0,e=0;if(b&&b.uid&&(d=b.uid),c&&c.uid&&(e=c.uid),b=b.toString(),c=c.toString(),a.MLjqui.dataFormat.isNumber(b)&&a.MLjqui.dataFormat.isNumber(c))return c>b?-1:b>c?1:0;if(a.MLjqui.dataFormat.isDate(b)&&a.MLjqui.dataFormat.isDate(c))return c>b?-1:b>c?1:0;a.MLjqui.dataFormat.isNumber(b)||a.MLjqui.dataFormat.isNumber(c)||(b=String(b).toLowerCase(),c=String(c).toLowerCase());try{if(c>b)return-1;if(b>c)return 1}catch(f){}if("number"==typeof d){if(e>d)return-1;if(d>e)return 1}return 0}),Object.prototype.toString=i}return b.dataview._filteredData=null,b.dataview._sortData=null,b.dataview._sortHierarchyData=null,void 0!=b._updating&&0!=b._updating||b.refresh(),b.source&&b.source._knockoutdatasource&&!b._updateFromAdapter&&b.autokoupdates&&b.source._source._localdata&&(b.source.suspendKO=!0,b.source._source._localdata.push(d),b.source.suspendKO=!1),b.vScrollInstance.setPosition(g),h};if(this.source.addrow){var m=function(a,e){1!=a&&void 0!=a||(void 0!=e&&(b=e),l(g,b,c,d))};try{f=g.treeGrid?this.source.addrow(b,c,d,e,m):this.source.addrow(b,c,d,m),void 0==f&&(f=!0)}catch(n){f=!1}if(0==f)return!1}else l(this,b,c,d);return f}return!1},deleteRow:function(a){var b=this._getkey(a);this.deleterowbykey(b)},deleterowbykey:function(b){if(void 0!=b){this._datachanged=!0;var c=!1,d=this.that,e=function(b,c){if(b._loading)throw new Error("MLjquiDataTable: "+b.loadingErrorMessage);b.dataview._filteredData=null,b.dataview._sortData=null,b.dataview._sortHierarchyData=null;var d=!1,e=b.vScrollInstance.value;if(a.isArray(c))a.each(c,function(){var a=this;if(b.rowsByKey[a]){if(d=!0,b.rowinfo[a].selected&&b.unselectrowbykey(a,!1),b.treeGrid)var c=b._names(),e=b.rowsByKey[a][c.parent];if(delete b.rowsByKey[a],b.treeGrid&&b.rowinfo[a]){var f=b.rowinfo[a].row.records,g=function(a){for(var c=0;c<a.length;c++){var d=a[c].uid;delete b.rowsByKey[d],delete b.rowinfo[d],a[c].records&&g(a[c].records)}};f&&(g(f),delete b.rowinfo[a])}b.source.deleteRecord(a),e&&c&&e.records&&0==e.records.length&&(e[c.leaf]=!0,b.rowinfo[e.uid][c.leaf]=!0)}});else{var d=!1;if(b.rowsByKey[c]){if(d=!0,b.rowinfo[c].selected&&b.unselectrowbykey(c,!1),b.treeGrid)var f=b._names(),g=b.rowsByKey[c][f.parent];if(delete b.rowsByKey[c],b.treeGrid&&b.rowinfo[c]){var h=b.rowinfo[c].row.records,i=function(a){for(var c=0;c<a.length;c++){var d=a[c].uid;delete b.rowsByKey[d],delete b.rowinfo[d],a[c].records&&i(a[c].records)}};h&&i(h)}delete b.rowinfo[c],b.source.deleteRecord(c),g&&f&&g.records&&0==g.records.length&&(g[f.leaf]=!0,b.rowinfo[g.uid][f.leaf]=!0)}}return b.refresh(),b.source&&b.source._knockoutdatasource&&!b._updateFromAdapter&&b.autokoupdates&&b.source._source._localdata&&(b.source.suspendKO=!0,b.source._source._localdata.pop(rowdata),b.source.suspendKO=!1),b.vScrollInstance.setPosition(e),d};if(this.source.deleterow){var f=function(a){1!=a&&void 0!=a||e(d,b)};try{this.source.deleterow(b,f),void 0==c&&(c=!0)}catch(g){c=!1}}else c=e(d,b);return c}return!1},updateRow:function(a,b){var c=this._getkey(a);this.updaterowbykey(c,b)},updaterowbykey:function(b,c,d,e){if(void 0!=b&&void 0!=c){var f=this.that,g=!1,h=function(b,c,e){if(b._loading)throw new Error("MLjquiDataTable: "+b.loadingErrorMessage);b.dataview._filteredData=null,b.dataview._sortData=null,b.dataview._sortHierarchyData=null;var f=!1;if(a.isArray(c))a.each(c,function(a,c){var d=b.rowsByKey[this],g=function(b,c){d?d[this]=e[a]:f=!1,f=!0};g(this,d),b.treeGrid&&(d=b.treeGrid.getRow(this),g(this,d))});else{var g=b.rowsByKey[c],h=function(a){if(a){for(var c=0;c<b.columns.records.length;c++)a[b.columns.records[c].datafield]=e[b.columns.records[c].datafield],b.groups.length>0&&a.originalRecord&&(a.originalRecord[b.columns.records[c].datafield]=e[b.columns.records[c].datafield]);f=!0}else f=!1};h(g),b.treeGrid&&(g=b.treeGrid.getRow(c),h(g))}var i=b.vScrollInstance.value;if(void 0!=d&&1!=d||void 0!=b._updating&&0!=b._updating||b._renderrows(),b.showAggregates&&b._updatecolumnsaggregates&&b._updatecolumnsaggregates(),b.source&&b.source._knockoutdatasource&&!b._updateFromAdapter&&b.autokoupdates&&b.source._source._localdata){var g=b.rowsByKey[c],j=b.getrowindex(g),k=b.source._source._localdata()[j];b.source.suspendKO=!0,b.source._source._localdata.replace(k,a.extend({},g)),b.source.suspendKO=!1}return b.vScrollInstance.setPosition(i),f};if(this.source.updaterow){var i=function(a){1!=a&&void 0!=a||(h(f,b,c),e&&e(),f._renderrows(!1))};try{g=this.source.updaterow(b,c,i),void 0==g&&(g=!0)}catch(j){g=!1}}else g=h(f,b,c),g&&e&&e(),f._renderrows(!1);return g}return!1},lockRow:function(a){var b=this._getkey(a);this.lockrowbykey(b)},unlockRow:function(a){var b=this._getkey(a);this.unlockrowbykey(b)},lockrowbykey:function(a){this.rowinfo[a]?this.rowinfo[a].locked=!0:this.rowinfo[a]={locked:!0},this._renderrows()},unlockrowbykey:function(a){this.rowinfo[a]?this.rowinfo[a].locked=!1:this.rowinfo[a]={locked:!1},this._renderrows()},selectRow:function(a){var b=this._getkey(a);this.selectrowbykey(b)},unselectRow:function(a){var b=this._getkey(a);this.unselectrowbykey(b)},selectrowbykey:function(a,b,c){"keyboard"!=b&&"mouse"!=b&&(this._lastSelectedKey=a);var d=c!==!1;this._doSelection(a,!0,d);var e=this.rowsByKey[a],f=this.getrowindex(e),g=this.getrowdisplayindex(e);this._raiseEvent("rowSelect",{key:a,index:g,boundIndex:f,row:this.rowsByKey[a]})},unselectrowbykey:function(a,b){var c=b!==!1;this._doSelection(a,!1,c);var d=this.rowsByKey[a],e=this.getrowindex(d),f=this.getrowdisplayindex(d);this._raiseEvent("rowUnselect",{key:a,index:f,boundIndex:e,row:this.rowsByKey[a]})},getSelection:function(){var a=new Array;if(this.rowinfo)for(var b in this.rowinfo){var c=this.rowinfo[b];c.selected&&a.push(c.row)}return a},showdetailsbykey:function(b){if(this.rowDetails){var c=this.rowinfo[b];if(c){c.expanded=!0;var d=a(this._table.children()[1]).children("[data-key="+b+"]"),e=a(this._pinnedTable.children()[1]).children("[data-key="+b+"]");if(d){var f=e.children(),g=a(f[0]);if(this.rtl)var g=a(f[f.length-1]);this.rtl?(g.removeClass(this.toThemeProperty("MLjqui-grid-group-collapse-rtl")),g.addClass(this.toThemeProperty("MLjqui-grid-group-expand-rtl")),g.removeClass(this.toThemeProperty("MLjqui-icon-arrow-left")),g.addClass(this.toThemeProperty("MLjqui-icon-arrow-down"))):(g.removeClass(this.toThemeProperty("MLjqui-grid-group-collapse")),g.addClass(this.toThemeProperty("MLjqui-grid-group-expand")),g.removeClass(this.toThemeProperty("MLjqui-icon-arrow-right")),g.addClass(this.toThemeProperty("MLjqui-icon-arrow-down"))),d.next().show();var h=e.next();if(h.show(),a.MLjqui.browser.msie&&a.MLjqui.browser.version<8&&(d.next().children().show(),e.next().children().show()),!c.initialized){var i=c.detailsHeight,j=this.initRowDetails(b,c.row,a(a(h).children().children().children()[0]),c);c.details=a(h).children().children().children()[0],c.initialized=!0,j!==!1&&c.detailsHeight==i||(j===!1&&(c.expanded=!1,c.nodetails=!0,h.hide()),this._renderrows())}this._updateScrollbars(),("auto"===this.height||null===this.height||this.autoheight)&&this._arrange();var k=this.getrowindex(c.row),l=this.getrowdisplayindex(c.row);this._raiseEvent("rowExpand",{row:c.row,index:l,boundIndex:k,rowKey:b})}}}},hidedetailsbykey:function(b){if(this.rowDetails){var c=this.rowinfo[b];if(c){c.expanded=!1;var d=a(this._table.children()[1]).children("[data-key="+b+"]"),e=a(this._pinnedTable.children()[1]).children("[data-key="+b+"]");if(d){var f=e.children(),g=a(f[0]);if(this.rtl)var g=a(f[f.length-1]);this.rtl?(g.addClass(this.toThemeProperty("MLjqui-grid-group-collapse-rtl")),g.removeClass(this.toThemeProperty("MLjqui-grid-group-expand-rtl")),g.addClass(this.toThemeProperty("MLjqui-icon-arrow-left")),g.removeClass(this.toThemeProperty("MLjqui-icon-arrow-down"))):(g.addClass(this.toThemeProperty("MLjqui-grid-group-collapse")),g.removeClass(this.toThemeProperty("MLjqui-grid-group-expand")),g.addClass(this.toThemeProperty("MLjqui-icon-arrow-right")),g.removeClass(this.toThemeProperty("MLjqui-icon-arrow-down"))),d.next().hide(),e.next().hide(),a.MLjqui.browser.msie&&a.MLjqui.browser.version<8&&(d.next().children().hide(),e.next().children().hide()),this._updateScrollbars(),("auto"===this.height||null===this.height||this.autoheight)&&this._arrange();var h=this.getrowindex(c.row),i=this.getrowdisplayindex(c.row);this._raiseEvent("rowCollapse",{row:c.row,index:i,boundIndex:h,rowKey:b})}}}},_getvirtualcolumnsindexes:function(a,b,c,d,e){if(this.rowDetails||this.rtl||this.editcell||this.width&&this.width.toString().indexOf("%")>=0||this.exporting)return{start:0,end:c+d};var f=0,g=-1,h=c+d;if(this.autorowheight)return{start:0,end:c+d};if(!e)for(var i=0;c+d>i;i++){if(this.columns.records[i].hidden||(f+=this.columns.records[i].width),f>=a&&-1==g&&(g=i),f>b+a){h=i;break}}return h++,h>c+d&&(h=c+d),-1==g&&(g=0),{start:g,end:h}},_renderhorizontalscroll:function(){var a=this.hScrollInstance,b=a.value;"hidden"===this.hScrollBar.css("visibility")&&(a.value=0,b=0);var c=parseInt(b);if(null!=this.table){var d=this.columnsrow,e=0,f=this.columns.records.length-e,g=this.columns.records,h=0==this.source.records.length;if(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(c=a.max-c),h&&!this._haspinned)this.table[0].style.left=-c+"px",d[0].style.marginLeft=-c+"px";else{if(this._haspinned||void 0==this._haspinned){for(var i=0;e+f>i;i++){var j=g[i];if(j.pinned){var k=null;if(this.showAggregates&&this.statusbar[0].cells&&(k=this.statusbar[0].cells[i]),this.filterrow&&this.filterrow[0].cells&&(filtercell=this.filterrow[0].cells[i]),this.rtl){var l=d[0].cells[i];l.style.marginLeft=-parseInt(b)+"px",k&&(k.style.marginLeft=-parseInt(b)+"px"),this.filterrow&&filtercell&&(filtercell.style.marginLeft=-parseInt(b)+"px")}else{var l=d[0].cells[i];l.style.marginLeft=c+"px",k&&(k.style.marginLeft=c+"px"),this.filterrow&&filtercell&&(filtercell.style.marginLeft=c+"px")}}}if(this.columnsVirtualization){for(var m=this._getvirtualcolumnsindexes(c,this.host.width(),0,this.columns.records.length,!1),n=m.start,o=m.end,p=0;n>p;p++){var q=p,r=this.columns.records[q].element[0];if(!this.columns.records[q].pinned&&(r.parentNode&&r.parentNode.removeChild(r),this.filterrow&&this.filterrow[0])){var s=this.filterrow[0].cells[q];s.parentNode&&s.parentNode.removeChild(s)}}for(var p=o;p<this.columns.records.length;p++){var q=p,r=this.columns.records[q].element[0];if(!this.columns.records[q].pinned&&(r.parentNode&&r.parentNode.removeChild(r),this.filterrow&&this.filterrow[0])){var s=this.filterrow[0].cells[q];s.parentNode&&s.parentNode.removeChild(s)}}for(var p=n;o>p;p++){var q=p;if(r=this.columns.records[q].element[0],!this.columns.records[q].pinned&&(r.parentNode||this.columnsrow[0].appendChild(r),this.filterrow&&this.filterrow[0])){var s=this.filterrow[0].cells[q];s.parentNode||this.filterrow[0].appendChild(s)}}}this._table[0].style.left=-c+"px",d[0].style.marginLeft=-c+"px"}else if(0==this._haspinned){if(this.columnsVirtualization){for(var m=this._getvirtualcolumnsindexes(c,this.host.width(),0,this.columns.records.length,!1),n=m.start,o=m.end,p=0;n>p;p++){var q=p,r=this.columns.records[q].element[0];if(r.parentNode&&r.parentNode.removeChild(r),this.filterrow&&this.filterrow[0]){var s=this.filterrow[0].cells[q];s.parentNode&&s.parentNode.removeChild(s)}}for(var p=o;p<this.columns.records.length;p++){var q=p,r=this.columns.records[q].element[0];if(r.parentNode&&r.parentNode.removeChild(r),this.filterrow&&this.filterrow[0]){var s=this.filterrow[0].cells[q];s.parentNode&&s.parentNode.removeChild(s)}}for(var p=n;o>p;p++){var q=p;if(r=this.columns.records[q].element[0],r.parentNode||this.columnsrow[0].appendChild(r),this.filterrow&&this.filterrow[0]){var s=this.filterrow[0].cells[q];s.parentNode||this.filterrow[0].appendChild(s)}}}this.table[0].style.left=-c+"px",d[0].style.marginLeft=-c+"px"}this.filterrow&&(this.filterrow[0].style.left=-c+"px",this.rtl&&(this.filterrow[0].style.left=-c+parseInt(this.content.css("left"))+"px"))}if(this.showAggregates&&this.aggregates[0].cells){var t=0;this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&(t="hidden"!=this.hScrollBar.css("visibility")?2+parseInt(this.hScrollBar.css("left")):3+parseInt(this.vScrollBar.width())),this.aggregates[0].style.marginLeft=-c+t+"px"}}},_initializeColumns:function(){var c=this.source.datafields;null==c&&this.source._source&&(c=this.source._source.datafields);var d=c?c.length>0:!1;if(this.columns&&this.columns.records)for(var e=0;e<this.columns.records.length;e++)this._removecolumnhandlers(this.columns.records[e]);var f=this,g=new a.MLjqui.dataCollection(this.element),h=0;if(this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,"checkbox"==this.selectionMode){var i=new b(f,this);i.visibleindex=h++,i.width=f.indentWidth,i.checkboxcolumn=!0,i.editable=!1,i.columntype="checkbox",i.groupable=!1,i.draggable=!1,i.filterable=!1,i.resizable=!1,i.datafield="_checkboxcolumn",g.add(i)}if(this.rowDetails&&!this.treeGrid){var i=new b(f,this);i.visibleindex=h++,i.width=f.indentWidth,i.editable=!1,i.rowDetailscolumn=!0,i.groupable=!1,i.draggable=!1,i.pinned=!0,i.filterable=!1,i.resizable=!1,i.text="",g.add(i)}var j=new Array;a.each(this.columns,function(a){if(void 0!=f.columns[a]){var c=new b(f,this);if(c.visibleindex=h++,void 0!=this.dataField&&(this.datafield=this.dataField),this.pinned&&(f._haspinned=!0),null==this.datafield)f.source&&f.source._source&&"array"==f.source._source.datatype&&(d||(f.source._source.datafields?f.source._source.datafields.push({name:a.toString()}):(f.source._source.datafields=new Array,f.source._source.datafields.push({name:a.toString()}))),this.datafield=a.toString(),this.displayfield=a.toString(),c.datafield=this.datafield,c.displayfield=this.displayfield);else{if(j[this.datafield])throw new Error("MLjquiDataTable: Invalid column 'dataField' setting. MLjquiDataTable's columns should be initialized with unique data fields.");j[this.datafield]=!0}g.add(c)}}),this.rtl&&g.records.reverse(),this.columns=g},addFilter:function(a,b){var c=this.getColumn(a);c&&this.dataview.addFilter(a,b)},removeFilter:function(a){var b=this.getColumn(a);b&&this.dataview.removeFilter(a)},clearFilters:function(a,b){this.dataview.filters=new Array,this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,b!==!1&&this.resetfilter(),a!==!1&&this.applyFilters()},resetfilter:function(){if(this.filterinput&&this.filterinput.val(""),this.filterrow)for(var b=0;b<this.filterrow[0].cells.length;b++){var c=this.filterrow[0].cells[b],d=a(c).find("input:first"),e=a(c).find(".filterconditions"),f=this.columns.records[b];if(f.filterable){d.val("");var g=this.getcolumntypebydatafield(f),h=new a.MLjqui.filter;switch(g){case"number":case"int":case"float":case"decimal":filtertype="numericfilter",conditions=h.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":filtertype="booleanfilter",conditions=h.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":filtertype="datefilter",conditions=h.getoperatorsbyfiltertype("datefilter");break;case"string":filtertype="stringfilter",conditions=h.getoperatorsbyfiltertype("stringfilter")}e.length>0&&("stringfilter"===filtertype?e.MLjquiDropDownList({selectedIndex:2}):e.MLjquiDropDownList({selectedIndex:0}))}}},applyFilters:function(){if(this.editable&&null!=this.editKey){this.endroweditbykey(this.editKey)}if(this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,this.serverProcessing?(this.dataview.pagenum=0,this.updateBoundData("filter")):(this.goToPage(0),this.refresh()),arguments&&arguments.length>0){if(this._updateSimpleFilter&&this.filtercolumnsList){var a=this.filtercolumnsList.MLjquiDropDownList("getSelectedItem").value;this._updateSimpleFilter(a)}this._updateFilterRow&&this._updateFilterRow()}this._raiseEvent("filter",{filters:this.dataview.filters})},sortBy:function(a,b){if(this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,this._loading)throw new Error("MLjquiDataTable: "+this.loadingErrorMessage);if(this.editable&&null!=this.editKey){this.endroweditbykey(this.editKey)}if(null==a&&(b=null,a=this.sortcolumn),a){var c=this;"a"==b||"asc"==b||"ascending"==b||1==b?ascending=!0:ascending=!1,null!=b?c.sortdirection={ascending:ascending,descending:!ascending}:c.sortdirection={ascending:!1,descending:!1},null!=b?c.sortcolumn=a:c.sortcolumn=null,c.source.sort&&(c.dataview.sortfield=a,null==b?c.dataview.sortfielddirection="":c.dataview.sortfielddirection=ascending?"asc":"desc",c.source.sort&&!this._loading&&c.source.sort(a,b)),c.dataview.sortBy(a,b),c._raiseEvent("sort",{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection})}this.serverProcessing?this.updateBoundData("sort"):this.refresh()},_togglesort:function(a){var b=this;if(!this.disabled&&a.sortable&&b.sortable){var c={sortcolumn:this.sortcolumn,sortdirection:this.sortdirection},d=null;null!=c.sortcolumn&&c.sortcolumn==a.displayfield?(d=c.sortdirection.ascending,d=1==d?!1:null):d=!0,b.sortBy(a.displayfield,d)}},_renderfilter:function(){var b=this,c=a("<div style='position: relative; margin: 4px;'><input style='height: 22px; direction: ltr;' role='textbox' type='text'/><div style='cursor: pointer; height: 100%;'><div></div></div></div>");c.height(22);var d=c.find("input"),e=c.find("div:first");c.addClass(this.toThemeProperty("MLjqui-rc-all")),c.addClass(this.toThemeProperty("MLjqui-widget")),c.addClass(this.toThemeProperty("MLjqui-input-group")),d.addClass(this.toThemeProperty("MLjqui-input")),d.addClass(this.toThemeProperty("MLjqui-rc-l")),d.addClass(this.toThemeProperty("MLjqui-input-group-addon")),d.addClass(this.toThemeProperty("MLjqui-widget")),d.addClass(this.toThemeProperty("MLjqui-widget-content")),e.addClass(this.toThemeProperty("MLjqui-tb-fill-state-normal")),e.addClass(this.toThemeProperty("MLjqui-rc-r")),e.addClass(this.toThemeProperty("MLjqui-input-group-addon")),e.find("div").addClass(this.toThemeProperty("MLjqui-icon-search")),this.rtl&&(d.addClass(this.toThemeProperty("MLjqui-rtl")),d.css("direction","rtl")),this.filter.children().remove(),this.filterbutton=e;for(var f=new Array,g=0;g<b.columns.records.length;g++)b.columns.records[g].datafield&&b.columns.records[g].filterable&&f.push({label:b.columns.records[g].text,value:b.columns.records[g].displayfield});var h=f.length<10,i=a("<div style='position: relative; top: 50%; display: none; margin-right: 4px; margin-left: 4px; float: left;'>"+this.gridlocalization.filtersearchstring+"</div>");this.filter.append(i);var j=a("<div class='filtercolumns' style='position: relative; margin: 4px; float: left;'></div>");this.filter.append(j),j.MLjquiDropDownList&&j.MLjquiDropDownList({theme:this.theme,enableBrowserBoundsDetection:!0,autoDropDownHeight:h,rtl:b.rtl,dropDownWidth:220,selectedIndex:0,width:"auto",height:20,source:f,displayMember:"label",valueMember:"value"}),this.filtercolumnsList=j;var k=function(a){b.filterinput.val("");for(var c=0;c<b.dataview.filters.length;c++){var d=b.dataview.filters[c];d.datafield===a&&b.filterinput.val(d.filter.getfilterat(0).filtervalue)}};30!==b.filterHeight&&(b.filtercolumnsList.css("margin-top",b.filterHeight/2-10),c.css("margin-top",b.filterHeight/2-10)),b._updateSimpleFilter=k,this.addHandler(j,"select",function(a){var b=a.args.item.value;k(b)}),"simple"===this.filterMode?(this.filtercolumnsList.hide(),i.show(),i.css("margin-top",-this.filter.height()/2),c.css("float","left")):(this.filtercolumnsList.show(),i.hide());var l=function(){if(!e.hasClass("MLjqui-fill-state-disabled")){var c=d.val();if(j.MLjquiDropDownList)var f=j.MLjquiDropDownList("getSelectedItem");var g=function(c,d,e){var f=new a.MLjqui.filter,g=b.getcolumntypebydatafield(c),h=b._getfiltertype(g);if("datefilter"==h)var i=f.createfilter(h,d,"EQUAL",null,c.cellsFormat,b.gridlocalization);else if("numericfilter"==h||"booleanfilter"==h){"numericfilter"==h&&(","==b.gridlocalization.decimalseparator&&d.indexOf(b.gridlocalization.decimalseparator)>=0&&(d=d.replace(b.gridlocalization.decimalseparator,".")),d.indexOf(b.gridlocalization.currencysymbol)>=0&&(d=d.replace(b.gridlocalization.currencysymbol,"")),d.indexOf(b.gridlocalization.percentagesymbol)>=0&&(d=d.replace(b.gridlocalization.percentagesymbol,"")));var i=f.createfilter(h,d,"EQUAL",null,c.cellsFormat,b.gridlocalization)}else var i=f.createfilter(h,d,"CONTAINS");return f.operator=e,f.addfilter(0,i),f};if("simple"!==b.filterMode){if(f){var h=f.value,i=b.getColumn(h),k=g(i,c,"and");c.length>0?(b.removeFilter(h),b.addFilter(h,k),b.applyFilters()):(b.removeFilter(h),b.applyFilters()),"advanced"===b.filterMode&&b._updateFilterRow&&b._updateFilterRow(!0)}}else{if(b.clearFilters(!1,!1),c.length>0)for(var l=0;l<b.columns.records.length;l++){var i=b.columns.records[l],k=g(i,c,"or");b.addFilter(i.datafield,k)}b.applyFilters()}0==b.dataview.filters.length?b.filtericon.fadeOut(200):b.filtericon.fadeIn(200)}};if(d.keydown(function(a){return 13===a.keyCode?(l(),a.preventDefault&&a.preventDefault(),!1):void 0}),e.click(function(){l()}),this.filterinput=d,this.filter.append(c),"advanced"==this.filterMode){var m=a("<a style='float: left; position: relative; margin: 2px; margin-left: 10px;' href='#'>"+this.gridlocalization.filterstring+"</a>");c.append(m),this.addHandler(m,"click",function(c){var d=function(c){if(b.filterrow)for(var d=0;d<b.filterrow[0].cells.length;d++){var e=b.filterrow[0].cells[d],f=a(e).find("input:first"),g=b.columns.records[d];if(g.filterable){c===!0&&f.val("");for(var h=0;h<b.dataview.filters.length;h++){var i=b.dataview.filters[h];if(i.datafield===g.displayfield){f.val(i.filter.getfilterat(0).filtervalue);break}}}}},e=function(c){if(b.filterrow)for(var d=0,e=0;e<b.filterrow[0].cells.length;e++){var f=b.filterrow[0].cells[e],g=a(f).find("input:first"),h=b.columns.records[e];h.hidden?f.style.visibility="hidden":f.style.visibility="inherit",h.filterable&&(f.style.left=parseInt(d)+parseInt(h.uielement[0].style.left)+"px",f.style.width=6+h.width+"px",g[0]&&(g[0].style.width=h.width-6-22+"px"))}};b._updateFilterRow=d,b._arrangeFilterRow=e;var f=function(){b.filtercolumnsList.MLjquiDropDownList({disabled:!0}),b.filterinput.addClass(b.toThemeProperty("MLjqui-fill-state-disabled")),b.filterinput.attr("disabled",!0),b.filterbutton.addClass(b.toThemeProperty("MLjqui-fill-state-disabled"))};return 0===b.filter.find(".filterrow").length?(b._renderadvancedfilter(),f(),d(),b._arrange(),e()):("none"===b.filter.find(".filterrow").css("display")?(f(),b.filter.find(".filterrow").removeClass("filterrow-hidden"),d(),b.filter.find(".filterrow").show(),e()):(b.filtercolumnsList.MLjquiDropDownList({disabled:!1}),b.filterinput.removeClass(b.toThemeProperty("MLjqui-fill-state-disabled")),b.filterinput.attr("disabled",!1),b.filterbutton.removeClass(b.toThemeProperty("MLjqui-fill-state-disabled")),k(b.filtercolumnsList.MLjquiDropDownList("getSelectedItem").value),b.filter.find(".filterrow").addClass("filterrow-hidden"),b.filter.find(".filterrow").hide()),b._arrange()),!1})}var n=a("<div style='float: left; width: 16px; height: 16px; position: relative; margin: 3px;'></div>");n.attr("title",b.gridlocalization.filterclearstring),n.addClass(b.toThemeProperty("MLjqui-icon-close")),c.append(n),n.hide(),b.filtericon=n,n.click(function(){b.clearFilters(),b.filtericon.fadeOut(200)}),b.dataview.filters.length>0&&("advanced"!=b.filterMode?k(b.dataview.filters[0].datafield):b._updateFilterRow&&b._updateFilterRow())},_renderadvancedfilter:function(){var b=this,c=function(){b.clearFilters(!1,!1);for(var c=b.filtercolumnsList.MLjquiDropDownList("getSelectedItem").value,d=(b.filterinput.val(),0);d<b.filterrow[0].cells.length;d++){var e=b.filterrow[0].cells[d],f=a(e).find("input:first"),g=a(e).find(".filterconditions"),h=b.columns.records[d],i="";if(h.filterable){h.displayfield===c&&b.filterinput.val(f.val());var j=b.getcolumntypebydatafield(h),k=new a.MLjqui.filter;switch(j){case"number":case"int":case"float":case"decimal":filtertype="numericfilter",conditions=k.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":filtertype="booleanfilter",conditions=k.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":filtertype="datefilter",conditions=k.getoperatorsbyfiltertype("datefilter");break;case"string":filtertype="stringfilter",conditions=k.getoperatorsbyfiltertype("stringfilter")}if(0==g.length)i="stringfilter"===filtertype?conditions[2]:conditions[0];else{var l=g.MLjquiDropDownList("getSelectedItem");i=l?conditions[l.index]:"stringfilter"===filtertype?conditions[2]:conditions[0]}var m=f.val();if(m.length>0||0==m.length&&"NOT_NULL"==i||0==m.length&&"NOT_EMPTY"==i||0==m.length&&"EMPTY"==i||0==m.length&&"NULL"==i){var n=h.displayfield,o=new a.MLjqui.filter;"numericfilter"==filtertype&&(","==b.gridlocalization.decimalseparator&&m.indexOf(b.gridlocalization.decimalseparator)>=0&&(m=m.replace(b.gridlocalization.decimalseparator,".")),m.indexOf(b.gridlocalization.currencysymbol)>=0&&(m=m.replace(b.gridlocalization.currencysymbol,"")),m.indexOf(b.gridlocalization.percentagesymbol)>=0&&(m=m.replace(b.gridlocalization.percentagesymbol,"")));var k=o.createfilter(filtertype,m,i,null,h.cellsFormat,b.gridlocalization);o.addfilter(0,k),b.addFilter(n,o)}}}b.dataview.filters.length>0?b.applyFilters():b.clearFilters(),0==b.dataview.filters.length?b.filtericon.fadeOut(200):b.filtericon.fadeIn(200)},d=function(){var d=a("<div style='position: relative;' class='filterrow'></div>").appendTo(b.filter);b.filterrow=d,d[0].cells=new Array,d.height(24),d.width(b.table.width());var e=0,f=b.filtercolumnsList.MLjquiDropDownList("getSelectedItem").value,g=b.filterinput.val();a.each(b.columns.records,function(){var h=this,i=a("<div></div>").appendTo(d);if(i.css("position","absolute"),i.css("left",e+parseInt(h.uielement[0].style.left)),h.pinned&&(i.css("z-index",b.tableZIndex+b.columns.records.length),i.addClass(b.toThemeProperty("MLjqui-widget-header"))),d[0].cells.push(i[0]),!this.filterable)return!0;var j=a("<input style='margin-left: 4px; height: 20px; float: left;' role='textbox' type='text'/>").appendTo(i);j.keydown(function(a){13===a.keyCode&&c()}),h.displayfield===f&&j.val(g),j.addClass(b.toThemeProperty("MLjqui-input")),j.addClass(b.toThemeProperty("MLjqui-rc-all")),j.addClass(b.toThemeProperty("MLjqui-widget")),j.addClass(b.toThemeProperty("MLjqui-widget-content"));var k=a("<div style='cursor: pointer; margin-left: 4px; margin-bottom: 4px; margin-top: 6px; width: 18px; position: relative; margin-top: 4px; float: left;'></div>").appendTo(i);k.append(a("<div style='width: 16px; height: 16px;' class='"+b.toThemeProperty("MLjqui-grid-column-filterbutton")+"'></div>")),j.focus(function(){b.ensureColumnVisible(h.displayfield),b.filter[0].scrollLeft=0,b.ensureColumnVisible(h.displayfield),setTimeout(function(){b.filter[0].scrollLeft=0,b.ensureColumnVisible(h.displayfield)},10)}),k.click(function(){var c=a("<div class='filterconditions' style='position: relative; margin-top: 1px; float: left;'></div>");c.insertAfter(k),k.remove();var d=b.getcolumntypebydatafield(h),e=b._getfiltersbytype(d);"string"===d?index=2:index=0,c.MLjquiDropDownList({theme:b.theme,enableBrowserBoundsDetection:!0,renderMode:"simple",arrowSize:0,selectedIndex:index,rtl:b.rtl,dropDownWidth:230,dropDownHeight:180,width:20,height:20,source:e,selectionRenderer:function(){return"<div style='width: 16px; height: 16px;' class='"+b.toThemeProperty("MLjqui-grid-column-filterbutton")+"'></div>"}}),b.addHandler(c,"close",function(a){j.focus(),setTimeout(function(){j.focus()},10)}),c.removeAttr("tabindex"),c.find("div").removeAttr("tabindex"),c.MLjquiDropDownList("open")}),j[0].style.width=h.width-6-22+"px"}),a("<div style='clear: both;'></div>").appendTo(d)};d();var e=a("<div style='position:relative;' class='filterrow'></div>").appendTo(b.filter),f=a("<input type='button' style='position: relative; float: left; margin-top: 4px; margin-left: 4px;' value='"+b.gridlocalization.filterapplystring+"'/>").appendTo(e),g=a("<input type='button' style='position: relative; float: left; margin-top: 4px;  margin-left: 4px;' value='"+b.gridlocalization.filtercancelstring+"'/>").appendTo(e),h=0;f.css("left",h),g.css("left",h),f.MLjquiButton({theme:b.theme}),g.MLjquiButton({theme:b.theme}),g.click(function(){b.filtercolumnsList.MLjquiDropDownList({disabled:!1}),b.filterinput.removeClass(b.toThemeProperty("MLjqui-fill-state-disabled")),b.filterinput.attr("disabled",!1),b.filterbutton.removeClass(b.toThemeProperty("MLjqui-fill-state-disabled")),b.filter.find(".filterrow").addClass("filterrow-hidden"),b.filter.find(".filterrow").hide(),b._arrange()}),f.click(function(){c()}),b._renderhorizontalscroll()},_getfiltertype:function(a){var b="stringfilter";switch(a){case"number":case"int":case"float":case"decimal":b="numericfilter";break;case"boolean":case"bool":b="booleanfilter";break;case"date":case"time":b="datefilter";break;case"string":b="stringfilter"}return b},getcolumntypebydatafield:function(b){var c=this,d="string",e=c.source.datafields||(c.source._source?c.source._source.datafields:null);if(e){var f="";if(a.each(e,function(){return this.name==b.displayfield?(this.type&&(f=this.type),!1):void 0}),f)return f}return d},_getfiltersbytype:function(a){var b=this,c="";switch(a){case"number":case"float":case"int":c=b.gridlocalization.filternumericcomparisonoperators;break;case"date":c=b.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":c=b.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:c=b.gridlocalization.filterstringcomparisonoperators}return c},_getcellvalue:function(a,b){var c=null;return c=b[a.datafield],null!=a.displayfield&&(c=b[a.displayfield]),null==c&&(c=""),c},_renderrows:function(b){if(this.editable&&null!=this.editKey&&b!==!1){this.endroweditbykey(this.editKey)}if(this.treeGrid)return void this.treeGrid._renderrows();if(!this._loading&&!this._updating){this.rendering&&this.rendering();var c=this,d=0;this.table[0].rows=new Array;var e=this.toTP("MLjqui-cell")+" "+this.toTP("MLjqui-widget-content");this.rtl&&(e+=" "+this.toTP("MLjqui-cell-rtl"));var f=this.columns.records.length,g=a.MLjqui.browser.msie&&a.MLjqui.browser.version<8;g&&this.host.attr("hideFocus","true");var h=c.groups.length,i=new Array,j=this.source.records;if(j=this.dataview.evaluate(j),this.dataViewRecords=j,"all"==this.dataview.pagesize||!this.pageable||this.serverProcessing){var k=j;if(this.pageable&&this.serverProcessing&&j.length>this.dataview.pagesize)var k=j.slice(this.dataview.pagesize*this.dataview.pagenum,this.dataview.pagesize*this.dataview.pagenum+this.dataview.pagesize)}else var k=j.slice(this.dataview.pagesize*this.dataview.pagenum,this.dataview.pagesize*this.dataview.pagenum+this.dataview.pagesize);if(c.groups&&c.groups.length>0){var l=this.pageable?this.dataview.pagesize*this.dataview.pagenum:0,m=function(a){for(var b=0,d=new Array,e=0;e<a.length;e++){var f=a[e];if(0==f.level&&b++,b>c.dataview.pagesize*c.dataview.pagenum&&b<=c.dataview.pagesize*c.dataview.pagenum+c.dataview.pagesize&&d.push(f),b>c.dataview.pagesize*c.dataview.pagenum+c.dataview.pagesize)break}return d};if("root"===this.pageSizeMode){var n=c.source.getGroupedRecords(c.groups,"records","label",null,"data",null,"parent",j,0);c.rootRecordsLength=n.length,n=m(n)}else var n=c.source.getGroupedRecords(c.groups,"records","label",null,"data",null,"parent",k,l);var o=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(b.push(d),d.records&&d.records.length>0)for(var e=o(d.records,new Array),f=0;f<e.length;f++)e[f].leaf?b.push(e[f]):b.push(e[f])}return b},i=o.call(c,n,new Array);k=i,this.rowsByKey=new Array;for(var p=0;p<k.length;p++){var q=k[p];this.rowsByKey[q.uid]=q}}var i=k;
this.renderedRecords=i;var r=i.length,s=this.tableZIndex,t=0,u=0;if(g)for(var v=0;f>v;v++){var w=this.columns.records[v],x=w.width;x<w.minwidth&&(x=w.minwidth),x>w.maxwidth&&(x=w.maxwidth);var y=a('<table><tr><td role="gridcell" style="max-width: '+x+"px; width:"+x+'px;" class="'+e+'"></td></tr></table>');a(document.body).append(y);var z=y.find("td");t=1+parseInt(z.css("padding-left"))+parseInt(z.css("padding-right")),y.remove();break}for(var A=this.rtl?" "+this.toTP("MLjqui-grid-table-rtl"):"",B="<table cellspacing='0' cellpadding='0' class='"+this.toTP("MLjqui-grid-table")+A+"' id='table"+this.element.id+"'><colgroup>",C="<table cellspacing='0' cellpadding='0' class='"+this.toTP("MLjqui-grid-table")+A+"' id='pinnedtable"+this.element.id+"'><colgroup>",D=0,E=f,v=0;f>v;v++){var w=this.columns.records[v];if(w.hidden)D++,E--;else{var x=w.width;if(x<w.minwidth&&(x=w.minwidth),x>w.maxwidth&&(x=w.maxwidth),x-=t,0>x&&(x=0),g){var F=x;if(v==D&&F++,w.rowDetailscolumn){var F=F+4;C+="<col style='max-width: "+F+"px; width: "+F+"px;'>",B+="<col style='max-width: "+F+"px; width: "+F+"px;'>"}else C+="<col style='max-width: "+F+"px; width: "+F+"px;'>",B+="<col style='max-width: "+F+"px; width: "+F+"px;'>"}else C+="<col style='max-width: "+x+"px; width: "+x+"px;'>",B+="<col style='max-width: "+x+"px; width: "+x+"px;'>";u+=x}}B+="</colgroup>",C+="</colgroup>",this._hiddencolumns=!1;var G=!1;if(this.rowDetails&&this._pinnedTable&&(this._pinnedTable.find("[data-role=details]").detach(),this._table.find("[data-role=details]").detach()),0===r){var H='<tr role="row">',I=this.host.height();if(this.pageable&&(I-=this.pagerHeight,"both"===this.pagerPosition&&(I-=this.pagerHeight)),I-=this.columnsHeight,this.filterable){var J=this.filter.find(".filterrow"),K=this.filter.find(".filterrow-hidden"),L=1;K.length>0&&(L=0),I-=this.filterHeight+this.filterHeight*J.length*L}this.showstatusbar&&(I-=this.statusBarHeight),this.showAggregates&&(I-=this.aggregatesHeight),25>I&&(I=25),"hidden"!=this.hScrollBar[0].style.visibility&&(I-=this.hScrollBar.outerHeight()),("auto"===this.height||null===this.height||this.autoheight)&&(I=300);var y='<td colspan="'+this.columns.records.length+'" role="gridcell" style="border: none; min-height: '+I+"px; height: "+I+"px; max-width:"+u+"px; width:"+u+"px;",e=this.toTP("MLjqui-cell")+" "+this.toTP("MLjqui-grid-cell")+" "+this.toTP("MLjqui-item");e+=" "+this.toTP("MLjqui-center-align"),y+='" class="'+e+'">',y+=this.gridlocalization.emptydatastring,y+="</td>",H+=y,B+=H,C+=H,this.table[0].style.width=u+2+"px",d=u}for(var M=this.getRows(),N=new Array,p=0;p<i.length;p++){var q=i[p],O=q.uid;void 0===q.uid&&(q.uid=this.dataview.generatekey());var H='<tr data-key="'+O+'" role="row" id="row'+p+this.element.id+'">',P='<tr data-key="'+O+'" role="row" id="row'+p+this.element.id+'">';if(h>0&&q.level<h)var H='<tr data-role="row-group" data-key="'+O+'" role="row" id="row'+p+this.element.id+'">',P='<tr data-role="row-group" data-key="'+O+'" role="row" id="row'+p+this.element.id+'">';for(var Q=0,R=0,v=0;f>v;v++){var S=this.columns.records[v];(S.pinned||this.rtl&&this.columns.records[f-1].pinned)&&(G=!0);var x=S.width;x<S.minwidth&&(x=S.minwidth),x>S.maxwidth&&(x=S.maxwidth),x-=t,0>x&&(x=0);var e=this.toTP("MLjqui-cell")+" "+this.toTP("MLjqui-grid-cell")+" "+this.toTP("MLjqui-item");S.pinned&&(e+=" "+this.toTP("MLjqui-grid-cell-pinned")),this.sortcolumn===S.displayfield&&(e+=" "+this.toTP("MLjqui-grid-cell-sort")),this.altRows&&p%2!=0&&(e+=" "+this.toTP("MLjqui-grid-cell-alt")),this.rtl&&(e+=" "+this.toTP("MLjqui-cell-rtl"));var T="";if(h>0&&q.level<h)if(g)e+=" "+this.toTP("MLjqui-grid-cell-pinned");else{e+=" "+this.toTP("MLjqui-grid-cell-pinned"),T+=' colspan="'+f+'"';for(var F=0,U=0;f>U;U++){var V=c.columns.records[U],W=V.width;W<V.minwidth&&(x=V.minwidth),W>V.maxwidth&&(x=V.maxwidth),W-=t,0>W&&(W=0),V.hidden||(F+=W)}x=F}var y='<td role="gridcell" '+T+' style="max-width:'+x+"px; width:"+x+"px;",X='<td role="gridcell" '+T+' style="pointer-events: none; visibility: hidden; border-color: transparent; max-width:'+x+"px; width:"+x+"px;";v==f-1&&1==f&&(y+="border-right-color: transparent;",X+="border-right-color: transparent;");var Y=!1;h>0&&q.level<h&&(Y=!0),Y?this.rtl&&(e+=" "+this.toTP("MLjqui-right-align")):"left"!=S.cellsalign&&(e+="right"===S.cellsalign?" "+this.toTP("MLjqui-right-align"):" "+this.toTP("MLjqui-center-align")),this.rowinfo[q.uid]&&(this.rowinfo[q.uid].selected&&!S.rowDetailscolumn&&this.editKey!==q.uid&&"none"!==this.selectionMode&&(e+=" "+this.toTP("MLjqui-grid-cell-selected"),e+=" "+this.toTP("MLjqui-tb-fill-state-pressed")),this.rowinfo[q.uid].locked&&(e+=" "+this.toTP("MLjqui-grid-cell-locked"))),S.hidden?Y||(y+="display: none;",X+="display: none;",this._hiddencolumns=!0):(Q+=t+x,0==R&&(y+="border-left-width: 0px;",X+="border-left-width: 0px;"),R++),h>0&&g&&Y&&v>=h&&(y+="font-size: 1px; border-color: transparent;  color: transparent;",X+="font-size: 1px; border-color: transparent; color: transparent;"),S.pinned&&(y+="pointer-events: auto;",X+="pointer-events: auto;"),!Y&&S.rowDetailscolumn&&(this.rowinfo[q.uid]?this.rowinfo[q.uid].nodetails||(this.rowinfo[q.uid].expanded?(e+=this.rtl?" "+this.toTP("MLjqui-grid-group-expand-rtl"):" "+this.toTP("MLjqui-grid-group-expand"),e+=" "+this.toTP("MLjqui-icon-arrow-down")):this.rtl?(e+=" "+this.toTP("MLjqui-grid-group-collapse-rtl"),e+=" "+this.toTP("MLjqui-icon-arrow-left")):(e+=" "+this.toTP("MLjqui-grid-group-collapse"),e+=" "+this.toTP("MLjqui-icon-arrow-right"))):this.rtl?(e+=" "+this.toTP("MLjqui-grid-group-collapse-rtl"),e+=" "+this.toTP("MLjqui-icon-arrow-left")):(e+=" "+this.toTP("MLjqui-grid-group-collapse"),e+=" "+this.toTP("MLjqui-icon-arrow-right"))),(!this.autoRowHeight||this.autoRowHeight&&!S.autoCellHeight)&&(e+=" "+this.toTP("MLjqui-grid-cell-nowrap "));var Z=c._getcellvalue(S,q),$=S.cellsFormat;if(h>0&&q.level<h&&(Z=q.label,$=c.getColumn(c.groups[q.level]).cellsFormat),""!=$&&a.MLjqui.dataFormat&&(a.MLjqui.dataFormat.isDate(Z)?Z=a.MLjqui.dataFormat.formatdate(Z,$,c.gridlocalization):(a.MLjqui.dataFormat.isNumber(Z)||!isNaN(parseFloat(Z))&&isFinite(Z))&&(Z=a.MLjqui.dataFormat.formatnumber(Z,$,c.gridlocalization))),Y)this.groupsRenderer&&(Z=this.groupsRenderer(Z,q,q.level));else{if(""!=S.cellclassname&&S.cellclassname)if("string"==typeof S.cellclassname)e+=" "+S.cellclassname;else{var _=S.cellclassname(p,S.datafield,Z,q);_&&(e+=" "+_)}if(""!=S.cellsRenderer&&S.cellsRenderer){var aa=M.indexOf(q);if(-1===aa&&q.originalRecord)var aa=M.indexOf(q.originalRecord);Z=S.cellsRenderer(aa,S.datafield,Z,q),Z&&(Z.indexOf("<MLjqui-")>=0||Z.indexOf(" ng-")>=0)&&N.push({rowKey:q.uid,row:aa,column:S.datafield,value:Z,columnIndex:v})}}if(y+='" class="'+e+'">',y+=Z,y+="</td>",X+='" class="'+e+'">',X+=Z,X+="</td>",S.pinned?(P+=y,H+=y):(H+=y,G&&(P+=X)),h>0&&!g&&q.level<h)break}if(0==d&&(this.table[0].style.width=Q+2+"px",d=Q),H+="</tr>",P+="</tr>",B+=H,C+=P,this.rowinfo[q.uid]?("group"in this.rowinfo[q.uid]||(this.rowinfo[q.uid].group=Y),"row"in this.rowinfo[q.uid]||(this.rowinfo[q.uid].row=q),"details"in this.rowinfo[q.uid]||(this.rowinfo[q.uid].details=null),"detailsHeight"in this.rowinfo[q.uid]||(this.rowinfo[q.uid].detailsHeight=200),"initialized"in this.rowinfo[q.uid]||(this.rowinfo[q.uid].initialized=!1),"expanded"in this.rowinfo[q.uid]||(this.rowinfo[q.uid].expanded=!1)):this.rowinfo[q.uid]={group:Y,row:q,details:null,detailsHeight:200,initialized:!1,expanded:!1},this.serverProcessing&&(this.rowinfo[q.uid].row=q),this.rowDetails){var ba=this.rowinfo[q.uid].detailsHeight;if(this.rowinfo[q.uid])if(this.rowinfo[q.uid].expanded)var ca='<tr data-role="row-details"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+ba+"px; max-height: "+ba+"px; height: "+ba+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"';else var ca='<tr data-role="row-details" style="display: none;"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+ba+"px; max-height: "+ba+"px; height: "+ba+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"';else var ca='<tr data-role="row-details" style="display: none;"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+ba+"px; max-height: "+ba+"px; height: "+ba+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"';var e=this.toTP("MLjqui-cell")+" "+this.toTP("MLjqui-grid-cell")+" "+this.toTP("MLjqui-item");e+=" "+this.toTP("MLjqui-details"),e+=" "+this.toTP("MLjqui-reset"),ca+='" class="'+e+'"><div style="pointer-events: auto; overflow: hidden; min-height: '+ba+"px; max-height: "+ba+"px; height: "+ba+'px;"><div data-role="details"></div></div></td></tr>',B+=ca,C+=ca}}if(B+="</table>",C+="</table>",G){c.WinJS?MSApp.execUnsafeLocalFunction(function(){c.table.html(C+B)}):c.table[0].innerHTML=C+B;var da=this.table.find("#table"+this.element.id),ea=this.table.find("#pinnedtable"+this.element.id);if(ea.css("float","left"),ea.css("pointer-events","none"),da.css("float","left"),ea[0].style.position="absolute",da[0].style.position="relative",da[0].style.zIndex=s-10,ea[0].style.zIndex=s+10,this._table=da,this._table[0].style.left="0px",this._pinnedTable=ea,this._pinnedTable[0].style.left="0px",this._pinnedTable[0].style.width=d+"px",this._table[0].style.width=d+"px",this.rtl&&d>parseInt(this.element.style.width)&&this._haspinned&&(this._pinnedTable[0].style.left=3-d+parseInt(this.element.style.width)+"px"),this.rowDetails)for(var p=0;r>p;p++){var q=i[p],O=q.uid;if(this.rowinfo[O].details){var fa=a(this._table.children()[1]).children("[data-key="+O+"]"),ga=a(this._pinnedTable.children()[1]).children("[data-key="+O+"]");if(fa){var ha=ga.next(),ia=a(a(ha).children().children());ia.children().detach(),ia.append(this.rowinfo[q.uid].details)}}}}else{c.WinJS?MSApp.execUnsafeLocalFunction(function(){c.table.html(B)}):c.table[0].innerHTML=B;var U=this.table.find("#table"+this.element.id);this._table=U,a.MLjqui.browser.msie&&a.MLjqui.browser.version<10&&(this._table[0].style.width=d+"px"),0===r&&(this._table[0].style.width=2+d+"px")}if(0===r&&(this._table[0].style.tableLayout="auto",this._pinnedTable&&(this._pinnedTable[0].style.tableLayout="auto")),N&&N.length>0){this._table[0].rows;a.each(N,function(){var b=(this.row,this.rowKey),d=(this.column,this.columnIndex),e=c._getuirow(b);if(e){var f=e[0].cells[d];a.MLjqui.angularCompile&&a.MLjqui.angularCompile(f,"<div>"+f.innerHTML+"</div>")}})}this.rendered&&this.rendered()}},getcolumnindex:function(a){var b=this.getColumn(a),c=this.columns.records.indexOf(b);return c},setcolumnindex:function(b,c,d){var e=this.getColumn(b);if(!(e.pinned||e.hidden||e.checkboxcolumn||e.grouped)){var f=this.columns.records.indexOf(e);this.columns.records.splice(f,1),this.columns.records.splice(c,0,e);var g=0,h=this.headerZIndex;this.columnsrow.children().detach();var i=this.toThemeProperty("MLjqui-grid-cell");i+=" "+this.toThemeProperty("MLjqui-grid-cell-pinned"),i+=" "+this.toThemeProperty("MLjqui-item");var j=this;if(void 0!=j.filterrow){a(j.filterrow.children()[0])}this.columnsrow[0].cells=[];var k=!1;if(a.each(this.columns.records,function(a,b){var c=this.uielement;j.columnsrow.append(c),j.rtl?c.css("z-index",h++):c.css("z-index",h--);var d=j.rtl?250+h+1:250+h-1;this.pinned&&c.css("z-index",d);var e=this.width;c.css("left",g),j.columnsrow[0].cells[j.columnsrow[0].cells.length]=c[0],this.hidden&&(k=!0),this.hidden&&this.hideable||(g+=e)}),this.groupable){var l=this.groups.length;l>0&&f-l>=0&&(f-=l,c-=l)}this.rowDetails&&f-1>=0&&(f--,c--),"checkbox"==this.selectionMode&&f-1>=0&&(f--,c--);var e=this._columns[f];this._columns.splice(f,1),this._columns.splice(c,0,e),this.resize(),this._rendercolumnGroups(),this._raiseEvent("columnReordered",{dataField:e.datafield,oldIndex:f,newIndex:c})}},_pinnedColumnsLength:function(){var b=0;return a.each(this.columns.records,function(){this.pinned&&b++,this.grouped&&b++}),this.rowDetails&&b++,"checkbox"==this.selectionMode&&b++,b},_handlecolumnsReorder:function(){var b=this,c=-1,d=!1;if(b.columnsReorder){var e="mousemove.reorder"+this.element.id,f="mousedown.reorder"+this.element.id,g="mouseup.reorder"+this.element.id,h=!1;this.isTouchDevice()&&this.touchmode!==!0&&(h=!0,e=a.MLjqui.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,f=a.MLjqui.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,g=a.MLjqui.mobile.getTouchEventName("touchend")+".reorder"+this.element.id),this.removeHandler(a(document),e),this.addHandler(a(document),e,function(e){if(b.resizing)return!0;if(null!=b.reordercolumn){var f=parseInt(e.pageX),g=parseInt(e.pageY);if(h){var i=b.getTouches(e),j=i[0];void 0!=j&&(f=parseInt(j.pageX),g=parseInt(j.pageY))}var k=b.host.coord(),l=parseInt(k.left),m=parseInt(k.top);void 0!=b.dragmousedownoffset&&null!=b.dragmousedownoffset||(b.dragmousedownoffset={left:0,top:0});var n=parseInt(f)-parseInt(b.dragmousedownoffset.left),o=parseInt(g)-parseInt(b.dragmousedownoffset.top);if(b.reordercolumn.css({left:n+"px",top:o+"px"}),d=!1,f>=l&&f<=l+b.host.width()&&g>=m&&g<=m+b.host.height()&&(d=!0),c=-1,d){b.reordercolumnicon.removeClass(b.toThemeProperty("MLjqui-grid-dragcancel-icon")),b.reordercolumnicon.addClass(b.toThemeProperty("MLjqui-grid-drag-icon"));var p=b.columnsheader.coord(),q=p.top+b.columnsheader.height();if(null!=b.columnsdropline)if(g>=p.top&&q>=g){if(c=b._handlereordercolumnsdroplines(f),b.columnGroups&&-1!=c){var r=0;r+=b._pinnedColumnsLength();var s=c.index;if(s>=r){var t=b.columns.records[s];if(void 0!=t){var u=b.columns.records.indexOf(b.getColumn(t.datafield));if(null==t.datafield)var u=b.columns.records.indexOf(b.getcolumnbytext(t.text));var v=a.data(b.reordercolumn[0],"reorderrecord"),w=b.columns.records.indexOf(b.getColumn(v)),x=t;if(u>w&&"before"==c.position&&(x=b.columns.records[u-1]),x.columngroup!=b.getColumn(v).columngroup)return void b.columnsdropline.hide()}}}}else b.columnsdropline.fadeOut("slow")}else null!=b.columnsdropline&&b.columnsdropline.fadeOut("slow"),b.reordercolumnicon.removeClass(b.toThemeProperty("MLjqui-grid-drag-icon")),b.reordercolumnicon.addClass(b.toThemeProperty("MLjqui-grid-dragcancel-icon"));if(e.preventDefault&&(e.preventDefault(),e.stopPropagation()),h)return e.preventDefault(),e.stopPropagation(),!1}}),this.columnsbounds=new Array,this.removeHandler(a(document),f),this.addHandler(a(document),f,function(c){if(b.resizing)return!0;b.columnsbounds=new Array;var d=b.host.coord().left,e=b.host.coord().top;b.showtoolbar&&(e+=b.toolbarHeight),b.filter&&(e+=b.filter.height());var f=0;a.each(b.columns.records,function(c){var g=this;if(g.hidden)return b.columnsbounds[b.columnsbounds.length]={top:e,column:g,left:d,width:0,height:2},!0;0==f&&(d=b.rtl?parseInt(b.host.coord().left)-b.hScrollInstance.max+b.hScrollInstance.value:parseInt(b.host.coord().left)-b.hScrollInstance.value),f++;var h=2+b.columnsHeight;b.columnshierarchy&&(e=a(g.uielement).coord().top,h=a(g.uielement).height()),b.columnsbounds[b.columnsbounds.length]={top:e,column:g,left:d,width:g.width,height:h},d+=g.width})}),this.removeHandler(a(document),g),this.addHandler(a(document),g,function(e){if(b.resizing)return!0;b.__drag=!1,a(document.body).removeClass("MLjqui-disableselect");var f=parseInt(e.pageX),g=parseInt(e.pageY);if(h){var i=b.getTouches(e),j=i[0];f=parseInt(j.pageX),g=parseInt(j.pageY)}var k=b.host.coord(),l=(parseInt(k.left),parseInt(k.top));if(b.showtoolbar&&(l+=b.toolbarHeight),b.columndragstarted=!1,b.dragmousedown=null,null!=b.reordercolumn){var m=a.data(b.reordercolumn[0],"reorderrecord"),n=b.columns.records.indexOf(b.getColumn(m));b.reordercolumn.remove(),b.reordercolumn=null;var o=0;if(o+=b._pinnedColumnsLength(),null!=m){if(d&&-1!=c){var p=c.index;if(p>=o){var q=b.columns.records[p];if(void 0!=q){var r=b.columns.records.indexOf(b.getColumn(q.datafield));if(null==q.datafield)var r=b.columns.records.indexOf(b.getcolumnbytext(q.text));if(b.columnGroups){var s=q;if(r>n&&"before"==c.position&&(s=b.columns.records[r-1]),s.columngroup!=b.getColumn(m).columngroup)return void(null!=b.columnsdropline&&(b.columnsdropline.remove(),b.columnsdropline=null))}r>n?"before"==c.position?b.setcolumnindex(m,r-1):b.setcolumnindex(m,r):n>r&&b.setcolumnindex(m,r)}}}null!=b.columnsdropline&&(b.columnsdropline.remove(),b.columnsdropline=null)}}})}},getcolumnbytext:function(b){var c=null;return this.columns.records&&a.each(this.columns.records,function(){return this.text==b?(c=this,!1):void 0}),c},_handlereordercolumnsdroplines:function(b){var c=this,d=-1,e=c._pinnedColumnsLength(),f=parseInt(c.host.coord().left),g=f+c.host.width(),h="hidden"!=c.vScrollBar.css("visibility")?19:0;return c.rtl||(h=0),a.each(c.columnsbounds,function(a){if(a>=e){if(0==this.width)return!0;if(b<=this.left+this.width/2)return b>g?(c.columnsdropline.fadeOut(),!1):(c.columnsdropline.css("left",h+parseInt(this.left)+"px"),c.columnsdropline.css("top",parseInt(this.top)+"px"),c.columnsdropline.height(this.height),c.columnsdropline.fadeIn("slow"),d={index:a,position:"before"},!1);if(b>=this.left+this.width/2){if(this.left+this.width>g)return c.columnsdropline.fadeOut(),!1;c.columnsdropline.css("left",h+1+this.left+this.width),c.columnsdropline.css("top",this.top),c.columnsdropline.height(this.height),c.columnsdropline.fadeIn("slow"),d={index:a,position:"after"}}}}),d},_createreordercolumn:function(b,c,d){var e=this,f=c;e.reordercolumn&&e.reordercolumn.remove(),e.columnsdropline&&e.columnsdropline.remove(),e.reordercolumn=a("<div></div>");var g=b.clone();e.reordercolumn.css("z-index",999999),g.css("border-width","1px"),g.css("opacity","0.4");var h=a(g.find("."+e.toThemeProperty("MLjqui-grid-column-menubutton")));h.length>0&&h.css("display","none");var i=a(g.find(".MLjqui-icon-close"));i.length>0&&i.css("display","none"),e.reordercolumnicon=a('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>'),e.reordercolumnicon.addClass(e.toThemeProperty("MLjqui-grid-drag-icon")),e.reordercolumn.css("float","left"),e.reordercolumn.css("position","absolute");e.host.coord();g.width(b.width()+16),e.reordercolumn.append(g),e.reordercolumn.height(b.height()),e.reordercolumn.width(g.width()),e.reordercolumn.append(e.reordercolumnicon),a(document.body).append(e.reordercolumn),g.css("margin-left",0),g.css("left",0),g.css("top",0),e.reordercolumn.css("left",f.left+e.dragmousedown.left),e.reordercolumn.css("top",f.top+e.dragmousedown.top),void 0!=d&&d&&(e.columnsdropline=a('<div style="z-index: 9999; display: none; position: absolute;"></div>'),e.columnsdropline.width(2),e.columnsdropline.addClass(e.toThemeProperty("MLjqui-grid-group-drag-line")),a(document.body).append(e.columnsdropline))},_handlecolumnsdragreorder:function(b,c){this.reordercolumn&&this.reordercolumn.remove(),this.columnsdropline&&this.columnsdropline.remove(),this.dragmousedown=null,this.dragmousedownoffset=null,this.columndragstarted=!1,this.reordercolumn=null;var d,e=this,f=!1;this.isTouchDevice()&&this.touchmode!==!0&&(f=!0);var g="mousedown.drag",d="mousemove.drag";f?(g=a.MLjqui.mobile.getTouchEventName("touchstart")+".drag",d=a.MLjqui.mobile.getTouchEventName("touchmove")+".drag"):this.addHandler(c,"dragstart",function(a){return!1}),this.addHandler(c,g,function(c){if(0==b.draggable)return!0;if(e.resizing)return!0;e.__drag=!0;var d=c.pageX,g=c.pageY;if(f){var h=e.getTouches(c),i=h[0];d=i.pageX,g=i.pageY}e.dragmousedown={left:d,top:g};var j=a(c.target).coord();return e.dragmousedownoffset={left:parseInt(d)-parseInt(j.left),top:parseInt(g-j.top)},c.preventDefault&&c.preventDefault(),!0}),this.addHandler(c,d,function(g){if(!b.draggable)return!0;if(void 0==b.datafield)return!0;if(b.pinned)return!0;if(e.resizing)return!0;if(e.dragmousedown){var h=g.pageX,i=g.pageY;if(f){var j=e.getTouches(g),k=j[0];void 0!=k&&(h=k.pageX,i=k.pageY)}if(d={left:h,top:i},!e.columndragstarted&&null==e.reordercolumn){var l=Math.abs(d.left-e.dragmousedown.left),m=Math.abs(d.top-e.dragmousedown.top);(l>3||m>3)&&(e._createreordercolumn(c,d,!0),a(document.body).addClass("MLjqui-disableselect"),a.data(e.reordercolumn[0],"reorderrecord",b.datafield))}}})},getTouches:function(b){return a.MLjqui.mobile.getTouches(b)},_handlecolumnsResize:function(){var b=this;if(this.columnsResize){var c=!1;b.isTouchDevice()&&(c=!0);var d="mousemove.resize"+this.element.id,e="mousedown.resize"+this.element.id,f="mouseup.resize"+this.element.id;if(c)var d=a.MLjqui.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,e=a.MLjqui.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,f=a.MLjqui.mobile.getTouchEventName("touchend")+".resize"+this.element.id;this.removeHandler(a(document),d),this.addHandler(a(document),d,function(d){if(null!=b.resizablecolumn&&!b.disabled&&b.resizing&&null!=b.resizeline){var e=(b.resizablecolumn.columnelement,b.host.coord()),f=parseInt(b.resizestartline.coord().left),g=f-b._startcolumnwidth,h=b.resizablecolumn.column.minwidth;h="auto"==h?0:parseInt(h);var i=b.resizablecolumn.column.maxwidth;i="auto"==i?0:parseInt(i);var j=d.pageX;if(c){var k=a.MLjqui.mobile.getTouches(d),l=k[0];j=l.pageX}g+=h;var m=i>0?f+i:0,n=0==i?!0:b._startcolumnwidth+j-f<i;if(b.rtl)var n=!0;if(n)if(b.rtl){if(j>=e.left&&j<=e.left+b.host.width()&&(b.resizeline.css("left",j),c))return!1}else if(j>=e.left&&j>=g&&(0!=m&&d.pageX<m?b.resizeline.css("left",j):0==m&&b.resizeline.css("left",j),c))return!1}return c||null==b.resizablecolumn?void 0:!1}),this.removeHandler(a(document),e),this.addHandler(a(document),e,function(c){if(null!=b.resizablecolumn&&!b.disabled){var d=b.resizablecolumn.columnelement;if(d.coord().top+d.height()+5<c.pageY)return void(b.resizablecolumn=null);if(d.coord().top-5>c.pageY)return void(b.resizablecolumn=null);b._startcolumnwidth=b.resizablecolumn.column.width,b.resizablecolumn.column._width=null,a(document.body).addClass("MLjqui-disableselect"),a(document.body).addClass("MLjqui-position-reset"),b._mouseDownResize=new Date,b.resizing=!0,b._resizecolumn=b.resizablecolumn.column,b.resizeline=b.resizeline||a('<div style="position: absolute;"></div>'),b.resizestartline=b.resizestartline||a('<div style="position: absolute;"></div>'),b.resizebackground=b.resizebackground||a('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'),b.resizebackground.css("opacity",.01),b.resizebackground.css("cursor","col-resize"),b.resizeline.css("cursor","col-resize"),b.resizestartline.css("cursor","col-resize"),b.resizeline.addClass(b.toThemeProperty("MLjqui-grid-column-resizeline")),b.resizestartline.addClass(b.toThemeProperty("MLjqui-grid-column-resizestartline")),a(document.body).append(b.resizeline),a(document.body).append(b.resizestartline),a(document.body).append(b.resizebackground);var e=b.resizablecolumn.columnelement.coord();b.resizebackground.css("left",b.host.coord().left),b.resizebackground.css("top",b.host.coord().top),b.resizebackground.width(b.host.width()),b.resizebackground.height(b.host.height()),b.resizebackground.css("z-index",999999999);var f=function(a){b.rtl?a.css("left",parseInt(e.left)):a.css("left",parseInt(e.left)+b._startcolumnwidth);var c=0,d=b.showtoolbar?b.toolbarHeight:0;c+=d;var f=b.showstatusbar?b.statusBarHeight:0;c+=f;var g=b.showAggregates?b.aggregatesHeight:0;c+=g,b.pageable&&"bottom"!=b.pagerPosition&&(c+=b.pagerHeight),b.filterable&&(c+=b.filter.height());var h=0;b.pageable&&"top"!=b.pagerPosition&&(h=b.pagerHeight);var i="hidden"!=b.hScrollBar.css("visibility")?b.scrollBarSize:0;a.css("top",parseInt(e.top)),a.css("z-index",9999999999),b.columnGroups?a.height(b.host.height()+b.resizablecolumn.columnelement.height()-h-c-i-b.columnGroupslevel*b.columnsHeight):a.height(b.host.height()-h-c-i),a.show("fast")};f(b.resizeline),f(b.resizestartline),b.dragmousedown=null}});var g=function(){if(a(document.body).removeClass("MLjqui-disableselect"),a(document.body).removeClass("MLjqui-position-reset"),b.resizing){b._mouseUpResize=new Date;var c=b._mouseUpResize-b._mouseDownResize;if(200>c)return b.resizing=!1,void(null!=b._resizecolumn&&null!=b.resizeline&&"block"==b.resizeline.css("display")&&(b._resizecolumn=null,b.resizeline.hide(),b.resizestartline.hide(),b.resizebackground.remove()));if(b.resizing=!1,!b.disabled){var d=b.host.width();if("hidden"!=b.vScrollBar[0].style.visibility&&(d-=20),0>d&&(d=0),null!=b._resizecolumn&&null!=b.resizeline&&"block"==b.resizeline.css("display")){var e=parseInt(b.resizeline.css("left")),f=parseInt(b.resizestartline.css("left")),g=b._startcolumnwidth+e-f;if(b.rtl)var g=b._startcolumnwidth-e+f;var h=b._resizecolumn.width;b._resizecolumn.width=g,void 0!=b._resizecolumn._percentagewidth&&(b._resizecolumn._percentagewidth=g/d*100);for(var i=0;i<b._columns.length;i++)if(b._columns[i].datafield===b._resizecolumn.datafield){b._columns[i].width=b._resizecolumn.width;break}var j=(b.hScrollBar[0].style.visibility,b._resizecolumn.displayfield);b._updatecolumnwidths(),b.refresh(),b._resizecolumn=null,b.resizeline.hide(),b.resizestartline.hide(),b.resizebackground.remove(),b.resizablecolumn=null,b._raiseEvent("columnResized",{dataField:j,oldWidth:h,newWidth:g})}else b.resizablecolumn=null}}};try{if(""!=document.referrer||window.frameElement){var h=null;if(null!=window.top&&window.top!=window.self&&window.parent&&document.referrer&&(h=document.referrer),h&&-1!=h.indexOf(document.location.host)){var i=function(a){g()};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",i,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",i)}}}catch(j){}this.removeHandler(a(document),f),this.addHandler(a(document),f,function(c){var d=a.data(document.body,"contextmenu"+b.element.id);return null!=d&&b.autoshowcolumnsmenubutton?!0:void g()})}},_updatecolumnwidths:function(){var b=this.host.width(),c=b;"hidden"!==this.vScrollBar.css("visibility")&&this.scrollBarSize>0&&(b-=parseInt(this.scrollBarSize)+6,c=b);var d="";if(void 0!=this.columns&&void 0!=this.columns.records){var e=this,f=!1;a.each(this.columns.records,function(a,f){if(!this.hidden)if(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth){var f=0,g="hidden"==e.vScrollBar[0].style.visibility?0:e.scrollBarSize+5;0==e.scrollBarSize&&(g=0),f=parseFloat(this.width)*c/100,void 0!=this._percentagewidth&&(f=parseFloat(this._percentagewidth)*c/100),f<this.minwidth&&"auto"!=this.minwidth&&(f=this.minwidth),f>this.maxwidth&&"auto"!=this.maxwidth&&(f=this.maxwidth),b-=Math.round(f)}else"auto"==this.width||this._width?d+=this.text:b-=this.width});var g=this.columnsheader.find("#columntable"+this.element.id);if(0!=g.length){var h=0,i=g.find(".MLjqui-grid-column-header"),j=0;a.each(this.columns.records,function(g,k){var l=a(i[g]),m=!1,n=this.width,o=this.width;if(-1==this.width.toString().indexOf("%")&&void 0==this._percentagewidth||(n=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*c/100:parseFloat(this.width)*c/100,n=Math.round(n),m=!0),"auto"==this.width||this._width||m)if(m)n<this.minwidth&&"auto"!=this.minwidth&&(n=this.minwidth,this.width=n),n>this.maxwidth&&"auto"!=this.maxwidth&&(n=this.maxwidth,this.width=n),parseInt(l[0].style.width)!=n&&(l.width(n),this.width=n);else{var p=Math.floor(b*(this.text.length/d.length));isNaN(p)&&(p=this.minwidth);var q=b*(this.text.length/d.length)-p;h+=q,h>=1&&(h-=1,p++),h>=.5&&g==e.columns.records.length-1&&p++,0>p&&($element=a("<span>"+this.text+"</span>"),a(document.body).append($element),p=10+$element.width(),$element.remove()),p<this.minwidth&&(p=this.minwidth),p>this.maxwidth&&(p=this.maxwidth),this._width="auto",this.width=p,l.width(this.width)}else parseInt(l[0].style.width)!=this.width&&l.width(this.width);parseInt(l[0].style.left)!=j&&l.css("left",j),this.hidden||(j+=this.width),this._requirewidthupdate=!0,o!==this.width&&(f=!0)}),this.columnsheader.width(2+j),g.width(this.columnsheader.width()),this._resizecolumnGroups(),f&&this._renderrows(),this.showAggregates&&this._refreshcolumnsaggregates()}}},_rendercolumnheaders:function(){var b=this;if(!this._updating){this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var c=a('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');c[0].cells=new Array;var d=0,e="",f=this.host.width(),g=f,h=new Array,i=new Array;if(a.each(this.columns.records,function(a,c){if(!this.hidden)if("auto"==this.width||this._width)e+=this.text;else if(this.width<this.minwidth&&"auto"!=this.minwidth)f-=this.minwidth;else if(this.width>this.maxwidth&&"auto"!=this.maxwidth)f-=this.maxwidth;else if(-1!=this.width.toString().indexOf("%")){var c=0;c=parseFloat(this.width)*g/100,c<this.minwidth&&"auto"!=this.minwidth&&(c=this.minwidth),c>this.maxwidth&&"auto"!=this.maxwidth&&(c=this.maxwidth),f-=c}else"string"==typeof this.width&&(this.width=parseInt(this.width)),f-=this.width;this.pinned||this.grouped||this.checkboxcolumn?(b._haspinned&&(this.pinned=!0),h[h.length]=this):i[i.length]=this}),this.rtl){var j=0;h.reverse();for(var k=this.columns.records.length-1;k>=this.columns.records.length-h.length;k--)this.columns.replace(k,h[j++]);for(var l=0;l<i.length;l++)this.columns.replace(l,i[l])}else{for(var k=0;k<h.length;k++)this.columns.replace(k,h[k]);for(var l=0;l<i.length;l++)this.columns.replace(h.length+l,i[l])}var m=this.headerZIndex,n=b.columnsHeight,o=function(a,c){var d=b.columnGroupslevel*b.columnsHeight;return d-=c.level*b.columnsHeight},p=0;a.each(this.columns.records,function(h,i){this.height=b.columnsHeight,b.columnGroups&&b.columnGroups.length&&(this.height=o(this.datafield,this),n=this.height);var j=b.toTP("MLjqui-grid-column-header")+" "+b.toTP("MLjqui-widget-header");b.rtl&&(j+=" "+b.toTP("MLjqui-grid-column-header-rtl")),b.enableBrowserSelection||(j+=" "+b.toTP("MLjqui-disableselect"));var k=self.rtl?250+m+1:250+m-1,l=b.rtl?m++:m--,q=a('<div role="columnheader" style="z-index: '+l+';position: absolute; height: 100%;" class="'+j+'"><div style="height: 100%; width: 100%;"></div></div>');b.rtl&&0===h&&(q[0].style.borderLeftColor="transparent"),b.columnGroups&&(q[0].style.height=n+"px",q[0].style.bottom="0px",this.pinned&&(q[0].style.zIndex=k)),this.uielement=q,this.element=q,""!=this.classname&&this.classname&&q.addClass(this.classname);var r=this.width,s=!1;if(null===this.width&&(this.width="auto"),-1==this.width.toString().indexOf("%")&&void 0==this._percentagewidth||(r=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*g/100:parseFloat(this.width)*g/100,r=Math.round(r),s=!0),"auto"==this.width||this._width||s)if(s)r<this.minwidth&&"auto"!=this.minwidth&&(r=this.minwidth),r>this.maxwidth&&"auto"!=this.maxwidth&&(r=this.maxwidth),void 0!=this._percentagewidth&&-1==this.width.toString().indexOf("%")||(this._percentagewidth=this.width),q.width(r),this.width=r;else{var t=Math.floor(f*(this.text.length/e.length)),u=f*(this.text.length/e.length)-t;p+=u,p>=1&&(p-=1,t++),p>=.5&&h==b.columns.records.length-1&&t++,isNaN(t)&&(t=this.minwidth),0>t&&($element=a("<span>"+this.text+"</span>"),a(document.body).append($element),t=10+$element.width(),$element.remove()),t<this.minwidth&&(t=this.minwidth),t>this.maxwidth&&(t=this.maxwidth),this._width="auto",this.width=parseInt(t),r=this.width,q.width(this.width)}else r<this.minwidth&&"auto"!=this.minwidth&&(r=this.minwidth),r>this.maxwidth&&"auto"!=this.maxwidth&&(r=this.maxwidth),q[0].style.width=parseInt(r)+"px";this.hidden&&q.css("display","none");var v=a(q.children()[0]);c[0].cells[h]=q[0];var w=!1,x=!1,y=null!=this.renderer?this.renderer(this.text,this.align,n):b._rendercolumnheader(this.text,this.align,n,b);if(null==y&&(y=b._rendercolumnheader(this.text,this.align,n,b)),null!=this.renderer&&(y=a(y)),w=!0,b.WinJS?MSApp.execUnsafeLocalFunction(function(){v.append(a(y))}):this.renderer?v.append(a(y)):y&&(v[0].innerHTML=y),null!=y){var z=a('<div class="iconscontainer" style="height: '+n+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+b.toTP("MLjqui-widget-header")+'" style="height: '+n+'px; float: right; display: none; width: 16px;"><div class="'+b.toTP("MLjqui-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+b.toTP("MLjqui-widget-header")+'" style="height: '+n+'px; float: right; display: none; width: 16px;"><div class="'+b.toTP("MLjqui-grid-column-sortascbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+b.toTP("MLjqui-widget-header")+'" style="height: '+n+'px; float: right; display: none; width: 16px;"><div class="'+b.toTP("MLjqui-grid-column-sortdescbutton")+'" style="width: 100%; height:100%;"></div></div></div>');
v.append(z);var A=z.children();this.sortasc=A[1],this.sortdesc=A[2],this.filtericon=A[0],this.iconscontainer=z,b.rtl&&(z.css("margin-left","0px"),z.css("left","0px"),a(this.sortasc).css("float","left"),a(this.filtericon).css("float","left"),a(this.sortdesc).css("float","left"))}c.append(q),b.columnsReorder&&this.draggable&&b._handlecolumnsdragreorder&&b._handlecolumnsdragreorder(this,q);var B=this;if(b.addHandler(q,"click",function(a){return B.checkboxcolumn?!0:(b._togglesort&&(b._loading||b._togglesort(B)),void a.preventDefault())}),b.columnsResize&&!x){var C=!1,D="mousemove";b.isTouchDevice()&&(C=!0,D=a.MLjqui.mobile.getTouchEventName("touchstart")),b.addHandler(q,D,function(c){if(!B.resizable)return b.resizablecolumn=null,!0;var d=parseInt(c.pageX),e=5,f=parseInt(q.coord().left);if(b.hasTransform&&(f=a.MLjqui.utilities.getOffset(q).left),b._handlecolumnsResize){if(C){var g=a.MLjqui.mobile.getTouches(c),h=g[0];return d=h.pageX,e=40,d>=f+B.width-e?(b.resizablecolumn={columnelement:q,column:B},q.css("cursor","col-resize")):(q.css("cursor",""),b.resizablecolumn=null),!0}var i=B.width;if(b.rtl&&(i=0),d>=f+i-e){if(f+i+e>=d)return b.resizablecolumn={columnelement:q,column:B},q.css("cursor","col-resize"),!1;q.css("cursor",""),b.resizablecolumn=null}else q.css("cursor",""),f+i-e>d&&(B._animating||B._menuvisible||q.mouseenter()),b.resizablecolumn=null}})}if(q.css("left",d),this.hidden||(d+=r),B.rendered){var E=B.rendered(a(v[0].firstChild),B.align,n);E&&null!=z&&z.hide()}}),d>0?this.columnsheader.width(2+d):this.columnsheader.width(d),this.columnsrow=c,b.columnsheader.append(c),c.width(d),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsReorder&&this._handlecolumnsReorder(),this._handlecolumnsResize&&this._handlecolumnsResize(),this.columnGroups&&this._rendercolumnGroups()}},_rendercolumnGroups:function(){if(this.columnGroups){for(var b=0,c=0;c<this.columns.records.length;c++)this.columns.records[c].pinned&&b++;var d=this.headerZIndex-b+this.columns.records.length,e=this,f=e.toTP("MLjqui-grid-column-header")+" "+e.toTP("MLjqui-grid-columngroup-header")+" "+e.toTP("MLjqui-widget-header");e.rtl&&(f+=" "+e.toTP("MLjqui-grid-columngroup-header-rtl"));var g=this.columnsheader.find("#columntable"+this.element.id);g.find("MLjqui-grid-columngroup-header").remove();for(var h=0;h<this.columnGroupslevel-1;h++)for(var c=0;c<this.columnGroups.length;c++){var i=this.columnGroups[c],j=i.level;if(j===h){var k=j*this.columnsHeight,l=99999;if(i.groups){var m=function(a){for(var b=0,c=0;c<a.groups.length;c++){var d=a.groups[c];d.groups?b+=m(d):d.hidden||(b+=d.width,l=Math.min(parseInt(d.element[0].style.left),l))}return b};i.width=m(i),i.left=l;var n=this.columnsHeight,o=d--,p=a('<div role="columnheader" style="z-index: '+o+';position: absolute;" class="'+f+'"></div>'),q=a(this._rendercolumnheader(i.text,i.align,this.columnsHeight,this));p.append(q),p[0].style.left=l+"px",0===l&&(p[0].style.borderLeftColor="transparent"),p[0].style.top=k+"px",p[0].style.height=n+"px",p[0].style.width=-1+i.width+"px",g.append(p),i.element=p}}}}},_resizecolumnGroups:function(){if(this.columnGroups)for(var a=0;a<this.columnGroups.length;a++){var b=this.columnGroups[a],c=b.level,d=c*this.columnsHeight,e=99999;if(b.groups){var f=function(a){for(var b=0,c=0;c<a.groups.length;c++){var d=a.groups[c];d.groups?b+=f(d):d.hidden||(b+=d.width,e=Math.min(parseInt(d.element[0].style.left),e))}return b};b.width=f(b),b.left=e;var g=this.columnsHeight,h=b.element;h[0].style.left=e+"px",h[0].style.top=d+"px",h[0].style.height=g+"px",h[0].style.width=-1+b.width+"px"}}},_removecolumnhandlers:function(b){var c=this,d=a(b.element);if(d.length>0){c.removeHandler(d,"mouseenter"),c.removeHandler(d,"mouseleave");var e=a(b.filtericon);c.removeHandler(e,"mousedown"),c.removeHandler(e,"click"),c.removeHandler(d,"click")}},_calculateaggregate:function(a,b,c,d){if(!a.datafield)return null;var e=a.aggregates;if(e||(e=b),e){for(var f=new Array,g=0;g<e.length;g++)"count"!=e[g]&&(f[f.length]=a.cellsFormat);if(this.source&&this.source.getAggregatedData){void 0==d&&(d=this.getRows(),this.dataViewRecords&&(d=this.dataViewRecords));var h=d,i=-1;if(this.treeGrid){var j=new Array,k=function(a){for(var b=0;b<a.length;b++)void 0!=a[b]&&(-1==i&&(i=a[b].level),a[b].aggregate||j.push(a[b]),!a[b].leaf&&a[b].records&&a[b].records.length>0&&k(a[b].records))};k(d),d=j}if(this.treeGrid&&this.filterable&&this.dataview.filters.length>0){for(var l=new Array,g=0;g<d.length;g++)d[g]&&d[g]._visible!==!1&&l.push(d[g]);d=l;for(var m=new Array,g=0;g<h.length;g++)h[g]&&h[g]._visible!==!1&&m.push(h[g]);h=m}if(void 0==c||1==c){var n=this.source.getAggregatedData([{name:a.datafield,aggregates:e,formatStrings:f}],this.gridlocalization,d,i);if(this.treeGrid){var o=this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0;if((0==o||i>=o)&&n&&(void 0!=n[a.datafield].sum||void 0!=n[a.datafield].avg)){var p=this.source.getAggregatedData([{name:a.datafield,aggregates:e,formatStrings:f}],this.gridlocalization,h,i);void 0!=n[a.datafield].sum&&(n[a.datafield].sum=p[a.datafield].sum),void 0!=n[a.datafield].avg&&(n[a.datafield].avg=p[a.datafield].avg)}}return n}var n=this.source.getAggregatedData([{name:a.datafield,aggregates:e}],this.gridlocalization,d,i);if(this.treeGrid&&n&&(void 0!=n[a.datafield].sum||void 0!=n[a.datafield].avg)){var o=this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0;if(0==o||i>=o){var p=this.source.getAggregatedData([{name:a.datafield,aggregates:e}],this.gridlocalization,h,i);void 0!=n[a.datafield].sum&&(n[a.datafield].sum=p[a.datafield].sum),void 0!=n[a.datafield].avg&&(n[a.datafield].avg=p[a.datafield].avg)}}return n}}return null},getcolumnaggregateddata:function(a,b,c,d){var e=this.getColumn(a);if(!e)return"";var f=void 0==c||0==c?!1:c;if(null==b)return"";var g=e.aggregates;e.aggregates=null;var h=this._calculateaggregate(e,b,f,d),i={};return h&&(i=h[a],e.aggregates=g),i},_updatecolumnaggregates:function(b,c,d){var e=this;if(c)if(d.children().remove(),d.html(""),b.aggregatesRenderer){if(c){var f=b.aggregatesRenderer(c[b.datafield],b,d,this.getcolumnaggregateddata(b.datafield,b.aggregates),"aggregates");d.html(f)}}else a.each(c,function(){var b=this;for(g in b){var c=a('<div style="position: relative; margin: 4px; overflow: hidden;"></div>'),f=g;f=e._getaggregatename(f),c.html(f+":"+b[g]),e.rtl&&c.addClass(e.toThemeProperty("MLjqui-rtl")),d.append(c)}});else if(d.children().remove(),d.html(""),b.aggregatesRenderer){var g={};b.aggregates&&(g=this.getcolumnaggregateddata(b.datafield,b.aggregates));var f=b.aggregatesRenderer({},b,d,null);d.html(f)}},_getaggregatetype:function(a){switch(a){case"min":case"max":case"count":case"avg":case"product":case"var":case"varp":case"stdev":case"stdevp":case"sum":return a}var b=a;for(var c in a){b=c;break}return b},_getaggregatename:function(a){var b=a;switch(a){case"min":b="Min";break;case"max":b="Max";break;case"count":b="Count";break;case"avg":b="Avg";break;case"product":b="Product";break;case"var":b="Var";break;case"stdevp":b="StDevP";break;case"stdev":b="StDev";break;case"varp":b="VarP";case"sum":b="Sum"}if(a===b&&"string"!=typeof b)for(var c in a){b=c;break}return b},_updatecolumnsaggregates:function(){var b=this.getRows();this.dataViewRecords&&(b=this.dataViewRecords);var c=this.columns.records.length;if(void 0!=this.aggregates[0].cells)for(var d=0;c>d;d++){var e=a(this.aggregates[0].cells[d]),f=this.columns.records[d],g=this._calculateaggregate(f,null,!0,b);this._updatecolumnaggregates(f,g,e)}},_refreshcolumnsaggregates:function(){var b=this.columns.records.length;if(void 0!=this.aggregates[0].cells)for(var c=0,d=0;b>d;d++){var e=a(this.aggregates[0].cells[d]),f=this.columns.records[d];e&&(e.width(f.width),e[0].style.left=c+"px",f.hidden&&f.hideable?e.css("display","none"):c+=f.width)}},_updateaggregates:function(){var b=a('<div style="position: relative;" id="statusrow'+this.element.id+'"></div>'),c=0,d=this.columns.records.length,e=this.toThemeProperty("MLjqui-grid-cell");this.rtl&&(e+=" "+this.toThemeProperty("MLjqui-grid-cell-rtl"),c=0,b.css("border-left-width","0px"),this.aggregates.css("border-left-color","transparent")),e+=" "+this.toThemeProperty("MLjqui-grid-cell-pinned");var f=d+10,g=new Array;this.aggregates[0].cells=g;for(var h=0;d>h;h++){var i=this.columns.records[h],j=this._calculateaggregate(i),k=i.width;k<i.minwidth&&(k=i.minwidth),k>i.maxwidth&&(k=i.maxwidth);var l=e;i.cellsalign&&(l+=" "+this.toThemeProperty("MLjqui-"+i.cellsalign+"-align"));var m=a('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+l+'"></div>');b.append(m),m.css("left",c),this.rtl?(m.css("z-index",f++),0==h&&m.css("border-left-width","0px")):m.css("z-index",f--),m.width(k),m[0].style.left=c+"px",i.hidden&&i.hideable?m.css("display","none"):c+=k,g[g.length]=m[0],this._updatecolumnaggregates(i,j,m)}a.MLjqui.browser.msie&&a.MLjqui.browser.version<8&&b.css("z-index",f--),b.width(parseInt(c)+2),b.height(this.aggregatesHeight),this.aggregates.children().remove(),this.aggregates.append(b),this.aggregates.removeClass(this.toThemeProperty("MLjqui-widget-header")),this.aggregates.addClass(e),this.aggregates.css("border-bottom-color","transparent"),this.aggregates.css("border-top-width","1px"),this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&this._renderhorizontalscroll()},destroy:function(){var b=this;if(b.columns&&b.columns.records)for(var c=0;c<b.columns.records.length;c++)b._removecolumnhandlers(b.columns.records[c]);b.removeHandler(a(document),"mouseup.pagerbuttonstop"),b.removeHandler(a(document),"mouseup.pagerbuttonsbottom"),b.removeHandler(b.content,"scroll"),b.removeHandler(b.content,"mousedown"),b.removeHandler(a(document),"mousedown.gridedit"+b.element.id);var d="mousemove.resize"+b.element.id,e="mousedown.resize"+b.element.id,f="mouseup.resize"+b.element.id;b.removeHandler(a(document),d),b.removeHandler(a(document),e),b.removeHandler(a(document),f);var d="mousemove.reorder"+b.element.id,e="mousedown.reorder"+b.element.id,f="mouseup.reorder"+b.element.id;if(b.removeHandler(a(document),d),b.removeHandler(a(document),e),b.removeHandler(a(document),f),b.filterable){if(b.filterrow)for(var c=0;c<b.filterrow[0].cells.length;c++){var g=b.filterrow[0].cells[c],h=a(g).find(".filterconditions");b.columns.records[c];h.length>0&&h.MLjquiDropDownList("destroy")}b.filtercolumnsList&&b.filtercolumnsList.MLjquiDropDownList("destroy")}if(b.pageable){b.pagershowrowscombotop&&b.pagershowrowscombotop.MLjquiDropDownList&&b.pagershowrowscombotop.MLjquiDropDownList("destroy"),b.pagershowrowscombobottom&&b.pagershowrowscombobottom.MLjquiDropDownList&&b.pagershowrowscombobottom.MLjquiDropDownList("destroy");var i=b.pagerbuttonsbottom.find("a");b.removeHandler(i,"click"),b.removeHandler(i,"mouseenter"),b.removeHandler(i,"mouseleave"),i.remove();var i=b.pagerbuttonstop.find("a");b.removeHandler(i,"click"),b.removeHandler(i,"mouseenter"),b.removeHandler(i,"mouseleave"),i.remove(),b.pagernexttop&&(b.pagernexttop.MLjquiButton("destroy"),b.pagerprevioustop.MLjquiButton("destroy"),b.pagernextbottom.MLjquiButton("destroy"),b.pagerpreviousbottom.MLjquiButton("destroy"),b.pagerfirsttop.MLjquiButton("destroy"),b.pagerfirstbottom.MLjquiButton("destroy"),b.pagerlasttop.MLjquiButton("destroy"),b.pagerlastbottom.MLjquiButton("destroy"))}b._removeHandlers(),b.vScrollBar.MLjquiScrollBar("destroy"),b.hScrollBar.MLjquiScrollBar("destroy"),delete b.vScrollBar,delete b.hScrollBar,delete b._mousewheelfunc,a.MLjqui.utilities.resize(b.host,null,!0),b.host.remove()},propertiesChangedHandler:function(a,b,c){c.width&&c.height&&2==Object.keys(c).length&&a.refresh()},propertyChangedHandler:function(b,c,d,e){if(void 0!=this.isInitialized&&0!=this.isInitialized&&!(b.batchUpdate&&b.batchUpdate.width&&b.batchUpdate.height&&2==Object.keys(b.batchUpdate).length)&&e!==d)if("filterable"==c)b._render();else if("height"===c)b.host.height(b.height),b.host.width(b.width),b._updatesize(!1,!0);else if("width"===c)b.host.height(b.height),b.host.width(b.width),b._updatesize(!0,!1);else if("source"===c)b.updateBoundData();else if("columns"===c||"columnGroups"===c)b._columns=null,b._render();else if("rtl"===c)b.content.css("left",""),b.columns=b._columns,b.vScrollBar.MLjquiScrollBar({rtl:e}),b.hScrollBar.MLjquiScrollBar({rtl:e}),b._render();else if("pagerMode"===c)b.pagerMode=e,b._initpager();else if("pageSizeOptions"==c){b._initpager();for(var f=!1,g=0;g<e.length;g++)if(parseInt(e[g])==b.pageSize){f=!0;break}f||a.MLjqui.set(b,[{pageSize:e[0]}])}else if("pageSize"==c){var h=b.dataview.pagenum*b.dataview.pagesize;b.dataview.pagesize=b.pageSize;var i=Math.floor(h/b.dataview.pagesize);if(i!==b.dataview.pagenum||parseInt(e)!==parseInt(d)){b._raiseEvent("pageSizeChanged",{pagenum:e,oldpageSize:d,pageSize:b.dataview.pagesize});var j=b.goToPage(i);j||(b.serverProcessing?b.updateBoundData("pager"):b.refresh())}}else if("pagerPosition"===c)b.refresh();else if("selectionMode"===c)b.selectionMode=e.toLowerCase();else if("touchmode"==c)b.touchDevice=null,b._removeHandlers(),b.touchDevice=null,b.vScrollBar.MLjquiScrollBar({touchMode:e}),b.hScrollBar.MLjquiScrollBar({touchMode:e}),b._updateTouchScrolling(),b._arrange(),b._updatecolumnwidths(),b._renderrows(),b._addHandlers();else{if("enableHover"==c)return;if("disabled"==c)e?b.host.addClass(this.toThemeProperty("MLjqui-fill-state-disabled")):b.host.removeClass(this.toThemeProperty("MLjqui-fill-state-disabled")),b.pageable&&(b.pagernexttop&&(b.pagernexttop.MLjquiButton({disabled:e}),b.pagerprevioustop.MLjquiButton({disabled:e}),b.pagernextbottom.MLjquiButton({disabled:e}),b.pagerpreviousbottom.MLjquiButton({disabled:e}),b.pagerfirsttop.MLjquiButton({disabled:e}),b.pagerfirstbottom.MLjquiButton({disabled:e}),b.pagerlasttop.MLjquiButton({disabled:e}),b.pagerlastbottom.MLjquiButton({disabled:e}),b.pagershowrowscombotop.MLjquiDropDownList&&"advanced"==b.pagerMode&&(b.pagershowrowscombotop.MLjquiDropDownList({disabled:!1}),b.pagershowrowscombobottom.MLjquiDropDownList({disabled:!1}))),b.host.find(".MLjqui-grid-pager-number").css("cursor",e?"default":"pointer")),b.host.find(".MLjqui-grid-group-collapse").css("cursor",e?"default":"pointer"),b.host.find(".MLjqui-grid-group-expand").css("cursor",e?"default":"pointer");else if("columnsHeight"==c)b._render();else if("theme"==c){if(a.MLjqui.utilities.setTheme(d,e,b.host),b.vScrollBar.MLjquiScrollBar({theme:b.theme}),b.hScrollBar.MLjquiScrollBar({theme:b.theme}),b.pageable&&b.pagernexttop&&(b.pagernexttop.MLjquiButton({theme:b.theme}),b.pagerprevioustop.MLjquiButton({theme:b.theme}),b.pagernextbottom.MLjquiButton({theme:b.theme}),b.pagerpreviousbottom.MLjquiButton({theme:b.theme}),b.pagerfirsttop.MLjquiButton({theme:b.theme}),b.pagerfirstbottom.MLjquiButton({theme:b.theme}),b.pagerlasttop.MLjquiButton({theme:b.theme}),b.pagerlastbottom.MLjquiButton({theme:b.theme}),b.pagershowrowscombotop.MLjquiDropDownList&&"advanced"==b.pagerMode&&(b.pagershowrowscombotop.MLjquiDropDownList({theme:b.theme}),b.pagershowrowscombobottom.MLjquiDropDownList({theme:b.theme}))),b.filterable){var k=a(".filterconditions");k.length>0&&k.MLjquiDropDownList({theme:b.theme}),b.filtercolumnsList&&b.filtercolumnsList.MLjquiDropDownList({theme:b.theme})}b.refresh()}else b.refresh()}},_rendercolumnheader:function(a,b,c,d){var e="4px";return d.columnGroups?(e=c/2-this._columnheight/2,0>e&&(e=4),e+="px"):25!=this.columnsHeight&&(e=this.columnsHeight/2-this._columnheight/2,0>e&&(e=4),e+="px"),'<div style="overflow: hidden; text-overflow: ellipsis; text-align: '+b+"; margin-left: 4px; margin-right: 4px; margin-bottom: "+e+"; margin-top: "+e+';"><span style="text-overflow: ellipsis; cursor: default;">'+a+"</span></div>"}}),a.MLjqui.dataCollection=function(a){return this.records=new Array,this.owner=a,this.updating=!1,this.beginUpdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this.clear=function(){this.records=new Array},this.replace=function(a,b){this.records[a]=b},this.isempty=function(a){return void 0==this.records[a]},this.initialize=function(a){1>a&&(a=1),this.records[a-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(a){return this.records.indexOf(a)},this.add=function(a){return null==a?!1:(this.records[this.records.length]=a,!0)},this.insertAt=function(a,b){return null==a||void 0==a?!1:null==b?!1:a>=0?a<this.records.length?(this.records.splice(a,0,b),!0):this.add(b):!1},this.remove=function(a){if(null==a||void 0==a)return!1;var b=this.records.indexOf(a);return-1!=b?(this.records.splice(b,1),!0):!1},this.removeAt=function(a){if(null==a||void 0==a)return!1;if(0>a)return!1;if(a<this.records.length){this.records[a];return this.records.splice(a,1),!0}return!1},this},a.MLjqui.dataView=function(){return this.that=this,this.grid=null,this.records=[],this.rows=[],this.columns=[],this.filters=new Array,this.pagesize=0,this.pagenum=0,this.source=null,this.databind=function(b,c){var d=!!b._source,e=null;this._sortData=null,this._sortHierarchyData=null,d?(e=b,b=b._source):e=new a.MLjqui.dataAdapter(b,{autoBind:!1});var f=function(a){e.recordids=[],e.records=new Array,e.cachedrecords=new Array,e.originaldata=new Array,e._options.totalrecords=a.totalrecords,e._options.originaldata=a.originaldata,e._options.recordids=a.recordids,e._options.cachedrecords=new Array,e._options.pagenum=a.pagenum,e._options.pageable=a.pageable,void 0!=b.type&&(e._options.type=b.type),void 0!=b.formatdata&&(e._options.formatData=b.formatdata),void 0!=b.contenttype&&(e._options.contentType=b.contenttype),void 0!=b.async&&(e._options.async=b.async),void 0!=b.updaterow&&(e._options.updaterow=b.updaterow),void 0!=b.addrow&&(e._options.addrow=b.addrow),void 0!=b.deleterow&&(e._options.deleterow=b.deleterow),0==a.pagesize&&(a.pagesize=10),e._options.pagesize=a.pagesize},g=function(a){a.originaldata=e.originaldata,a.records=e.records,a.hierarchy=e.hierarchy,a.grid.serverProcessing||(a._sortData=null,a._sortfield=null,a._filteredData=null,a._sortHierarchyData=null),a.hierarchy||(a.hierarchy=new Array,e.hierarchy=new Array),e._source.totalrecords?a.totalrecords=e._source.totalrecords:e._source.totalRecords?a.totalrecords=e._source.totalRecords:0!==a.hierarchy.length?a.totalrecords=a.hierarchy.length:a.totalrecords=a.records.length,a.cachedrecords=e.cachedrecords};f(this),this.source=b,void 0!==c&&(uniqueId=c);var h=this;switch(b.datatype){case"local":case"array":default:if(null==b.localdata&&(b.localdata=[]),null!=b.localdata){e.unbindBindingUpdate(h.grid.element.id),(!h.grid.autoBind&&h.grid.isInitialized||h.grid.autoBind)&&e.dataBind();var i=function(){g(h),h.update()};i(),e.bindBindingUpdate(h.grid.element.id,i)}break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=b.localdata){e.unbindBindingUpdate(h.grid.element.id),(!h.grid.autoBind&&h.grid.isInitialized||h.grid.autoBind)&&e.dataBind();var i=function(a){g(h),h.update()};return i(),void e.bindBindingUpdate(h.grid.element.id,i)}for(var j=0,k={},l=0;l<this.filters.length;l++){var m=this.filters[l].datafield,n=this.filters[l].filter,o=n.getfilters();k[m+"operator"]=n.operator;for(var p=0;p<o.length;p++){o[p].datafield=m;var q=o[p].value;k["filtervalue"+j]=q.toString(),k["filtercondition"+j]=o[p].condition,k["filteroperator"+j]=o[p].operator,k["filterdatafield"+j]=m,j++}}k.filterslength=j,a.extend(k,{sortdatafield:h.sortfield,sortorder:h.sortfielddirection,pagenum:h.pagenum,pagesize:h.grid.pageSize});var r=e._options.data;e._options.data?a.extend(e._options.data,k):(b.data&&a.extend(k,b.data),e._options.data=k);var i=function(){var b=a.MLjqui.browser.msie&&a.MLjqui.browser.version<9,c=function(){g(h),h.update()};if(b)try{c()}catch(d){}else c()};e.unbindDownloadComplete(h.grid.element.id),e.bindDownloadComplete(h.grid.element.id,i),e._source.loaderror=function(a,b,c){i()},(!h.grid.autoBind&&h.grid.isInitialized||h.grid.autoBind)&&e.dataBind(),e._options.data=r}},this.addFilter=function(a,b){this._sortData=null,this._sortHierarchyData=null;for(var c=-1,d=0;d<this.filters.length;d++)if(this.filters[d].datafield==a){c=d;break}-1==c?this.filters[this.filters.length]={filter:b,datafield:a}:this.filters[c]={filter:b,datafield:a}},this.removeFilter=function(a){this._sortData=null,this._sortHierarchyData=null;for(var b=0;b<this.filters.length;b++)if(this.filters[b].datafield==a){this.filters.splice(b,1);break}},this.sortBy=function(a,b){return null==b?(this.sortfield="",void(this.sortfielddirection="")):(void 0==b&&(b=!0),b="a"==b||"asc"==b||"ascending"==b||1==b,"constructor"==a&&(a=""),this.sortfield=a,void(this.sortfielddirection=b?"asc":"desc"))},this._sort=function(b){if(!this.sortfield||!this.sortfielddirection)return b;if(this._sortfield==this.sortfield&&this._sortfielddirection==this.sortfielddirection&&this._sortData)return this._sortData;var c=this,d=Object.prototype.toString;Object.prototype.toString="function"==typeof c.sortfield?c.sortfield:function(){return this[c.sortfield]};var e="";this.source.datafields&&a.each(this.source.datafields,function(){return this.name==c.sortfield?(this.type&&(e=this.type),!1):void 0});for(var f=new Array,g=0;g<b.length;g++)f.push(a.extend({originalRecord:b[g]},b[g]));if(this._sortfield=this.sortfield,this._sortfielddirection=this.sortfielddirection,"desc"===this.sortfielddirection)var h=f.sort(function(a,b){return c._compare(a,b,e)}).reverse();else var h=f.sort(function(a,b){return c._compare(a,b,e)});return this._sortData=h,Object.prototype.toString=d,h},this._compare=function(b,c,d){var b=b,c=c;if(void 0===b&&(b=null),void 0===c&&(c=null),null===b&&null===c)return 0;if(null===b&&null!==c)return 1;if(null!==b&&null===c)return 1;if(b=b.toString(),c=c.toString(),a.MLjqui.dataFormat)if(d&&""!=d)switch(d){case"number":case"int":case"float":return c>b?-1:b>c?1:0;case"date":case"time":return c>b?-1:b>c?1:0;case"string":case"text":b=String(b).toLowerCase(),c=String(c).toLowerCase()}else{if(a.MLjqui.dataFormat.isNumber(b)&&a.MLjqui.dataFormat.isNumber(c))return c>b?-1:b>c?1:0;if(a.MLjqui.dataFormat.isDate(b)&&a.MLjqui.dataFormat.isDate(c))return c>b?-1:b>c?1:0;a.MLjqui.dataFormat.isNumber(b)||a.MLjqui.dataFormat.isNumber(c)||(b=String(b).toLowerCase(),c=String(c).toLowerCase())}try{if(c>b)return-1;if(b>c)return 1}catch(e){}return 0},this._equals=function(a,b){return 0===this._compare(a,b)},this.evaluate=function(b){if(this.grid.serverProcessing){if(b&&(""==this.grid.source._source.id||null==this.grid.source._source.id)&&this.grid.pageable){var c=this.grid.pageSize*this.pagenum;this.grid.rowsByKey=new Array;var d=this;a.each(b,function(a){this.uid=c,d.grid.rowsByKey[this.uid]=this,c++})}return b}var e=new Array;if(this.filters.length){var f=new Array,g=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];d._visible=!0;for(var e=void 0,g=0;g<this.filters.length;g++){var h=this.filters[g].filter,i=d[this.filters[g].datafield],j=h.evaluate(i);e=void 0==e?j:"or"==h.operator?e||j:e&&j}d._visible=!1,(e||d.aggregate)&&(d._visible=!0,b.push(d),f[d.uid]=d)}};if(this._filteredData)this.rows=this._filteredData;else{if(this.source.hierarchy||this.grid.source.hierarchy&&this.grid.source.hierarchy.length>0){var h=new Array,i=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];h.push(d),d.records&&d.records.length>0&&i(d,d.records)}};i(null,b),g.call(this,h,e);for(var j=0;j<e.length;j++)for(var k=e[j];k.parent;){var l=k.parent;f[l.uid]||(l._visible=!0,f[l.uid]=l),k=l}e=b}else g.call(this,b,e);this._filteredData=e,this.rows=e}}else this.rows=b;if(this.source.hierarchy||this.grid.source.hierarchy&&this.grid.source.hierarchy.length>0){var d=this,m=new Array;this._sortData=null;var n=function(b,c){d._sortData=null;var e=null;if(d.source.hierarchy.groupingDataFields)if(c&&c.length>0&&c[0].level<d.source.hierarchy.groupingDataFields.length){e=new Array;for(var f=0;f<c.length;f++)e.push(a.extend({originalRecord:c[f]},c[f]))}else e=d._sort(c);else e=d._sort(c);b.records?b.records=e:b=b.concat(e);for(var f=0;f<e.length;f++)e[f].records&&e[f].records.length&&n(e[f],e[f].records);return b};(this.sortfield||this.sortfielddirection)&&(m=this._sortHierarchyData?this._sortHierarchyData:n(m,b),this.rows=m,this._sortHierarchyData=m)}else this.rows=this._sort(this.rows);return this.rows},this.getid=function(b,c,d){if(a(b,c).length>0)return a(b,c).text();if(this.rows&&""!=b&&void 0!=b&&this.rows.length>0){var e=this.rows[this.rows.length-1][b];null==e&&(e=null);for(var f=1;100>=f;f++){var g=this.grid.rowsByKey[f+e];if(!g){if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){var g=this.grid.rowsByKey["MLjqui"+e+f];if(g)continue;return"MLjqui"+e+f}return e+f}}}if(void 0!=b&&b.toString().length>0){var h=a(c).attr(b);if(null!=h&&h.toString().length>0)return this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords?"MLjqui"+h:h}if(this.rows&&this.rows.length>0){var g=this.grid.rowsByKey[d];if(g){var e=this.rows[this.rows.length-1][b];null==e&&(e="");for(var f=1;1e3>=f;f++){var g=this.grid.rowsByKey[f+e];if(!g){if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){var g=this.grid.rowsByKey["MLjqui"+e+f];if(g)continue;return"MLjqui"+e+f}return e+f}}}}if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){var g=this.grid.rowsByKey["MLjqui"+d];if(!g)return"MLjqui"+d;for(var f=d+1;100>=f;f++){var g=this.grid.rowsByKey["MLjqui"+f];if(!g){var g=this.grid.rowsByKey["MLjqui"+f];if(g)continue;return"MLjqui"+f}}}return d},this.generatekey=function(){var a=function(){return 16*(1+Math.random())|0};return""+a()+a()+"-"+a()+"-"+a()},this}}(MLjquiBaseFramework),function(a){function b(b,d){var e=b.nodeName.toLowerCase();if("area"===e){var f,g=b.parentNode,h=g.name;return b.href&&h&&"map"===g.nodeName.toLowerCase()?(f=a("img[usemap=#"+h+"]")[0],!!f&&c(f)):!1}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||d:d)&&c(b)}function c(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.css(this,"visibility")||a.expr.filters.hidden(this)}).length}function d(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}a.MLjqui.MLjquiWidget("MLjquiWindow","",{}),a.extend(a.MLjqui._MLjquiWindow.prototype,{defineInstance:function(){var b={height:"auto",width:200,minHeight:50,maxHeight:600,minWidth:50,maxWidth:800,showCloseButton:!0,disabled:!1,autoOpen:!0,keyboardCloseKey:"esc",title:"",content:"",draggable:!0,resizable:!0,animationType:"fade",closeAnimationDuration:250,showAnimationDuration:250,isModal:!1,position:"center",closeButtonSize:16,closeButtonAction:"hide",modalOpacity:.3,dragArea:null,okButton:null,cancelButton:null,dialogResult:{OK:!1,Cancel:!1,None:!0},collapsed:!1,showCollapseButton:!1,collapseAnimationDuration:150,collapseButtonSize:16,rtl:!1,keyboardNavigation:!0,headerHeight:null,_events:["created","closed","moving","moved","open","collapse","expand","open","close","resize"],initContent:null,enableResize:!0,restricter:null,autoFocus:!0,closing:null,_invalidArgumentExceptions:{invalidHeight:"Invalid height!",invalidWidth:"Invalid width!",invalidMinHeight:"Invalid minHeight!",invalidMaxHeight:"Invalid maxHeight!",invalidMinWidth:"Invalid minWidth!",invalidMaxWidth:"Invalid maxWidth",invalidKeyCode:"Invalid keyCode!",invalidAnimationType:"Invalid animationType!",invalidCloseAnimationDuration:"Invalid closeAnimationDuration!",invalidShowAnimationDuration:"Invalid showAnimationDuration!",invalidPosition:"Invalid position!",invalidCloseButtonSize:"Invalid closeButtonSize!",invalidCollapseButtonSize:"Invalid collapseButtonSize!",invalidCloseButtonAction:"Invalid cluseButtonAction!",invalidModalOpacity:"Invalid modalOpacity!",invalidDragArea:"Invalid dragArea!",invalidDialogResult:"Invalid dialogResult!",invalidIsModal:"You can have just one modal window!"},_enableResizeCollapseBackup:null,_enableResizeBackup:void 0,_heightBeforeCollapse:null,_minHeightBeforeCollapse:null,_mouseDown:!1,_isDragging:!1,_rightContentWrapper:null,_leftContentWrapper:null,_headerContentWrapper:null,_closeButton:null,_collapseButton:null,_title:null,_content:null,_mousePosition:{},_windowPosition:{},_modalBackground:null,_SCROLL_WIDTH:21,_visible:!0,modalBackgroundZIndex:12990,modalZIndex:18e3,zIndex:9001,_touchEvents:{mousedown:a.MLjqui.mobile.getTouchEventName("touchstart"),mouseup:a.MLjqui.mobile.getTouchEventName("touchend"),mousemove:a.MLjqui.mobile.getTouchEventName("touchmove"),mouseenter:"mouseenter",mouseleave:"mouseleave",click:a.MLjqui.mobile.getTouchEventName("touchstart")}};return a.extend(!0,this,b),b},createInstance:function(){this.host.attr("role","dialog"),this.host.removeAttr("data-bind"),this.host.detach(),a(document.body).append(this.host);var b=this,c=function(){var c=parseInt(a(b.restricter).css("padding-top")),d=parseInt(a(b.restricter).css("padding-left")),e=parseInt(a(b.restricter).css("padding-bottom")),f=parseInt(a(b.restricter).css("padding-right")),g=a(b.restricter).coord();b.dragArea={left:d+g.left,top:c+g.top,width:1+f+a(b.restricter).width(),height:1+e+a(b.restricter).height()}};if(this.restricter&&c(),this.restricter&&(this.addHandler(a(window),"resize."+this.element.id,function(){c()}),this.addHandler(a(window),"orientationchanged."+this.element.id,function(){c()}),this.addHandler(a(window),"orientationchange."+this.element.id,function(){c()})),this._isTouchDevice=a.MLjqui.mobile.isTouchDevice(),this._validateProperties(),this._createStructure(),this._refresh(),this.autoOpen||this.host.css("display","none"),a.MLjqui.browser.msie&&this.host.addClass(this.toThemeProperty("MLjqui-noshadow")),this.isModal||this._fixWindowZIndex(),this._setStartupSettings(),this._positionWindow(),this._raiseEvent(0),this.autoOpen){this._performLayout();var d=this;this.isModal&&this._fixWindowZIndex("modal-show"),d.initContent&&(d.initContent(),d._contentInitialized=!0),this._raiseEvent(7),this._raiseEvent(9)}},refresh:function(){this._performLayout()},_setStartupSettings:function(){this.disabled&&this.disable(),this.collapsed&&(this.collapsed=!1,this.collapse(0)),this.autoOpen||(this.hide(null,.001,!0),this._visible=!1),null!==this.title&&""!==this.title&&this.setTitle(this.title),null!==this.content&&""!==this.content&&this.setContent(this.content),this.title=this._headerContentWrapper.html(),this.content=this._content.html()},_fixWindowZIndex:function(b){var c=a.data(document.body,"MLjquiwindows-list")||[],d=this.zIndex;if(this.isModal){c&&(c=this._removeFromArray(this.host,c),a.data(document.body,"MLjquiwindows-list",c));var e=a.data(document.body,"MLjquiwindows-modallist");if(e)if("modal-show"==b)e.push(this.host);else{var f=e.indexOf(this.host);-1!=f&&e.splice(f,1)}else if("modal-show"==b){var g=new Array;g.push(this.host),a.data(document.body,"MLjquiwindows-modallist",g),e=g}else a.data(document.body,"MLjquiwindows-modallist",new Array),e=new Array;d=this.modalZIndex;return a.each(e,function(a){if(this.data()&&this.data().MLjquiWindow){var b=this.data().MLjquiWindow.instance;b._modalBackground.css("z-index",d),b.host.css("z-index",d+1),d+=2}}),void a.data(document.body,"MLjquiwindow-modal",this.host)}if(this._indexOf(this.host,c)<0&&c.push(this.host),a.data(document.body,"MLjquiwindows-list",c),c.length>1){var h=c[c.length-2];if("auto"==h.css("z-index"))d=this.zIndex+c.length+1;else{var i=this.zIndex;d=parseInt(h.css("z-index"),10)+1,i>d&&(d=i)}}this.host.css("z-index",d),this._sortByStyle("z-index",c)},_validateProperties:function(){try{if(this._validateSize(),this._validateAnimationProperties(),this._validateInteractionProperties(),this._validateModalProperties(),!this.position)throw new Error(this._invalidArgumentExceptions.invalidPosition);if(isNaN(this.closeButtonSize)||parseInt(this.closeButtonSize)<0)throw new Error(this._invalidArgumentExceptions.invalidCloseButtonSize);if(isNaN(this.collapseButtonSize)||parseInt(this.collapseButtonSize)<0)throw new Error(this._invalidArgumentExceptions.invalidCollapseButtonSize);
}catch(a){alert(a)}},_validateModalProperties:function(){if(this.modalOpacity<0||this.modalOpacity>1)throw new Error(this._invalidArgumentExceptions.invalidModalOpacity);if(this.isModal&&!this._singleModalCheck())throw new Error(this._invalidArgumentExceptions.invalidIsModal)},_validateSize:function(){if(this._validateSizeLimits(),"auto"!==this.height&&isNaN(parseInt(this.height)))throw new Error(this._invalidArgumentExceptions.invalidHeight);if("auto"!==this.width&&isNaN(parseInt(this.width)))throw new Error(this._invalidArgumentExceptions.invalidWidth);"auto"!==this.height&&this.height<this.minHeight&&(this.height=this.minHeight),this.width<this.minWidth&&(this.width=this.minWidth),"auto"!==this.height&&this.height>this.maxHeight&&(this.height=this.maxHeight),this.width>this.maxWidth&&(this.width=this.maxWidth),null!==this.dragArea&&(this.dragArea&&(null!==this.dragArea.height&&this.host.height()>this.dragArea.height||parseInt(this.height,10)>this.dragArea.height)||null!==this.dragArea.width&&this.width>this.dragArea.width||this.maxHeight>this.dragArea.height||this.maxWidth>this.dragArea.width)},_validateSizeLimits:function(){if(null==this.maxHeight&&(this.maxHeight=9999),null==this.minWidth&&(this.minWidth=0),null==this.maxWidth&&(this.maxWidth=9999),null==this.minHeight&&(this.minHeight=0),isNaN(parseInt(this.minHeight)))throw new Error(this._invalidArgumentExceptions.invalidMinHeight);if(isNaN(parseInt(this.maxHeight)))throw new Error(this._invalidArgumentExceptions.invalidMaxHeight);if(isNaN(parseInt(this.minWidth)))throw new Error(this._invalidArgumentExceptions.invalidMinWidth);if(isNaN(parseInt(this.maxWidth)))throw new Error(this._invalidArgumentExceptions.invalidMaxWidth);if(this.minHeight>this.maxHeight)throw new Error(this._invalidArgumentExceptions.invalidMinHeight);if(this.minWidth>this.maxWidth)throw new Error(this._invalidArgumentExceptions.invalidMinWidth)},_validateAnimationProperties:function(){if("fade"!==this.animationType&&"slide"!==this.animationType&&"combined"!==this.animationType&&"none"!==this.animationType)throw new Error(this._invalidArgumentExceptions.invalidAnimationType);if(isNaN(parseInt(this.closeAnimationDuration),10)||this.closeAnimationDuration<0)throw new Error(this._invalidArgumentExceptions.invalidCloseAnimationDuration);if(isNaN(parseInt(this.showAnimationDuration),10)||this.showAnimationDuration<0)throw new Error(this._invalidArgumentExceptions.invalidShowAnimationDuration)},_validateInteractionProperties:function(){if(parseInt(this.keyCode,10)<0||parseInt(this.keyCode,10)>130&&"esc"!==this.keyCode)throw new Error(this._invalidArgumentExceptions.invalidKeyCode);if(null!==this.dragArea&&("undefined"==typeof this.dragArea.width||"undefined"==typeof this.dragArea.height||"undefined"==typeof this.dragArea.left||"undefined"==typeof this.dragArea.top))throw new Error(this._invalidArgumentExceptions.invalidDragArea);if(!this.dialogResult||!this.dialogResult.OK&&!this.dialogResult.Cancel&&!this.dialogResult.None)throw new Error(this._invalidArgumentExceptions.invalidDialogResult);if("hide"!==this.closeButtonAction&&"close"!==this.closeButtonAction&&"destroy"!==this.closeButtonAction)throw new Error(this._invalidArgumentExceptions.invalidCloseButtonAction)},_singleModalCheck:function(){for(var b=a.data(document.body,"MLjquiwindows-list")||[],c=b.length;c;)if(c-=1,a(b[c].attr("id")).length>0&&a(b[c].attr("id")).MLjquiWindow("isModal"))return!1;return!0},_createStructure:function(){var b=this.host.children("DIV");if(1===b.length)this._header=a("<div>"+this.host.attr("caption")+"</div>"),this.host.prepend(this._header),this.host.attr("caption",""),this._content=a(b[0]);else{if(2!==b.length)throw new Error("Invalid structure!");this._header=a(b[0]),this._content=a(b[1])}},_refresh:function(){this._render(),this._addStyles(),this._performLayout(),this._removeEventHandlers(),this._addEventHandlers(),this._initializeResize()},_render:function(){this._addHeaderWrapper(),this._addCloseButton(),this._addCollapseButton(),this._removeModal(),this._makeModal()},_addHeaderWrapper:function(){this._headerContentWrapper||(this._header.wrapInner('<div style="float:left;"></div>'),this._headerContentWrapper=this._header.children(0),null!==this.headerHeight&&this._header.height(this.headerHeight))},_addCloseButton:function(){this._closeButton||(this._closeButtonWrapper=a('<div class="'+this.toThemeProperty("MLjqui-window-close-button-background")+'"></div>'),this._closeButton=a('<div style="width: 100%; height: 100%;" class="'+this.toThemeProperty("MLjqui-window-close-button")+" "+this.toThemeProperty("MLjqui-icon-close")+'"></div>'),this._closeButtonWrapper.append(this._closeButton),this._header.append(this._closeButtonWrapper))},_addCollapseButton:function(){this._collapseButton||(this._collapseButtonWrapper=a('<div class="'+this.toThemeProperty("MLjqui-window-collapse-button-background")+'"></div>'),this._collapseButton=a('<div style="width: 100%; height: 100%;" class="'+this.toThemeProperty("MLjqui-window-collapse-button")+" "+this.toThemeProperty("MLjqui-icon-arrow-up")+'"></div>'),this._collapseButtonWrapper.append(this._collapseButton),this._header.append(this._collapseButtonWrapper))},_removeModal:function(){!this.isModal&&"object"==typeof this._modalBackground&&null!==this._modalBackground&&this._modalBackground.length>=1&&(a("."+this.toThemeProperty("MLjqui-window-modal")).remove(),this._modalBackground=null)},focus:function(){try{this.host.focus();var a=this;setTimeout(function(){a.host.focus()},10)}catch(b){}},_makeModal:function(){if(this.isModal&&(!this._modalBackground||this._modalBackground.length<1)){var b=a.data(document.body,"MLjquiwindows-list");b&&(this._removeFromArray(this.host,b),a.data(document.body,"MLjquiwindows-list",b)),this._modalBackground=a("<div></div>"),this._modalBackground.addClass(this.toThemeProperty("MLjqui-window-modal")),this._setModalBackgroundStyles(),a(document.body).append(this._modalBackground),this.addHandler(this._modalBackground,this._getEvent("click"),function(){return!1});var c=this,d=function(b,c){var d=a(b).parents().get();for(j=0;j<d.length;j++)if(a(d[j]).is(c))return!0;return!1};this.addHandler(this._modalBackground,"mouseup",function(a){c._stopResizing(c),a.preventDefault()}),this.addHandler(this._modalBackground,"mousedown",function(a){var b=c._getTabbables();return b.length>0&&(b[0].focus(1),setTimeout(function(){b[0].focus(1)},100)),a.preventDefault(),!1}),this.addHandler(a(document),"keydown.window"+this.element.id,function(b){if(9===b.keyCode){var e=a.data(document.body,"MLjquiwindows-modallist");if(!(e.length>1&&e[e.length-1][0]!=c.element)){var f=c._getTabbables(),g=null,h=null;if(f.length>0&&(g=f[0],h=f[f.length-1]),b.target!=c.element&&null!=g)return d(b.target,c.host)&&(b.target!==h||b.shiftKey)?b.target===g&&b.shiftKey?(h.focus(1),!1):void 0:(g.focus(1),!1)}}})}},_addStyles:function(){this.host.addClass(this.toThemeProperty("MLjqui-rc-all")),this.host.addClass(this.toThemeProperty("MLjqui-window")),this.host.addClass(this.toThemeProperty("MLjqui-popup")),a.MLjqui.browser.msie&&this.host.addClass(this.toThemeProperty("MLjqui-noshadow")),this.host.addClass(this.toThemeProperty("MLjqui-widget")),this.host.addClass(this.toThemeProperty("MLjqui-widget-content")),this._header.addClass(this.toThemeProperty("MLjqui-window-header")),this._content.addClass(this.toThemeProperty("MLjqui-window-content")),this._header.addClass(this.toThemeProperty("MLjqui-widget-header")),this._content.addClass(this.toThemeProperty("MLjqui-widget-content")),this._header.addClass(this.toThemeProperty("MLjqui-disableselect")),this._header.addClass(this.toThemeProperty("MLjqui-rc-t")),this._content.addClass(this.toThemeProperty("MLjqui-rc-b")),this.host.attr("tabindex")||(this.element.tabIndex=0,this.host.children().css("tab-index",0)),this.host.attr("hideFocus","true").css("outline","none")},_performHeaderLayout:function(){this._handleHeaderButtons(),this._header.css("position","relative"),this.rtl?(this._headerContentWrapper.css("direction","rtl"),this._headerContentWrapper.css("float","right")):(this._headerContentWrapper.css("direction","ltr"),this._headerContentWrapper.css("float","left")),this._performHeaderCloseButtonLayout(),this._performHeaderCollapseButtonLayout(),this._centerElement(this._headerContentWrapper,this._header,"y","margin"),this.headerHeight&&(this._centerElement(this._closeButtonWrapper,this._header,"y","margin"),this._centerElement(this._collapseButtonWrapper,this._header,"y","margin"))},_handleHeaderButtons:function(){this._closeButtonWrapper&&(this.showCloseButton?(this._closeButtonWrapper.css("visibility","visible"),this._closeButtonWrapper.width(this.closeButtonSize),this._closeButtonWrapper.height(this.closeButtonSize)):this._closeButtonWrapper.css("visibility","hidden"),this.showCollapseButton?(this._collapseButtonWrapper.css("visibility","visible"),this._collapseButtonWrapper.width(this.collapseButtonSize),this._collapseButtonWrapper.height(this.collapseButtonSize)):this._collapseButtonWrapper.css("visibility","hidden"))},_performHeaderCloseButtonLayout:function(){if(this._closeButtonWrapper){var a=parseInt(this._header.css("padding-right"),10);isNaN(a)||(this._closeButtonWrapper.width(this._closeButton.width()),this.rtl?(this._closeButtonWrapper.css("margin-left",a),this._closeButtonWrapper.css("margin-right","0px")):(this._closeButtonWrapper.css("margin-right",a),this._closeButtonWrapper.css("margin-left","0px"))),this.rtl?this._closeButtonWrapper.css({position:"absolute",left:"0px",right:""}):this._closeButtonWrapper.css({position:"absolute",right:"0px",left:""})}},_performHeaderCollapseButtonLayout:function(){if(this._closeButtonWrapper){var a=parseInt(this._header.css("padding-right"),10);isNaN(a)||(this._collapseButtonWrapper.width(this.collapseButtonSize),this._collapseButtonWrapper.height(this.collapseButtonSize),this.rtl?(this._collapseButtonWrapper.css("margin-left",a),this._collapseButtonWrapper.css("margin-right","0px")):(this._collapseButtonWrapper.css("margin-right",a),this._collapseButtonWrapper.css("margin-left","0px"))),this.rtl?this._collapseButtonWrapper.css({position:"absolute",left:this.showCloseButton?this._closeButton.outerWidth(!0):0,right:""}):this._collapseButtonWrapper.css({position:"absolute",right:this.showCloseButton?this._closeButton.outerWidth(!0):0,left:""}),this._centerElement(this._collapseButton,this._collapseButton.parent(),"y")}},_performWidgetLayout:function(){var a;"auto"!==this.width&&this.host.css("width",this.width),this.collapsed||("auto"!==this.height?this.host.height(this.height):this.host.height(this.host.height()),this.host.css("min-height",this.minHeight)),this._setChildrenLayout(),a=this._validateMinSize(),this.host.css({"max-height":this.maxHeight,"min-width":this.minWidth,"max-width":this.maxWidth}),a||this._setChildrenLayout()},_setChildrenLayout:function(){this._header.width(this.host.width()-(this._header.outerWidth(!0)-this._header.width())),this._content.width(this.host.width()-(this._content.outerWidth(!0)-this._content.width())),this._content.height(this.host.height()-this._header.outerHeight(!0)-(this._content.outerHeight(!0)-this._content.height()))},_validateMinSize:function(){var a=!0;this.minHeight<this._header.height()&&(this.minHeight=this._header.height(),a=!1);var b=this._header.children(0).outerWidth(!0),c=this._header.children(1).outerWidth(!0),d=b+c;return this.minWidth<100&&(this.minWidth=Math.min(d,100),a=!1),a},_centerElement:function(a,b,c,d){"number"==typeof b.left&&"number"==typeof b.top&&"number"==typeof b.height&&"number"==typeof b.width?this._centerElementInArea(a,b,c):this._centerElementInParent(a,b,c,d)},_centerElementInParent:function(a,b,c,d){if(c=c.toLowerCase(),d?d+="-":d="",c.indexOf("y")>=0){var e=a.outerHeight(!0),f=b.height(),g=Math.max(0,f-e)/2;a.css(d+"top",g+"px")}if(c.indexOf("x")>=0){var h=a.outerWidth(!0),i=b.width(),j=Math.max(0,i-h)/2;a.css(d+"left",j+"px")}},_centerElementInArea:function(a,b,c){if(c=c.toLowerCase(),c.indexOf("y")>=0){var d=a.outerHeight(!0),e=b.height,f=(e-d)/2;a.css("top",f+b.top+"px")}if(c.indexOf("x")>=0){var g=a.outerWidth(!0),h=b.width,i=(h-g)/2;a.css("left",i+b.left+"px")}},_removeEventHandlers:function(){this.removeHandler(this._header,this._getEvent("mousedown")),this.removeHandler(this._header,this._getEvent("mousemove")),this.removeHandler(this._header,"focus"),this.removeHandler(a(document),this._getEvent("mousemove")+"."+this.host.attr("id")),this.removeHandler(a(document),this._getEvent("mouseup")+"."+this.host.attr("id")),this.removeHandler(this.host,"keydown"),this.removeHandler(this._closeButton,this._getEvent("click")),this.removeHandler(this._closeButton,this._getEvent("mouseenter")),this.removeHandler(this._closeButton,this._getEvent("mouseleave")),this.removeHandler(this._collapseButton,this._getEvent("click")),this.removeHandler(this._collapseButton,this._getEvent("mouseenter")),this.removeHandler(this._collapseButton,this._getEvent("mouseleave")),this.removeHandler(this.host,this._getEvent("mousedown")),this.removeHandler(a(this.okButton),this._getEvent("click"),this._setDialogResultHandler),this.removeHandler(a(this.cancelButton),this._getEvent("click"),this._setDialogResultHandler),this.removeHandler(this._header,this._getEvent("mouseenter")),this.removeHandler(this._header,this._getEvent("mouseleave")),this.removeHandler(this.host,"resizing",this._windowResizeHandler)},_removeFromArray:function(a,b){var c=this._indexOf(a,b);return c>=0?b.splice(this._indexOf(a,b),1):b},_sortByStyle:function(a,b){for(var c=0;c<b.length;c++)for(var d=b.length-1;d>c;d--){var e,f=b[d],g=b[d-1];parseInt(f.css(a),10)<parseInt(g.css(a),10)&&(e=f,b[d]=g,b[d-1]=e)}},_initializeResize:function(){if(this.resizable){var a=this;this.initResize({target:this.host,alsoResize:a._content,maxWidth:a.maxWidth,minWidth:a.minWidth,maxHeight:a.maxHeight,minHeight:a.minHeight,indicatorSize:10,resizeParent:a.dragArea})}},_removeResize:function(){this.removeResize()},_getEvent:function(a){return this._isTouchDevice?this._touchEvents[a]:a},_addEventHandlers:function(){this._addDragDropHandlers(),this._addCloseHandlers(),this._addCollapseHandlers(),this._addFocusHandlers(),this._documentResizeHandlers(),this._closeButtonHover(),this._collapseButtonHover(),this._addDialogButtonsHandlers(),this._addHeaderHoverEffect(),this._addResizeHandlers();var a=this;this.addHandler(this._header,this._getEvent("mousemove"),function(b){a._addHeaderCursorHandlers(a)})},_addResizeHandlers:function(){this.addHandler(this.host,"resizing",this._windowResizeHandler,{self:this})},_windowResizeHandler:function(a){var b=a.data.self;b._header.width(b.host.width()-(b._header.outerWidth(!0)-b._header.width())),b.width=a.args.width,b.height=a.args.height},_addHeaderHoverEffect:function(){var b=this;this.addHandler(this._header,this._getEvent("mouseenter"),function(){a(this).addClass(b.toThemeProperty("MLjqui-window-header-hover"))}),this.addHandler(this._header,this._getEvent("mouseleave"),function(){a(this).removeClass(b.toThemeProperty("MLjqui-window-header-hover"))})},_addDialogButtonsHandlers:function(){this.okButton&&this.addHandler(a(this.okButton),this._getEvent("click"),this._setDialogResultHandler,{self:this,result:"ok"}),this.cancelButton&&this.addHandler(a(this.cancelButton),this._getEvent("click"),this._setDialogResultHandler,{self:this,result:"cancel"})},_documentResizeHandlers:function(){var b=this;this.isModal&&this.addHandler(a(window),"resize.window"+this.element.id,function(){"object"==typeof b._modalBackground&&null!==b._modalBackground&&(b.isOpen()&&b._modalBackground.hide(),b.restricter?(b._modalBackground.css("left",b.dragArea.left),b._modalBackground.css("top",b.dragArea.top),b._modalBackground.width(b.dragArea.width),b._modalBackground.height(b.dragArea.height)):(b._modalBackground.width(b._getDocumentSize().width),b._modalBackground.height(b._getDocumentSize().height)),b.isOpen()&&b._modalBackground.show())})},_setDialogResultHandler:function(a){var b=a.data.self;b._setDialogResult(a.data.result),b.closeWindow()},_setDialogResult:function(a){switch(this.dialogResult.OK=!1,this.dialogResult.None=!1,this.dialogResult.Cancel=!1,a=a.toLowerCase()){case"ok":this.dialogResult.OK=!0;break;case"cancel":this.dialogResult.Cancel=!0;break;default:this.dialogResult.None=!0}},_getDocumentSize:function(){var b=a.MLjqui.browser.msie&&a.MLjqui.browser.version<9,c=b?4:0,d=c;return document.body.scrollHeight>document.body.clientHeight&&b&&(c=this._SCROLL_WIDTH),document.body.scrollWidth>document.body.clientWidth&&b&&(d=this._SCROLL_WIDTH),{width:a(document).width()-c,height:a(document).height()-d}},_closeButtonHover:function(){var a=this;this.addHandler(this._closeButton,this._getEvent("mouseenter"),function(){a._closeButton.addClass(a.toThemeProperty("MLjqui-window-close-button-hover"))}),this.addHandler(this._closeButton,this._getEvent("mouseleave"),function(){a._closeButton.removeClass(a.toThemeProperty("MLjqui-window-close-button-hover"))})},_collapseButtonHover:function(){var a=this;this.addHandler(this._collapseButton,this._getEvent("mouseenter"),function(){a._collapseButton.addClass(a.toThemeProperty("MLjqui-window-collapse-button-hover"))}),this.addHandler(this._collapseButton,this._getEvent("mouseleave"),function(){a._collapseButton.removeClass(a.toThemeProperty("MLjqui-window-collapse-button-hover"))})},_setModalBackgroundStyles:function(){this.isModal&&(this._modalBackground.fadeTo(0,this.modalOpacity),this._modalBackground.css({position:"absolute",top:"0px",left:"0px",width:this._getDocumentSize().width,height:this._getDocumentSize().height,"z-index":this.modalBackgroundZIndex}),this.autoOpen||this._modalBackground.css("display","none"))},_addFocusHandlers:function(){var a=this;this.addHandler(this.host,this._getEvent("mousedown"),function(){a.isModal||a.bringToFront()})},_indexOf:function(a,b){for(var c=0;c<b.length;c++)if(b[c][0]===a[0])return c;return-1},_addCloseHandlers:function(){var a=this;this.addHandler(this._closeButton,this._getEvent("click"),function(b){return a._closeWindow(b)}),"none"!==this.keyboardCloseKey&&"number"!=typeof this.keyboardCloseKey&&"esc"===this.keyboardCloseKey.toLowerCase()&&(this.keyboardCloseKey=27),this.addHandler(this.host,"keydown",function(b){b.keyCode===a.keyboardCloseKey&&null!=a.keyboardCloseKey&&"none"!=a.keyboardCloseKey?a._closeWindow(b):a._handleKeys(b)},{self:this}),this.addHandler(this.host,"keyup",function(b){if(a.keyboardNavigation&&a._moved){var c=a.host.coord(),d=c.left,e=c.top;a._raiseEvent(3,d,e,d,e),a._moved=!1}})},_handleKeys:function(b){if(this.keyboardNavigation&&this._headerFocused&&!a(document.activeElement).ischildof(this._content)){var c=b.ctrlKey,d=b.keyCode,e=this.host.coord(),f=e.left,g=e.top,h=this._getDraggingArea(),i=this.host.width(),j=this.host.height(),k=!0,l=10;switch(d){case 37:c?this.resizable&&this.resize(i-l,j):this.draggable&&f-l>=0&&this.move(f-l,g),k=!1;break;case 38:c?this.resizable&&this.resize(i,j-l):this.draggable&&g-l>=0&&this.move(f,g-l),k=!1;break;case 39:c?this.resizable&&this.resize(i+l,j):this.draggable&&f+i+l<=h.width&&this.move(f+l,g),k=!1;break;case 40:c?this.resizable&&this.resize(i,j+l):this.draggable&&g+j+l<=h.height&&this.move(f,g+l),k=!1}return k||(b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation()),k}},_addCollapseHandlers:function(){var a=this;this.addHandler(this._collapseButton,this._getEvent("click"),function(){a.collapsed?a.expand():a.collapse()})},_closeWindow:function(a){return this.closeWindow(),!1},_addHeaderCursorHandlers:function(a){return a.resizeArea&&a.resizable&&!a.collapsed?void a._header.css("cursor",a._resizeWrapper.css("cursor")):a.draggable?void a._header.css("cursor","move"):(a._header.css("cursor","default"),void(a._resizeWrapper&&a._resizeWrapper.length>0&&a._resizeWrapper.css("cursor","default")))},_addDragDropHandlers:function(){if(this.draggable){var b=this;this.addHandler(this.host,"focus",function(){b._headerFocused=!0}),this.addHandler(this.host,"blur",function(){b._headerFocused=!1}),this.addHandler(this._header,"focus",function(){return b._headerFocused=!0,!1}),this.addHandler(this._header,this._getEvent("mousedown"),function(a,c,d){return c&&(a.pageX=c),d&&(a.pageY=d),b._headerMouseDownHandler(b,a),!0}),this.addHandler(this._header,"dragstart",function(a){return a.preventDefault&&a.preventDefault(),!1}),this.addHandler(this._header,this._getEvent("mousemove"),function(a){return b._headerMouseMoveHandler(b,a)}),this.addHandler(a(document),this._getEvent("mousemove")+"."+this.host.attr("id"),function(a){return b._dragHandler(b,a)}),this.addHandler(a(document),this._getEvent("mouseup")+"."+this.host.attr("id"),function(a){return b._dropHandler(b,a)});try{if(""!=document.referrer||window.frameElement){var c=null;if(null!=window.top&&window.top!=window.self&&window.parent&&document.referrer&&(c=document.referrer),c&&-1!=c.indexOf(document.location.host)){var d=function(a){b._dropHandler(b,a)};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",d,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",d)}}}catch(e){}}},_headerMouseDownHandler:function(b,c){if(b.isModal||b.bringToFront(),null==b._resizeDirection){var d=a.MLjqui.mobile.getTouches(c),e=(d[0],a.MLjqui.position(c));b._mousePosition.x=e.left,b._mousePosition.y=e.top,b._mouseDown=!0,b._isDragging=!1}},_headerMouseMoveHandler:function(b,c){if(b._mouseDown&&!b._isDragging){var d=a.MLjqui.mobile.getTouches(c),e=d[0],f=e.pageX,g=e.pageY,h=a.MLjqui.position(c);return f=h.left,g=h.top,(f+3<b._mousePosition.x||f-3>b._mousePosition.x||g+3<b._mousePosition.y||g-3>b._mousePosition.y)&&(b._isDragging=!0,b._mousePosition={x:f,y:g},b._windowPosition={x:b.host.coord().left,y:b.host.coord().top},a(document.body).addClass(b.toThemeProperty("MLjqui-disableselect"))),b._isTouchDevice?(c.preventDefault(),!0):!1}return b._isDragging?b._isTouchDevice?(c.preventDefault(),!0):!1:!0},_dropHandler:function(b,c){var d=!0;if(b._isDragging&&!b.isResizing&&!b._resizeDirection){var e=parseInt(b.host.css("left"),10),f=parseInt(b.host.css("top"),10),g=b._isTouchDevice?0:c.pageX,h=b._isTouchDevice?0:c.pageY;b.enableResize=b._enableResizeBackup,b._enableResizeBackup="undefined",b._raiseEvent(3,e,f,g,h),d=!1,"undefined"!=c.preventDefault&&c.preventDefault(),null!=c.originalEvent&&(c.originalEvent.mouseHandled=!0),"undefined"!=c.stopPropagation&&c.stopPropagation()}return b._isDragging=!1,b._mouseDown=!1,a(document.body).removeClass(b.toThemeProperty("MLjqui-disableselect")),d},_dragHandler:function(b,c){if(b._isDragging&&!b.isResizing&&!b._resizeDirection){var d=b._isTouchDevice?c.originalEvent.which:c.which;if("undefined"==typeof b._enableResizeBackup&&(b._enableResizeBackup=b.enableResize),b.enableResize=!1,0===d&&a.MLjqui.browser.msie&&a.MLjqui.browser.version<8)return b._dropHandler(b,c);var e=a.MLjqui.mobile.getTouches(c),f=(e[0],a.MLjqui.position(c)),g=f.left,h=f.top,i=g-b._mousePosition.x,j=h-b._mousePosition.y,k=b._windowPosition.x+i,l=b._windowPosition.y+j;return b.move(k,l,c),c.preventDefault(),!1}return!0},_validateCoordinates:function(a,b,c,d){var e=this._getDraggingArea();a=a<e.left?e.left:a,b=b<e.top?e.top:b;var f=this.host.outerWidth(!0),g=this.host.outerHeight(!0);return a+f>=e.width+e.left-2*d&&(a=e.width+e.left-f-d),b+g>=e.height+e.top-c&&(b=e.height+e.top-g-c),{x:a,y:b}},_performLayout:function(){this._performHeaderLayout(),this._performWidgetLayout()},_parseDragAreaAttributes:function(){null!==this.dragArea&&(this.dragArea.height=parseInt(this.dragArea.height,10),this.dragArea.width=parseInt(this.dragArea.width,10),this.dragArea.top=parseInt(this.dragArea.top,10),this.dragArea.left=parseInt(this.dragArea.left,10))},_positionWindow:function(){if(this._parseDragAreaAttributes(),this.position instanceof Array&&2===this.position.length&&"number"==typeof this.position[0]&&"number"==typeof this.position[1])this.host.css({left:this.position[0],top:this.position[1]});else if(this.position instanceof Object){if(this.position.left)this.host.offset(this.position);else if(void 0!==this.position.x&&void 0!=this.position.y)this.host.css({left:this.position.x,top:this.position.y});else if(this.position.center){this._centerElement(this.host,this.position.center,"xy");var a=this.position.center.coord(),b=parseInt(this.host.css("left")),c=parseInt(this.host.css("top"));this.host.css({left:b+a.left,top:c+a.top})}}else this._positionFromLiteral()},_getDraggingArea:function(){var a={};return a.left=this.dragArea&&this.dragArea.left?this.dragArea.left:0,a.top=this.dragArea&&this.dragArea.top?this.dragArea.top:0,a.width=this.dragArea&&this.dragArea.width?this.dragArea.width:this._getDocumentSize().width,a.height=this.dragArea&&this.dragArea.height?this.dragArea.height:this._getDocumentSize().height,a},_positionFromLiteral:function(){this.position instanceof Array||(this.position=this.position.split(","));for(var b=this.position.length,c=this._getDraggingArea();b;)switch(b-=1,this.position[b]=this.position[b].replace(/ /g,""),this.position[b]){case"top":this.host.css("top",c.top);break;case"left":this.host.css("left",c.left);break;case"bottom":this.host.css("top",c.height-this.host.height()+c.top);break;case"right":this.host.css("left",c.left+c.width-this.host.width());break;default:this.dragArea||(c=a(window)),this._centerElement(this.host,c,"xy")}},_raiseEvent:function(b){var c=this._events[b],d=a.Event(c),e={};return 2!==b&&3!==b||(e.x=arguments[1],e.y=arguments[2],e.pageX=arguments[3],e.pageY=arguments[4]),"closed"!==c&&"close"!==c||(e.dialogResult=this.dialogResult),d.args=e,this.host.trigger(d)},destroy:function(){this.removeHandler(a(window),"resize.window"+this.element.id),this._removeEventHandlers(),this._destroy()},_destroy:function(){this.restricter&&(this.removeHandler(a(window),"resize."+this.element.id),this.removeHandler(a(window),"orientationchanged."+this.element.id),this.removeHandler(a(window),"orientationchange."+this.element.id)),this.host.remove(),null!==this._modalBackground&&this._modalBackground.remove()},_toClose:function(a,b){return a&&b[0]===this.element||b[0]!==this.element&&"object"==typeof b[0]},propertyChangedHandler:function(b,c,d,e){switch(this._validateProperties(),c){case"rtl":this._performLayout();break;case"dragArea":this._positionWindow();break;case"collapseButtonSize":this._performLayout();break;case"closeButtonSize":this._performLayout();break;case"isModal":this._refresh(),this._fixWindowZIndex();break;case"keyboardCloseKey":this._removeEventHandlers(),this._addEventHandlers();break;case"disabled":e?this.disable():(this.disabled=!0,this.enable());break;case"showCloseButton":case"showCollapseButton":this._performLayout();break;case"height":this._performLayout();break;case"width":this._performLayout();break;case"title":this.setTitle(e),this.title=e;break;case"content":this.setContent(e);break;case"draggable":this._removeEventHandlers(),this._addEventHandlers(),this._removeResize(),this._initializeResize();break;case"resizable":this.enableResize=e,e?this._initializeResize():this._removeResize();break;case"position":this._positionWindow();break;case"modalOpacity":this._setModalBackgroundStyles();break;case"okButton":e?this._addDialogButtonsHandlers():this.removeHandler(this.okButton);break;case"cancelButton":e?this._addDialogButtonsHandlers():this.removeHandler(this.cancelButton);break;case"collapsed":e?d||(this.collapsed=!1,this.collapse(0)):d&&(this.collapsed=!0,this.expand(0));case"theme":a.MLjqui.utilities.setTheme(d,e,this.host);break;case"enableResize":return;case"maxWidth":case"maxHeight":case"minWidth":case"minHeight":return b._performLayout(),b._removeResize(),void b._initializeResize();default:return}},collapse:function(b){if(!this.collapsed&&!this.host.is(":animated")){if("none"==this.host.css("display"))return;var c=this,d=this._header.outerHeight(!0),e=parseInt(this._header.css("border-bottom-width"),10),f=parseInt(this._header.css("margin-bottom"),10),b=isNaN(parseInt(b))?this.collapseAnimationDuration:b;isNaN(e)||(d-=2*e),isNaN(f)||(d+=f),this._heightBeforeCollapse=this.host.height(),this._minHeightBeforeCollapse=this.host.css("min-height"),this.host.css("min-height",d),this.host.animate({height:d},b,function(){c.collapsed=!0,c._collapseButton.addClass(c.toThemeProperty("MLjqui-window-collapse-button-collapsed")),c._collapseButton.addClass(c.toThemeProperty("MLjqui-icon-arrow-down")),c._content.css("display","none"),c._raiseEvent(5),c._raiseEvent(9),a.MLjqui.aria(c,"aria-expanded",!1)})}},expand:function(b){if(this.collapsed&&!this.host.is(":animated")){var c=this,b=isNaN(parseInt(b))?this.collapseAnimationDuration:b;this.host.animate({height:this._heightBeforeCollapse},b,function(){c.collapsed=!1,c.host.css("min-height",c._minHeightBeforeCollapse),c._collapseButton.removeClass(c.toThemeProperty("MLjqui-window-collapse-button-collapsed")),c._collapseButton.removeClass(c.toThemeProperty("MLjqui-icon-arrow-down")),c._content.css("display","block"),c._raiseEvent(6),c._performWidgetLayout(),c._raiseEvent(9),a.MLjqui.aria(c,"aria-expanded",!0)})}},closeAll:function(b){for(var b=!0,c=a.data(document.body,"MLjquiwindows-list"),d=c.length,e=a.data(document.body,"MLjquiwindow-modal")||[];d;)d-=1,this._toClose(b,c[d])&&(c[d].MLjquiWindow("closeWindow","close"),c.splice(d,1));this._toClose(b,e)&&(e.MLjquiWindow("closeWindow","close"),a.data(document.body,"MLjquiwindow-modal",[])),a.data(document.body,"MLjquiwindows-list",c)},setTitle:function(b){a.MLjqui.utilities.html(this._headerContentWrapper,b),this.title=b,this._performLayout()},setContent:function(b){this._contentInitialized=!1;for(var c=this._content,d=!1;!d;)c.css("height","auto"),c.css("width","auto"),c.is(".MLjqui-window")?d=!0:c=c.parent();a.MLjqui.utilities.html(this._content,b),this._performLayout()},disable:function(){console.log("dddddddddddddddddddddddddddddddddddddd"),this.disabled=!0,this._removeEventHandlers(),this._header.addClass(this.toThemeProperty("MLjqui-window-header-disabled")),this._closeButton.addClass(this.toThemeProperty("MLjqui-window-close-button-disabled")),this._collapseButton.addClass(this.toThemeProperty("MLjqui-window-collapse-button-disabled")),this._content.addClass(this.toThemeProperty("MLjqui-window-content-disabled")),this.host.addClass(this.toThemeProperty("MLjqui-window-disabled")),this.host.addClass(this.toThemeProperty("MLjqui-fill-state-disabled")),this._removeResize()},enable:function(){this.disabled&&(this._addEventHandlers(),this._header.removeClass(this.toThemeProperty("MLjqui-window-header-disabled")),this._content.removeClass(this.toThemeProperty("MLjqui-window-content-disabled")),this._closeButton.removeClass(this.toThemeProperty("MLjqui-window-close-button-disabled")),this._collapseButton.removeClass(this.toThemeProperty("MLjqui-window-collapse-button-disabled")),this.host.removeClass(this.toThemeProperty("MLjqui-window-disabled")),this.host.removeClass(this.toThemeProperty("MLjqui-fill-state-disabled")),this.disabled=!1,this._initializeResize())},isOpen:function(){return this._visible},closeWindow:function(a){var b=this;a="undefined"==typeof a?this.closeButtonAction:a,this.hide(function(){"close"===a&&b._destroy()})},bringToFront:function(){var b=a.data(document.body,"MLjquiwindows-list");if(this.isModal)return b=a.data(document.body,"MLjquiwindows-modallist"),this._fixWindowZIndex("modal-hide"),void this._fixWindowZIndex("modal-show");for(var c=b[b.length-1],d=parseInt(c.css("z-index"),10),e=this._indexOf(this.host,b),f=b.length-1;f>e;f-=1){var g=parseInt(b[f].css("z-index"),10)-1;b[f].css("z-index",g)}this.host.css("z-index",d),this._sortByStyle("z-index",b)},hide:function(a,b,c){if(this.closing){var d=this.closing();if(0==d)return}switch(b=b||this.closeAnimationDuration,this.animationType){case"none":this.host.css("display","none");break;case"fade":this.host.fadeOut(b,function(){a instanceof Function&&a()});case"slide":this.host.slideUp(b,function(){
a instanceof Function&&a()});case"combined":this.host.hide(b,function(){a instanceof Function&&a()})}this._visible=!1,this.isModal&&(this._modalBackground.hide(),this._fixWindowZIndex("modal-hide")),c!==!0&&(this._raiseEvent(1),this._raiseEvent(8))},open:function(a,b){this.show(a,b)},close:function(a,b,c){this.hide(a,b,c)},show:function(a,b){switch(this._setDialogResult("none"),b=b||this.showAnimationDuration,this.animationType){case"none":this.host.css("display","block");break;case"fade":this.host.fadeIn(b,function(){a instanceof Function&&a()});break;case"slide":this.host.slideDown(b,function(){a instanceof Function&&a()});break;case"combined":this.host.show(b,function(){a instanceof Function&&a()})}this.isModal&&(this._modalBackground.show(),this._fixWindowZIndex("modal-show"));var c=this;if(this._visible||(b>150&&"none"!=this.animationType?setTimeout(function(){c._contentInitialized||c.initContent&&(c.initContent(),c._contentInitialized=!0),c._raiseEvent(7),c._raiseEvent(9)},b-150):(c._contentInitialized||c.initContent&&(c.initContent(),c._contentInitialized=!0),this._raiseEvent(7),c._raiseEvent(9))),this._visible=!0,this._performLayout(),this.autoFocus){var d=function(){c._isTouchDevice||c._content.focus()};d(),setTimeout(function(){d()},100)}},_getTabbables:function(){var b=this._content.find("*"),c=new Array;return a.each(b,function(){d(this)&&(c[c.length]=this)}),c},move:function(b,c,d,e){var f,g,h,i=0,j=0,b=parseInt(b,10),c=parseInt(c,10);if(a.MLjqui.browser.msie&&(a(window).width()>a(document).width()&&!this.dragArea&&(j=this._SCROLL_WIDTH),a(window).height()<a(document).height()&&document.documentElement.clientWidth>document.documentElement.scrollWidth&&!this.dragArea&&(i=this._SCROLL_WIDTH)),f=this._validateCoordinates(b,c,j,i),parseInt(this.host.css("left"),10)!==f.x||parseInt(this.host.css("top"),10)!==f.y){if(d){var k=a.MLjqui.mobile.getTouches(d),l=(k[0],a.MLjqui.position(d));g=l.left,h=l.top}void 0==g&&(g=b),void 0==h&&(h=c),e!==!1&&this._raiseEvent(2,f.x,f.y,g,h)}this.element.style.left=f.x+"px",this.element.style.top=f.y+"px",this._moved=!0}})}(MLjquiBaseFramework),function(a){var b=function(a){return{resizeConfig:function(){this.resizeTarget=null,this.resizeIndicatorSize=5,this.resizeTargetChildren=null,this.isResizing=!1,this.resizeArea=!1,this.minWidth=1,this.maxWidth=100,this.minHeight=1,this.maxHeight=100,this.resizeParent=null,this.enableResize=!0,this._cursorBackup,this._resizeEvents=["resizing","resized","resize"],this._resizeMouseDown=!1,this._resizeCurrentMode=null,this._mouseResizePosition={},this._resizeMethods=null,this._SCROLL_WIDTH=21},_resizeExceptions:{invalidTarget:"Invalid target!",invalidMinHeight:"Invalid minimal height!",invalidMaxHeight:"Invalid maximum height!",invalidMinWidth:"Invalid minimum width!",invalidMaxWidth:"Invalid maximum width!",invalidIndicatorSize:"Invalid indicator size!",invalidSize:"Invalid size!"},removeResize:function(){if(this.resizeTarget){var b=a(this.resizeTarget.children(".MLjqui-resize"));b.detach();var c=b.children();this._removeResizeEventListeners();for(var d=0;d<c.length;d+=1)a(c[d]).detach(),this.resizeTarget.append(c[d]);b.remove()}},initResize:function(b){this.resizeConfig(),this.resizeTarget=a(b.target),this.resizeIndicatorSize=b.indicatorSize||10,this.maxWidth=b.maxWidth||100,this.minWidth=b.minWidth||1,this.maxHeight=b.maxHeight||100,this.minHeight=b.minHeight||1,this.resizeParent=b.resizeParent,this._parseResizeParentProperties(),this._validateResizeProperties(),this._validateResizeTargetDimensions(),this._getChildren(this.resizeTarget.maxWidth,this.resizeTarget.minWidth,this.resizeTarget.maxHeight,this.resizeTarget.minHeight,b.alsoResize),this._refreshResize(),this._cursorBackup=this.resizeTarget.css("cursor"),"auto"===this._cursorBackup&&(this._cursorBackup="default")},_validateResizeTargetDimensions:function(){this.resizeTarget.maxWidth=this.maxWidth,this.resizeTarget.minWidth=3*this.resizeIndicatorSize>this.minWidth?3*this.resizeIndicatorSize:this.minWidth,this.resizeTarget.maxHeight=this.maxHeight,this.resizeTarget.minHeight=3*this.resizeIndicatorSize>this.minHeight?3*this.resizeIndicatorSize:this.minHeight},_parseResizeParentProperties:function(){this.resizeParent&&(this.resizeParent.left=parseInt(this.resizeParent.left,10),this.resizeParent.top=parseInt(this.resizeParent.top,10),this.resizeParent.width=parseInt(this.resizeParent.width,10),this.resizeParent.height=parseInt(this.resizeParent.height,10))},_getChildren:function(b,c,d,e,f){this.resizeTargetChildren=a(f),this.resizeTargetChildren.toArray();for(var g=this.resizeTargetChildren.length;g;)g-=1,this.resizeTargetChildren[g]=a(this.resizeTargetChildren[g])},_refreshResize:function(){this._renderResize(),this._performResizeLayout(),this._removeResizeEventListeners(),this._addResizeEventHandlers()},_renderResize:function(){this.resizeTarget.wrapInner(a("<div></div>")),this._resizeWrapper=this.resizeTarget.children(0),this._resizeWrapper.addClass("MLjqui-resize"),this._resizeWrapper.addClass("MLjqui-rc-all"),this._resizeWrapper.css("z-index",8e3)},_performResizeLayout:function(){this._resizeWrapper.height(this.resizeTarget.height()),this._resizeWrapper.width(this.resizeTarget.width())},_removeResizeEventListeners:function(){var b=this.resizeTarget.attr("id");this.removeHandler(this._resizeWrapper,"mousemove.resize"+b),this.removeHandler(this._resizeWrapper,"mousedown.resize"+b),this.removeHandler(a(document),"mousemove.resize"+b),this.removeHandler(a(document),"mouseup.resize"+b)},_addResizeEventHandlers:function(){var b=this.resizeTarget.attr("id"),c=this;this.addHandler(this._resizeWrapper,"mousemove.resize."+b,function(a){c._resizeCursorChangeHandler(c,a)}),this.addHandler(this._resizeWrapper,"mousedown.resize."+b,function(a){c._resizeMouseDownHandler(c,a)}),this.addHandler(a(document),"mousemove.resize."+b,function(a){return c._resizeHandler(c,a)}),this.addHandler(a(document),"mouseup.resize."+b,function(a){c._stopResizing(c,a)});try{if(""!=document.referrer||window.frameElement){var d=function(a){c._stopResizing(c,a)};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",d,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",d)}}catch(e){}},_stopResizing:function(a,b){a.enableResize&&(a.isResizing&&a._raiseResizeEvent(1),a._resizeMouseDown=!1,a.isResizing=!1,a._resizeDirection=null,a.resizeTarget&&a.resizeTarget.removeClass("MLjqui-disableselect")),"undefined"==a._cursorBackup&&(a._cursorBackup="default"),a._resizeWrapper&&a._resizeWrapper.css("cursor",a._cursorBackup)},_resizeHandler:function(b,c){return b.enableResize&&!b.collapsed?b.isResizing&&b._resizeDirection?(0===c.which&&a.MLjqui.browser.msie&&a.MLjqui.browser.version<9&&b._stopResizing(c),b._performResize(c.pageX,c.pageY),!1):b._resizeCaptureCursor(c.pageX,c.pageY):void 0},_resizeCaptureCursor:function(a,b){return this._resizeMouseDown&&!this.isResizing&&this._resizeDirection&&(a+3<this._mouseResizePosition.x||a-3>this._mouseResizePosition.x||b+3<this._mouseResizePosition.y||b-3>this._mouseResizePosition.y)?(this._changeCursor(a-parseInt(this.resizeTarget.css("left")),b-parseInt(this.resizeTarget.css("top"))),this._mouseResizePosition={x:a,y:b},this._prepareResizeMethods(this._resizeDirection),this._resizeBackupData(),this.isResizing=!0,this.resizeTarget.addClass("MLjqui-disableselect"),!1):void 0},_resizeBackupData:function(){this.resizeTarget.lastWidth=this.resizeTarget.width(),this.resizeTarget.lastHeight=this.resizeTarget.height(),this.resizeTarget.x=parseInt(this.resizeTarget.css("left"),10),this.resizeTarget.y=parseInt(this.resizeTarget.css("top"),10),this._resizeBackupChildrenSize()},_resizeBackupChildrenSize:function(){for(var a,b=this.resizeTargetChildren.length;b;)b-=1,a=this.resizeTargetChildren[b],this.resizeTargetChildren[b].lastWidth=a.width(),this.resizeTargetChildren[b].lastHeight=a.height()},_performResize:function(a,b){var c=a-this._mouseResizePosition.x,d=b-this._mouseResizePosition.y;this._resizeDirection&&this._resize(this.resizeTarget,c,d)},_resizeCursorChangeHandler:function(a,b){a.enableResize&&!a.collapsed&&(a.isResizing||a._changeCursor(b.pageX-parseInt(a.resizeTarget.css("left")),b.pageY-parseInt(a.resizeTarget.css("top"))))},_resizeMouseDownHandler:function(a,b){a.enableResize&&null!==a._resizeDirection&&(a._resizeMouseDown=!0,a._mouseResizePosition.x=b.pageX,a._mouseResizePosition.y=b.pageY,b.preventDefault())},_validateResizeProperties:function(){try{if(!this.resizeTarget||1!==this.resizeTarget.length)throw new Error(this._resizeExceptions.invalidTarget);if(this.minHeight<0||isNaN(parseInt(this.minHeight)))throw new Error(this._resizeExceptions.invalidMinHeight);if(this.maxHeight<=0||isNaN(parseInt(this.maxHeight)))throw new Error(this._resizeExceptions.invalidMaxHeight);if(this.minWidth<0||isNaN(parseInt(this.minWidth)))throw new Error(this._resizeExceptions.invalidMinWidth);if(this.maxWidth<0||isNaN(parseInt(this.maxWidth)))throw new Error(this._resizeExceptions.invalidMaxWidth);if(this.resizeIndicatorSize<0||isNaN(parseInt(this.resizeIndicatorSize)))throw new Error(this._resizeExceptions.invalidIndicatorSize);if(this.minHeight>this.maxHeight||this.minWidth>this.maxWidth)throw new Error(this._resizeExceptions.invalidSize)}catch(a){alert(a)}},_changeCursor:function(a,b){this.isResizing||this._resizeMouseDown||(this.resizeArea=!0,a<=this.resizeIndicatorSize&&a>=0&&b<=this.resizeIndicatorSize&&b>0?(this._resizeWrapper.css("cursor","nw-resize"),this._resizeDirection="topleft"):b<=this.resizeIndicatorSize&&b>0&&a>=this.resizeTarget.width()-this.resizeIndicatorSize?(this._resizeWrapper.css("cursor","ne-resize"),this._resizeDirection="topright"):b>=this.resizeTarget.height()-this.resizeIndicatorSize&&b<this.resizeTarget.height()&&a<=this.resizeIndicatorSize&&a>=0?(this._resizeWrapper.css("cursor","sw-resize"),this._resizeDirection="bottomleft"):b>=this.resizeTarget.height()-this.resizeIndicatorSize&&b<this.resizeTarget.height()&&a>=this.resizeTarget.width()-this.resizeIndicatorSize&&a<this.resizeTarget.width()?(this._resizeWrapper.css("cursor","se-resize"),this._resizeDirection="bottomright"):a<=this.resizeIndicatorSize&&a>=0?(this._resizeWrapper.css("cursor","e-resize"),this._resizeDirection="left"):b<=this.resizeIndicatorSize&&b>0?(this._resizeWrapper.css("cursor","n-resize"),this._resizeDirection="top"):b>=this.resizeTarget.height()-this.resizeIndicatorSize&&b<this.resizeTarget.height()?(this._resizeWrapper.css("cursor","n-resize"),this._resizeDirection="bottom"):a>=this.resizeTarget.width()-this.resizeIndicatorSize&&a<this.resizeTarget.width()?(this._resizeWrapper.css("cursor","e-resize"),this._resizeDirection="right"):(this._resizeWrapper.css("cursor",this._cursorBackup),this._resizeDirection=null,this.resizeArea=!1))},_prepareResizeMethods:function(a){this._resizeMethods=[],a.indexOf("left")>=0&&this._resizeMethods.push(this._resizeLeft),a.indexOf("top")>=0&&this._resizeMethods.push(this._resizeTop),a.indexOf("right")>=0&&this._resizeMethods.push(this._resizeRight),a.indexOf("bottom")>=0&&this._resizeMethods.push(this._resizeBottom)},_validateResize:function(a,b,c,d,e){return"horizontal"===c||"both"===c?this._validateWidth(a,d,e):"vertical"===c||"both"===c?this._validateHeight(b,d,e):{result:!1,fix:0}},_getParent:function(){return null!==this.resizeParent&&"undefined"!==this.resizeParent&&this.resizeParent.height&&this.resizeParent.width&&this.resizeParent.top&&this.resizeParent.left?this.resizeParent:{left:0,top:0,width:a(document).width(),height:a(document).height()}},_validateHeight:function(b,c,d){var e=0,f=2,g=this._getParent();return a(window).width()>a(document).width()&&a.MLjqui.browser.msie&&g.height===a(document).height()&&(e=this._SCROLL_WIDTH),"bottom"===d&&b+c.position().top+e+f>g.height+g.top?{fix:g.height-c.position().top-e-f+g.top,result:!1}:"top"===d&&c.lastHeight-b+c.y<g.top?{fix:b+(c.lastHeight-b+c.y)-g.top,result:!1}:b<c.minHeight?{fix:c.minHeight,result:!1}:b>c.maxHeight?{fix:c.maxHeight,result:!1}:{result:!0,fix:b}},_validateWidth:function(b,c,d){var e=0,f=2,g=this._getParent();return a(window).height()<a(document).height()&&a.MLjqui.browser.msie&&document.documentElement.clientWidth>=document.documentElement.scrollWidth&&g.width===a(document).width()&&(e=this._SCROLL_WIDTH),"right"===d&&b+c.position().left+e+f>g.width+g.left?{fix:g.width-c.position().left-e-f+g.left,result:!1}:"left"===d&&c.lastWidth-b+c.x<g.left?{fix:b+(c.lastWidth-b+c.x)-g.left,result:!1}:b<c.minWidth?{fix:c.minWidth,result:!1}:b>c.maxWidth?{fix:c.maxWidth,result:!1}:{result:!0,fix:b}},_resize:function(a,b,c){for(var d=(this._resizeDirection,this._resizeMethods.length),e=0;d>e;e++)if(this._resizeMethods[e]instanceof Function){var f={element:a,x:b,y:c,self:this};this._resizeMethods[e](f)}this._performResizeLayout()},resize:function(a,b){if(this.resizable){var c=a-this.host.width(),d=b-this.host.height(),e="right";0!=d&&(e="bottom"),this._resizeDirection=e,this._prepareResizeMethods(this._resizeDirection),this._resizeBackupData(),this.isResizing=!0,this._resize(this.resizeTarget,c,d),this.isResizing=!1}},_setResizeChildrenSize:function(a,b){for(var c=this.resizeTargetChildren.length;c;)if(c--,"width"===b){var d=this.resizeTargetChildren[c].lastWidth-(this.resizeTarget.lastWidth-a);d<this.resizeTarget.maxWidth&&d>0&&this.resizeTargetChildren[c].width(d)}else{var e=this.resizeTargetChildren[c].lastHeight-(this.resizeTarget.lastHeight-a);e<this.resizeTarget.maxHeight&&e>0&&this.resizeTargetChildren[c].height(e)}},_resizeRight:function(a){var b=a.element.lastWidth+a.x,c=a.self._validateResize(b,0,"horizontal",a.element,"right");return c.result||(b=c.fix),a.element.width()!==b&&(a.self._setResizeChildrenSize(b,"width"),a.element.width(b),a.self._raiseResizeEvent(0)),b},_resizeLeft:function(a){var b=a.element.lastWidth-a.x,c=a.self._validateResize(b,0,"horizontal",a.element,"left"),d=a.element.x+a.x;return c.result?(a.element.width()!==b&&(a.self._setResizeChildrenSize(b,"width"),a.element.width(b),a.element.css("left",d),a.self._raiseResizeEvent(0)),b):(d=a.element.x+(a.element.lastWidth-c.fix),void(b=c.fix))},_resizeBottom:function(a){var b=a.element.lastHeight+a.y,c=a.self._validateResize(0,b,"vertical",a.element,"bottom");return c.result||(b=c.fix),a.element.height()!==b&&(a.self._setResizeChildrenSize(b,"height"),a.element.height(b),a.self._raiseResizeEvent(0)),b},_resizeTop:function(a){var b=a.element.lastHeight-a.y,c=a.self._validateResize(0,b,"vertical",a.element,"top"),d=a.element.y+a.y;return c.result?(a.element.height()!==b&&(a.self._setResizeChildrenSize(b,"height"),a.element.height(b),a.element.css("top",d),a.self._raiseResizeEvent(0)),b):(d=a.element.y+(a.element.lastHeight-c.fix),void(b=c.fix))},_raiseResizeEvent:function(b){var c=this._resizeEvents[b],d=a.Event(c),e={};if(e.width=parseInt(this.resizeTarget[0].style.width),e.height=parseInt(this.resizeTarget[0].style.height),d.args=e,0==b){var c=this._resizeEvents[2],f=a.Event(c);f.args=e,this.resizeTarget.trigger(f)}return this.resizeTarget.trigger(d)}}}(MLjquiBaseFramework);a.extend(a.MLjqui._MLjquiWindow.prototype,b)}(MLjquiBaseFramework),function(a){a.MLjqui.cssroundedcorners=function(a){var b={all:"MLjqui-rc-all",top:"MLjqui-rc-t",bottom:"MLjqui-rc-b",left:"MLjqui-rc-l",right:"MLjqui-rc-r","top-right":"MLjqui-rc-tr","top-left":"MLjqui-rc-tl","bottom-right":"MLjqui-rc-br","bottom-left":"MLjqui-rc-bl"};for(prop in b)if(b.hasOwnProperty(prop)&&a==prop)return b[prop]},a.MLjqui.MLjquiWidget("MLjquiButton","",{}),a.extend(a.MLjqui._MLjquiButton.prototype,{defineInstance:function(){var b={cursor:"arrow",roundedCorners:"all",disabled:!1,height:null,width:null,overrideTheme:!1,enableHover:!0,enableDefault:!0,enablePressed:!0,imgPosition:"center",imgSrc:"",imgWidth:16,imgHeight:16,value:null,textPosition:"",textImageRelation:"overlay",rtl:!1,_ariaDisabled:!1,_scrollAreaButton:!1,template:"default",aria:{"aria-disabled":{name:"disabled",type:"boolean"}}};return a.extend(!0,this,b),b},_addImage:function(b){var c=this;if("input"==c.element.nodeName.toLowerCase()||"button"==c.element.nodeName.toLowerCase()||"div"==c.element.nodeName.toLowerCase()){if(c._img)c._img[0].setAttribute("src",c.imgSrc),c._img[0].setAttribute("width",c.imgWidth),c._img[0].setAttribute("height",c.imgHeight),c._text.html(c.value);else{c.field=c.element,c.field.className&&(c._className=c.field.className);var d={title:c.field.title},e=null;if(c.field.getAttribute("value"))var e=c.field.getAttribute("value");else if("input"!=c.element.nodeName.toLowerCase())var e=c.element.innerHTML;c.value&&(e=c.value),c.field.id.length?d.id=c.field.id.replace(/[^\w]/g,"_")+"_"+b:d.id=a.MLjqui.utilities.createId()+"_"+b;var f=a("<div></div>",d);f[0].style.cssText=c.field.style.cssText,f.css("box-sizing","border-box");var g=a("<img/>");g[0].setAttribute("src",c.imgSrc),g[0].setAttribute("width",c.imgWidth),g[0].setAttribute("height",c.imgHeight),f.append(g),c._img=g;var h=a("<span></span>");e&&(h.html(e),c.value=e),f.append(h),c._text=h,a(c.field).hide().after(f);var i=c.host.data();if(c.host=f,c.host.data(i),c.element=f[0],c.element.id=c.field.id,c.field.id=d.id,c._className&&(c.host.addClass(c._className),a(c.field).removeClass(c._className)),c.field.tabIndex){var j=c.field.tabIndex;c.field.tabIndex=-1,c.element.tabIndex=j}}c.imgSrc?c._img.show():c._img.hide(),c.value?c._text.show():c._text.hide(),c._positionTextAndImage()}},_positionTextAndImage:function(){var a=this,b=a.host.outerWidth(),c=a.host.outerHeight(),d=a.imgWidth,e=a.imgHeight;""==a.imgSrc&&(d=0,e=0);var f=a._text.width(),g=a._text.height(),h=4,i=4,j=4,k=0,l=0;switch(a.textImageRelation){case"imageBeforeText":case"textBeforeImage":k=d+f+2*j+h+2*i,l=Math.max(e,g)+2*j+h+2*i;break;case"imageAboveText":case"textAboveImage":k=Math.max(d,f)+2*j,l=e+g+h+2*j+2*i;break;case"overlay":k=Math.max(d,f)+2*j,l=Math.max(e,g)+2*j}a.width||(a.host.width(k),b=k),a.height||(a.host.height(l),c=l),a._img.css("position","absolute"),a._text.css("position","absolute"),a.host.css("position","relative"),a.host.css("overflow","hidden");var m={},n={},o=function(a,b,c,d,e){switch(b.width<d&&(b.width=d),b.height<e&&(b.height=e),c){case"left":a.style.left=b.left+"px",a.style.top=b.top+b.height/2-e/2+"px";break;case"topLeft":a.style.left=b.left+"px",a.style.top=b.top+"px";break;case"bottomLeft":a.style.left=b.left+"px",a.style.top=b.top+b.height-e+"px";break;default:case"center":a.style.left=b.left+b.width/2-d/2+"px",a.style.top=b.top+b.height/2-e/2+"px";break;case"top":a.style.left=b.left+b.width/2-d/2+"px",a.style.top=b.top+"px";break;case"bottom":a.style.left=b.left+b.width/2-d/2+"px",a.style.top=b.top+b.height-e+"px";break;case"right":a.style.left=b.left+b.width-d+"px",a.style.top=b.top+b.height/2-e/2+"px";break;case"topRight":a.style.left=b.left+b.width-d+"px",a.style.top=b.top+"px";break;case"bottomRight":a.style.left=b.left+b.width-d+"px",a.style.top=b.top+b.height-e+"px"}},p=0,q=0,r=b,s=c,t=(r-p)/2,u=(s-q)/2,v=a._img,w=a._text,x=s-q,y=r-p;switch(p+=i,q+=i,r=r-i-2,y=y-2*i-2,x=x-2*i-2,a.textImageRelation){case"imageBeforeText":switch(a.imgPosition){case"left":case"topLeft":case"bottomLeft":n={left:p,top:q,width:p+d,height:x},m={left:p+d+h,top:q,width:y-d-h,height:x};break;case"center":case"top":case"bottom":n={left:t-f/2-d/2-h/2,top:q,width:d,height:x},m={left:n.left+d+h,top:q,width:r-n.left-d-h,height:x};break;case"right":case"topRight":case"bottomRight":n={left:r-f-d-h,top:q,width:d,height:x},m={left:n.left+d+h,top:q,width:r-n.left-d-h,height:x}}o(v[0],n,a.imgPosition,d,e),o(w[0],m,a.textPosition,f,g);break;case"textBeforeImage":switch(a.textPosition){case"left":case"topLeft":case"bottomLeft":m={left:p,top:q,width:p+f,height:x},n={left:p+f+h,top:q,width:y-f-h,height:x};break;case"center":case"top":case"bottom":m={left:t-f/2-d/2-h/2,top:q,width:f,height:x},n={left:m.left+f+h,top:q,width:r-m.left-f-h,height:x};break;case"right":case"topRight":case"bottomRight":m={left:r-f-d-h,top:q,width:f,height:x},n={left:m.left+f+h,top:q,width:r-m.left-f-h,height:x}}o(v[0],n,a.imgPosition,d,e),o(w[0],m,a.textPosition,f,g);break;case"imageAboveText":switch(a.imgPosition){case"topRight":case"top":case"topLeft":n={left:p,top:q,width:y,height:e},m={left:p,top:q+e+h,width:y,height:x-e-h};break;case"left":case"center":case"right":n={left:p,top:u-e/2-g/2-h/2,width:y,height:e},m={left:p,top:n.top+h+e,width:y,height:x-n.top-h-e};break;case"bottomLeft":case"bottom":case"bottomRight":n={left:p,top:s-e-g-h,width:y,height:e},m={left:p,top:n.top+h+e,width:y,height:g}}o(v[0],n,a.imgPosition,d,e),o(w[0],m,a.textPosition,f,g);break;case"textAboveImage":switch(a.textPosition){case"topRight":case"top":case"topLeft":m={left:p,top:q,width:y,height:g},n={left:p,top:q+g+h,width:y,height:x-g-h};break;case"left":case"center":case"right":m={left:p,top:u-e/2-g/2-h/2,width:y,height:g},n={left:p,top:m.top+h+g,width:y,height:x-m.top-h-g};break;case"bottomLeft":case"bottom":case"bottomRight":m={left:p,top:s-e-g-h,width:y,height:g},n={left:p,top:m.top+h+g,width:y,height:e}}o(v[0],n,a.imgPosition,d,e),o(w[0],m,a.textPosition,f,g);break;case"overlay":default:m={left:p,top:q,width:y,height:x},n={left:p,top:q,width:y,height:x},o(v[0],n,a.imgPosition,d,e),o(w[0],m,a.textPosition,f,g)}},createInstance:function(b){var c=this;c._setSize(),(""!=c.imgSrc||""!=c.textPosition||c.element.value&&c.element.value.indexOf("<")>=0||null!=c.value)&&(c.refresh(),c._addImage("MLjquiButton")),c._ariaDisabled||c.host.attr("role","button"),c.overrideTheme||(c.host.addClass(c.toThemeProperty(a.MLjqui.cssroundedcorners(c.roundedCorners))),c.enableDefault&&c.host.addClass(c.toThemeProperty("MLjqui-button")),c.host.addClass(c.toThemeProperty("MLjqui-widget"))),c.isTouchDevice=a.MLjqui.mobile.isTouchDevice(),c._ariaDisabled||a.MLjqui.aria(this),"arrow"!=c.cursor&&(c.disabled?c.host.css({cursor:"arrow"}):c.host.css({cursor:c.cursor}));var d="mouseenter mouseleave mousedown focus blur";if(c._scrollAreaButton)var d="mousedown";c.isTouchDevice&&(c.addHandler(c.host,a.MLjqui.mobile.getTouchEventName("touchstart"),function(a){c.isPressed=!0,c.refresh()}),c.addHandler(a(document),a.MLjqui.mobile.getTouchEventName("touchend")+"."+c.element.id,function(a){c.isPressed=!1,c.refresh()})),c.addHandler(c.host,d,function(a){switch(a.type){case"mouseenter":c.isTouchDevice||!c.disabled&&c.enableHover&&(c.isMouseOver=!0,c.refresh());break;case"mouseleave":c.isTouchDevice||!c.disabled&&c.enableHover&&(c.isMouseOver=!1,c.refresh());break;case"mousedown":c.disabled||(c.isPressed=!0,c.refresh());break;case"focus":c.disabled||(c.isFocused=!0,c.refresh());break;case"blur":c.disabled||(c.isFocused=!1,c.refresh())}}),c.mouseupfunc=function(a){c.disabled||(c.isPressed||c.isMouseOver)&&(c.isPressed=!1,c.refresh())},c.addHandler(a(document),"mouseup.button"+c.element.id,c.mouseupfunc);try{if((""!=document.referrer||window.frameElement)&&null!=window.top&&window.top!=window.self){var e="";if(window.parent&&document.referrer&&(e=document.referrer),-1!=e.indexOf(document.location.host)){var f=function(a){c.isPressed=!1,c.refresh()};window.top.document&&c.addHandler(a(window.top.document),"mouseup",f)}}}catch(g){}c.propertyChangeMap.roundedCorners=function(b,c,d,e){b.host.removeClass(b.toThemeProperty(a.MLjqui.cssroundedcorners(d))),b.host.addClass(b.toThemeProperty(a.MLjqui.cssroundedcorners(e)))},c.propertyChangeMap.disabled=function(b,c,d,e){d!=e&&(b.refresh(),b.host[0].disabled=e,b.host.attr("disabled",e),e?b.host.css({cursor:"default"}):b.host.css({cursor:b.cursor}),a.MLjqui.aria(b,"aria-disabled",b.disabled))},c.propertyChangeMap.rtl=function(a,b,c,d){c!=d&&a.refresh()},c.propertyChangeMap.template=function(a,b,c,d){c!=d&&(a.host.removeClass(a.toThemeProperty("MLjqui-"+c)),a.refresh())},c.propertyChangeMap.theme=function(b,c,d,e){b.host.removeClass(),b.enableDefault&&b.host.addClass(b.toThemeProperty("MLjqui-button")),b.host.addClass(b.toThemeProperty("MLjqui-widget")),b.overrideTheme||b.host.addClass(b.toThemeProperty(a.MLjqui.cssroundedcorners(b.roundedCorners))),b._oldCSSCurrent=null,b.refresh()},c.disabled&&(c.element.disabled=!0,c.host.attr("disabled",!0))},resize:function(a,b){this.width=a,this.height=b,this._setSize()},val:function(){var b=this,c=b.host.find("input");return c.length>0?0==arguments.length||"object"==typeof value?c.val():(c.val(value),b.refresh(),c.val()):0==arguments.length||"object"==typeof value?"button"==b.element.nodeName.toLowerCase()?a(b.element).text():b.element.value:(b.element.value=arguments[0],"button"==b.element.nodeName.toLowerCase()&&a(b.element).text(arguments[0]),void b.refresh())},_setSize:function(){var a=this;null==a.width||-1==a.width.toString().indexOf("px")&&-1==a.width.toString().indexOf("%")?void 0==a.width||isNaN(a.width)||a.host.css("width",a.width):a.host.css("width",a.width),null==a.height||-1==a.height.toString().indexOf("px")&&-1==a.height.toString().indexOf("%")?void 0==a.height||isNaN(a.height)||a.host.css("height",parseInt(a.height)):a.host.css("height",a.height)},_removeHandlers:function(){var b=this;b.removeHandler(b.host,"selectstart"),b.removeHandler(b.host,"click"),b.removeHandler(b.host,"focus"),b.removeHandler(b.host,"blur"),b.removeHandler(b.host,"mouseenter"),b.removeHandler(b.host,"mouseleave"),b.removeHandler(b.host,"mousedown"),b.removeHandler(a(document),"mouseup.button"+b.element.id,b.mouseupfunc),b.isTouchDevice&&(b.removeHandler(b.host,a.MLjqui.mobile.getTouchEventName("touchstart")),b.removeHandler(a(document),a.MLjqui.mobile.getTouchEventName("touchend")+"."+b.element.id)),b.mouseupfunc=null,delete b.mouseupfunc},focus:function(){this.host.focus()},destroy:function(){var b=this;b._removeHandlers();var c=a.data(b.element,"MLjquiButton");c&&delete c.instance,b.host.removeClass(),b.host.removeData(),b.host.remove(),delete b.set,delete b.get,delete b.call,delete b.element,delete b.host},render:function(){this.refresh()},propertiesChangedHandler:function(a,b,c){c&&c.width&&c.height&&2==Object.keys(c).length&&(a._setSize(),a.refresh())},propertyChangedHandler:function(a,b,c,d){void 0!=this.isInitialized&&0!=this.isInitialized&&d!=c&&(a.batchUpdate&&a.batchUpdate.width&&a.batchUpdate.height&&2==Object.keys(a.batchUpdate).length||("textImageRelation"!=b&&"textPosition"!=b&&"imgPosition"!=b||(a._img?a._positionTextAndImage():a._addImage("MLjquiButton")),"imgSrc"!=b&&"imgWidth"!=b&&"imgHeight"!=b&&"value"!=b||a._addImage("MLjquiButton"),"width"!=b&&"height"!=b||(a._setSize(),a.refresh())))},refresh:function(){var a=this;if(!a.overrideTheme){var b=a.toThemeProperty("MLjqui-fill-state-focus"),c=a.toThemeProperty("MLjqui-fill-state-disabled"),d=a.toThemeProperty("MLjqui-fill-state-normal");a.enableDefault||(d="");var e=a.toThemeProperty("MLjqui-fill-state-hover"),f=a.toThemeProperty("MLjqui-fill-state-pressed"),g=a.toThemeProperty("MLjqui-fill-state-pressed");a.enablePressed||(f="");var h="";if(a.host){if(a.host[0].disabled=a.disabled,a.disabled)return a._oldCSSCurrent&&a.host.removeClass(a._oldCSSCurrent),h=d+" "+c,"default"!==a.template&&""!==a.template&&(h+=" MLjqui-"+a.template,""!=a.theme&&(h+=" MLjqui-"+a.template+"-"+a.theme)),a.host.addClass(h),void(a._oldCSSCurrent=h);h=a.isMouseOver&&!a.isTouchDevice?a.isPressed?g:e:a.isPressed?f:d,a.isFocused&&(h+=" "+b),"default"!==a.template&&""!==a.template&&(h+=" MLjqui-"+a.template,""!=a.theme&&(h+=" MLjqui-"+a.template+"-"+a.theme)),h!=a._oldCSSCurrent&&(a._oldCSSCurrent&&a.host.removeClass(a._oldCSSCurrent),a.host.addClass(h),a._oldCSSCurrent=h),a.rtl&&(a.host.addClass(a.toThemeProperty("MLjqui-rtl")),a.host.css("direction","rtl"))}}}}),a.MLjqui.MLjquiWidget("MLjquiLinkButton","",{}),a.extend(a.MLjqui._MLjquiLinkButton.prototype,{defineInstance:function(){this.disabled=!1,this.height=null,this.width=null,this.rtl=!1,this.href=null},createInstance:function(a){var b=this;this.host.onselectstart=function(){return!1},this.host.attr("role","button");var c=this.height||this.host.height(),d=this.width||this.host.width();this.href=this.host.attr("href"),this.target=this.host.attr("target"),this.content=this.host.text(),this.element.innerHTML="",this.host.append("<input type='button' class='MLjqui-wrapper'/>");var e=this.host.find("input");e.addClass(this.toThemeProperty("MLjqui-reset")),e.width(d),e.height(c),e.val(this.content),this.host.find("tr").addClass(this.toThemeProperty("MLjqui-reset")),this.host.find("td").addClass(this.toThemeProperty("MLjqui-reset")),this.host.find("tbody").addClass(this.toThemeProperty("MLjqui-reset")),this.host.css("color","inherit"),this.host.addClass(this.toThemeProperty("MLjqui-link")),e.css({width:d}),e.css({height:c});var f=void 0==a?{}:a[0]||{};e.MLjquiButton(f),this.disabled&&(this.host[0].disabled=!0),this.propertyChangeMap.disabled=function(a,b,c,d){a.host[0].disabled=d,a.host.find("input").MLjquiButton({disabled:d})},this.addHandler(e,"click",function(a){return this.disabled||b.onclick(a),!1})},onclick:function(a){null!=this.target?window.open(this.href,this.target):window.location=this.href}}),a.MLjqui.MLjquiWidget("MLjquiRepeatButton","MLjquiButton",{}),a.extend(a.MLjqui._MLjquiRepeatButton.prototype,{defineInstance:function(){this.delay=50},createInstance:function(b){var c=this,d=a.MLjqui.mobile.isTouchDevice(),e=d?"touchend."+this.base.element.id:"mouseup."+this.base.element.id,f=d?"touchstart."+this.base.element.id:"mousedown."+this.base.element.id;this.addHandler(a(document),e,function(a){null!=c.timeout&&(clearTimeout(c.timeout),c.timeout=null,c.refresh()),void 0!=c.timer&&(clearInterval(c.timer),c.timer=null,c.refresh())}),this.addHandler(this.base.host,f,function(a){null!=c.timer&&clearInterval(c.timer),c.timeout=setTimeout(function(){clearInterval(c.timer),c.timer=setInterval(function(a){c.ontimer(a)},c.delay)},150)}),this.mousemovefunc=function(a){d||0==a.which&&null!=c.timer&&(clearInterval(c.timer),c.timer=null)},this.addHandler(this.base.host,"mousemove",this.mousemovefunc)},destroy:function(){var b=a.MLjqui.mobile.isTouchDevice(),c=b?"touchend."+this.base.element.id:"mouseup."+this.base.element.id,d=b?"touchstart."+this.base.element.id:"mousedown."+this.base.element.id;this.removeHandler(this.base.host,"mousemove",this.mousemovefunc),this.removeHandler(this.base.host,d),this.removeHandler(a(document),c),this.timer=null,delete this.mousemovefunc,delete this.timer;var e=a.data(this.base.element,"MLjquiRepeatButton");e&&delete e.instance,a(this.base.element).removeData(),this.base.destroy(),delete this.base},stop:function(){clearInterval(this.timer),this.timer=null},ontimer:function(b){var b=new a.Event("click");null!=this.base&&null!=this.base.host&&this.base.host.trigger(b)}}),a.MLjqui.MLjquiWidget("MLjquiToggleButton","MLjquiButton",{}),a.extend(a.MLjqui._MLjquiToggleButton.prototype,{defineInstance:function(){this.toggled=!1,this.uiToggle=!0,this.aria={"aria-checked":{name:"toggled",type:"boolean"},"aria-disabled":{name:"disabled",type:"boolean"}}},createInstance:function(b){var c=this;c.base.overrideTheme=!0,c.isTouchDevice=a.MLjqui.mobile.isTouchDevice(),a.MLjqui.aria(this),c.propertyChangeMap.roundedCorners=function(b,c,d,e){b.base.host.removeClass(b.toThemeProperty(a.MLjqui.cssroundedcorners(d))),b.base.host.addClass(b.toThemeProperty(a.MLjqui.cssroundedcorners(e)))},c.propertyChangeMap.toggled=function(a,b,c,d){a.refresh()},c.propertyChangeMap.disabled=function(a,b,c,d){a.base.disabled=d,a.refresh()},c.addHandler(c.base.host,"click",function(a){!c.base.disabled&&c.uiToggle&&c.toggle()}),c.isTouchDevice||(c.addHandler(c.base.host,"mouseenter",function(a){c.base.disabled||c.refresh()}),c.addHandler(c.base.host,"mouseleave",function(a){c.base.disabled||c.refresh()})),c.addHandler(c.base.host,"mousedown",function(a){c.base.disabled||c.refresh()}),c.addHandler(a(document),"mouseup.togglebutton"+c.base.element.id,function(a){c.base.disabled||c.refresh()})},destroy:function(){this._removeHandlers(),this.base.destroy()},_removeHandlers:function(){this.removeHandler(this.base.host,"click"),this.removeHandler(this.base.host,"mouseenter"),
this.removeHandler(this.base.host,"mouseleave"),this.removeHandler(this.base.host,"mousedown"),this.removeHandler(a(document),"mouseup.togglebutton"+this.base.element.id)},toggle:function(){this.toggled=!this.toggled,this.refresh(),a.MLjqui.aria(this,"aria-checked",this.toggled)},unCheck:function(){this.toggled=!1,this.refresh()},check:function(){this.toggled=!0,this.refresh()},refresh:function(){var a=this,b=a.base.toThemeProperty("MLjqui-fill-state-disabled"),c=a.base.toThemeProperty("MLjqui-fill-state-normal");a.base.enableDefault||(c="");var d=a.base.toThemeProperty("MLjqui-fill-state-hover"),e=a.base.toThemeProperty("MLjqui-fill-state-pressed"),f=a.base.toThemeProperty("MLjqui-fill-state-pressed"),g="";return a.base.host[0].disabled=a.base.disabled,a.base.disabled?(g=c+" "+b,void a.base.host.addClass(g)):(g=a.base.isMouseOver&&!a.isTouchDevice?a.base.isPressed||a.toggled?f:d:a.base.isPressed||a.toggled?e:c,"default"!==a.base.template&&""!==a.base.template&&(g+=" MLjqui-"+a.base.template,""!=a.base.theme&&(g+=" MLjqui-"+a.template+"-"+a.base.theme)),a.base.host.hasClass(b)&&b!=g&&a.base.host.removeClass(b),a.base.host.hasClass(c)&&c!=g&&a.base.host.removeClass(c),a.base.host.hasClass(d)&&d!=g&&a.base.host.removeClass(d),a.base.host.hasClass(e)&&e!=g&&a.base.host.removeClass(e),a.base.host.hasClass(f)&&f!=g&&a.base.host.removeClass(f),void(a.base.host.hasClass(g)||a.base.host.addClass(g)))}})}(MLjquiBaseFramework),function(a){a.MLjqui.MLjquiWidget("MLjquiScrollBar","",{}),a.extend(a.MLjqui._MLjquiScrollBar.prototype,{defineInstance:function(){var b={height:null,width:null,vertical:!1,min:0,max:1e3,value:0,step:10,largestep:50,thumbMinSize:10,thumbSize:0,thumbStep:"auto",roundedCorners:"all",showButtons:!0,disabled:!1,touchMode:"auto",touchModeStyle:"auto",thumbTouchSize:0,_triggervaluechanged:!0,rtl:!1,areaDownCapture:!1,areaUpCapture:!1,_initialLayout:!1,offset:0,reference:0,velocity:0,frame:0,timestamp:0,ticker:null,amplitude:0,target:0};return a.extend(!0,this,b),b},createInstance:function(a){this.render()},render:function(){this._mouseup=new Date;var b=this,c="<div id='MLjquiScrollOuterWrap' style='box-sizing: content-box; width:100%; height: 100%; align:left; border: 0px; valign:top; position: relative;'><div id='MLjquiScrollWrap' style='box-sizing: content-box; width:100%; height: 100%; left: 0px; top: 0px; align:left; valign:top; position: absolute;'><div id='MLjquiScrollBtnUp' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><div></div></div><div id='MLjquiScrollAreaUp' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='MLjquiScrollThumb' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='MLjquiScrollAreaDown' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='MLjquiScrollBtnDown' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><div></div></div></div></div>";if(a.MLjqui.utilities&&"hidden"==a.MLjqui.utilities.scrollBarButtonsVisibility&&(this.showButtons=!1),b.WinJS?MSApp.execUnsafeLocalFunction(function(){b.host.html(c)}):this.element.innerHTML=c,void 0!=this.width&&parseInt(this.width)>0&&this.host.width(parseInt(this.width)),void 0!=this.height&&parseInt(this.height)>0&&this.host.height(parseInt(this.height)),this.isPercentage=!1,null!=this.width&&-1!=this.width.toString().indexOf("%")&&(this.host.width(this.width),this.isPercentage=!0),null!=this.height&&-1!=this.height.toString().indexOf("%")&&(this.host.height(this.height),this.isPercentage=!0),this.isPercentage){var d=this;a.MLjqui.utilities.resize(this.host,function(){d._arrange()},!1)}this.thumbCapture=!1,this.scrollOuterWrap=a(this.element.firstChild),this.scrollWrap=a(this.scrollOuterWrap[0].firstChild),this.btnUp=a(this.scrollWrap[0].firstChild),this.areaUp=a(this.btnUp[0].nextSibling),this.btnThumb=a(this.areaUp[0].nextSibling),this.arrowUp=a(this.btnUp[0].firstChild),this.areaDown=a(this.btnThumb[0].nextSibling),this.btnDown=a(this.areaDown[0].nextSibling),this.arrowDown=a(this.btnDown[0].firstChild);var e=this.element.id;if(this.btnUp[0].id="MLjquiScrollBtnUp"+e,this.btnDown[0].id="MLjquiScrollBtnDown"+e,this.btnThumb[0].id="MLjquiScrollThumb"+e,this.areaUp[0].id="MLjquiScrollAreaUp"+e,this.areaDown[0].id="MLjquiScrollAreaDown"+e,this.scrollWrap[0].id="MLjquiScrollWrap"+e,this.scrollOuterWrap[0].id="MLjquiScrollOuterWrap"+e,!this.host.MLjquiRepeatButton)throw new Error("MLjquiScrollBar: Missing reference to MLjquibuttons.js.");this.btnUp.MLjquiRepeatButton({_ariaDisabled:!0,overrideTheme:!0,disabled:this.disabled}),this.btnDown.MLjquiRepeatButton({_ariaDisabled:!0,overrideTheme:!0,disabled:this.disabled}),this.btnDownInstance=a.data(this.btnDown[0],"MLjquiRepeatButton").instance,this.btnUpInstance=a.data(this.btnUp[0],"MLjquiRepeatButton").instance,this.areaUp.MLjquiRepeatButton({_scrollAreaButton:!0,_ariaDisabled:!0,overrideTheme:!0}),this.areaDown.MLjquiRepeatButton({_scrollAreaButton:!0,_ariaDisabled:!0,overrideTheme:!0}),this.btnThumb.MLjquiButton({_ariaDisabled:!0,overrideTheme:!0,disabled:this.disabled}),this.propertyChangeMap.value=function(a,b,c,d){isNaN(d)||c!=d&&a.setPosition(parseFloat(d),!0)},this.propertyChangeMap.width=function(a,b,c,d){void 0!=a.width&&parseInt(a.width)>0&&(a.host.width(parseInt(a.width)),a._arrange())},this.propertyChangeMap.height=function(a,b,c,d){void 0!=a.height&&parseInt(a.height)>0&&(a.host.height(parseInt(a.height)),a._arrange())},this.propertyChangeMap.theme=function(a,b,c,d){a.setTheme()},this.propertyChangeMap.max=function(a,b,c,d){isNaN(d)||c!=d&&(a.max=parseInt(d),a.min>a.max&&(a.max=a.min+1),a._arrange(),a.setPosition(a.value))},this.propertyChangeMap.min=function(a,b,c,d){isNaN(d)||c!=d&&(a.min=parseInt(d),a.min>a.max&&(a.max=a.min+1),a._arrange(),a.setPosition(a.value))},this.propertyChangeMap.disabled=function(a,b,c,d){c!=d&&(d?a.host.addClass(a.toThemeProperty("MLjqui-fill-state-disabled")):a.host.removeClass(a.toThemeProperty("MLjqui-fill-state-disabled")),a.btnUp.MLjquiRepeatButton("disabled",a.disabled),a.btnDown.MLjquiRepeatButton("disabled",a.disabled),a.btnThumb.MLjquiButton("disabled",a.disabled))},this.propertyChangeMap.touchMode=function(a,b,c,d){c!=d&&(a._updateTouchBehavior(),d===!0?(a.showButtons=!1,a.refresh()):d===!1&&(a.showButtons=!0,a.refresh()))},this.propertyChangeMap.rtl=function(a,b,c,d){c!=d&&a.refresh()},this.buttonUpCapture=!1,this.buttonDownCapture=!1,this._updateTouchBehavior(),this.setPosition(this.value),this._addHandlers(),this.setTheme()},resize:function(a,b){this.width=a,this.height=b,this._arrange()},_updateTouchBehavior:function(){if(this.isTouchDevice=a.MLjqui.mobile.isTouchDevice(),1==this.touchMode){if(a.MLjqui.browser.msie&&a.MLjqui.browser.version<9)return void this.setTheme();this.isTouchDevice=!0,a.MLjqui.mobile.setMobileSimulator(this.btnThumb[0]),this._removeHandlers(),this._addHandlers(),this.setTheme()}else 0==this.touchMode&&(this.isTouchDevice=!1)},_addHandlers:function(){var b=this,c=!1;try{("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(c=!0,this._touchSupport=!0)}catch(d){}if((b.isTouchDevice||c)&&(this.addHandler(this.btnThumb,a.MLjqui.mobile.getTouchEventName("touchend"),function(a){var c=b.vertical?b.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed"):b.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed-horizontal"),d=b.toThemeProperty("MLjqui-fill-state-pressed");return b.btnThumb.removeClass(c),b.btnThumb.removeClass(d),b.disabled||b.handlemouseup(b,a),!1}),this.addHandler(this.btnThumb,a.MLjqui.mobile.getTouchEventName("touchstart"),function(a){if(!b.disabled){if(1==b.touchMode)a.clientX=a.originalEvent.clientX,a.clientY=a.originalEvent.clientY;else{var c=a;c.originalEvent.touches&&c.originalEvent.touches.length?(a.clientX=c.originalEvent.touches[0].clientX,a.clientY=c.originalEvent.touches[0].clientY):(a.clientX=a.originalEvent.clientX,a.clientY=a.originalEvent.clientY)}b.handlemousedown(a),a.preventDefault&&a.preventDefault()}}),a.MLjqui.mobile.touchScroll(this.element,b.max,function(a,c,d,e,f){if("visible"==b.host.css("visibility")){if(1==b.touchMode)f.clientX=f.originalEvent.clientX,f.clientY=f.originalEvent.clientY;else{var g=f;g.originalEvent.touches&&g.originalEvent.touches.length?(f.clientX=g.originalEvent.touches[0].clientX,f.clientY=g.originalEvent.touches[0].clientY):(f.clientX=f.originalEvent.clientX,f.clientY=f.originalEvent.clientY)}var h=b.vertical?b.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed"):b.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed-horizontal");b.btnThumb.addClass(h),b.btnThumb.addClass(b.toThemeProperty("MLjqui-fill-state-pressed")),b.thumbCapture=!0,b.handlemousemove(f)}},b.element.id,b.host,b.host)),!this.isTouchDevice){try{if((""!=document.referrer||window.frameElement)&&null!=window.top&&window.top!=window.self){var e=null;if(window.parent&&document.referrer&&(e=document.referrer),e&&-1!=e.indexOf(document.location.host)){var f=function(a){b.disabled||b.handlemouseup(b,a)};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",f,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",f)}}}catch(g){}var h="click mouseup mousedown";this.addHandler(this.btnDown,h,function(a){var c=b.step;switch(Math.abs(b.max-b.min)<=c&&(c=1),b.rtl&&!b.vertical&&(c=-b.step),a.type){case"click":b.buttonDownCapture&&!b.isTouchDevice?b.disabled||b.setPosition(b.value+c):!b.disabled&&b.isTouchDevice&&b.setPosition(b.value+c);break;case"mouseup":if(!b.btnDownInstance.base.disabled&&b.buttonDownCapture)return b.buttonDownCapture=!1,b.btnDown.removeClass(b.toThemeProperty("MLjqui-scrollbar-button-state-pressed")),b.btnDown.removeClass(b.toThemeProperty("MLjqui-fill-state-pressed")),b._removeArrowClasses("pressed","down"),b.handlemouseup(b,a),b.setPosition(b.value+c),!1;break;case"mousedown":if(!b.btnDownInstance.base.disabled)return b.buttonDownCapture=!0,b.btnDown.addClass(b.toThemeProperty("MLjqui-fill-state-pressed")),b.btnDown.addClass(b.toThemeProperty("MLjqui-scrollbar-button-state-pressed")),b._addArrowClasses("pressed","down"),!1}}),this.addHandler(this.btnUp,h,function(a){var c=b.step;switch(Math.abs(b.max-b.min)<=c&&(c=1),b.rtl&&!b.vertical&&(c=-b.step),a.type){case"click":b.buttonUpCapture&&!b.isTouchDevice?b.disabled||b.setPosition(b.value-c):!b.disabled&&b.isTouchDevice&&b.setPosition(b.value-c);break;case"mouseup":if(!b.btnUpInstance.base.disabled&&b.buttonUpCapture)return b.buttonUpCapture=!1,b.btnUp.removeClass(b.toThemeProperty("MLjqui-scrollbar-button-state-pressed")),b.btnUp.removeClass(b.toThemeProperty("MLjqui-fill-state-pressed")),b._removeArrowClasses("pressed","up"),b.handlemouseup(b,a),b.setPosition(b.value-c),!1;break;case"mousedown":if(!b.btnUpInstance.base.disabled)return b.buttonUpCapture=!0,b.btnUp.addClass(b.toThemeProperty("MLjqui-fill-state-pressed")),b.btnUp.addClass(b.toThemeProperty("MLjqui-scrollbar-button-state-pressed")),b._addArrowClasses("pressed","up"),!1}})}var i="click";if(this.isTouchDevice&&(i=a.MLjqui.mobile.getTouchEventName("touchend")),this.addHandler(this.areaUp,i,function(a){if(!b.disabled){var c=b.largestep;return b.rtl&&!b.vertical&&(c=-b.largestep),b.setPosition(b.value-c),!1}}),this.addHandler(this.areaDown,i,function(a){if(!b.disabled){var c=b.largestep;return b.rtl&&!b.vertical&&(c=-b.largestep),b.setPosition(b.value+c),!1}}),this.addHandler(this.areaUp,"mousedown",function(a){return b.disabled?void 0:(b.areaUpCapture=!0,!1)}),this.addHandler(this.areaDown,"mousedown",function(a){return b.disabled?void 0:(b.areaDownCapture=!0,!1)}),this.addHandler(this.btnThumb,"mousedown dragstart",function(a){return"dragstart"===a.type?!1:(b.disabled||b.handlemousedown(a),void(a.preventDefault&&a.preventDefault()))}),this.addHandler(a(document),"mouseup."+this.element.id,function(a){b.disabled||b.handlemouseup(b,a)}),!this.isTouchDevice&&(this.mousemoveFunc=function(a){b.disabled||b.handlemousemove(a)},this.addHandler(a(document),"mousemove."+this.element.id,this.mousemoveFunc),this.addHandler(a(document),"mouseleave."+this.element.id,function(a){b.disabled||b.handlemouseleave(a)}),this.addHandler(a(document),"mouseenter."+this.element.id,function(a){b.disabled||b.handlemouseenter(a)}),!b.disabled)){this.addHandler(this.btnUp,"mouseenter mouseleave",function(a){"mouseenter"===a.type?b.disabled||b.btnUpInstance.base.disabled||1==b.touchMode||(b.btnUp.addClass(b.toThemeProperty("MLjqui-scrollbar-button-state-hover")),b.btnUp.addClass(b.toThemeProperty("MLjqui-fill-state-hover")),b._addArrowClasses("hover","up")):b.disabled||b.btnUpInstance.base.disabled||1==b.touchMode||(b.btnUp.removeClass(b.toThemeProperty("MLjqui-scrollbar-button-state-hover")),b.btnUp.removeClass(b.toThemeProperty("MLjqui-fill-state-hover")),b._removeArrowClasses("hover","up"))});var j=b.toThemeProperty("MLjqui-scrollbar-thumb-state-hover");b.vertical||(j=b.toThemeProperty("MLjqui-scrollbar-thumb-state-hover-horizontal")),this.addHandler(this.btnThumb,"mouseenter mouseleave",function(a){"mouseenter"===a.type?b.disabled||1==b.touchMode||(b.btnThumb.addClass(j),b.btnThumb.addClass(b.toThemeProperty("MLjqui-fill-state-hover"))):b.disabled||1==b.touchMode||(b.btnThumb.removeClass(j),b.btnThumb.removeClass(b.toThemeProperty("MLjqui-fill-state-hover")))}),this.addHandler(this.btnDown,"mouseenter mouseleave",function(a){"mouseenter"===a.type?b.disabled||b.btnDownInstance.base.disabled||1==b.touchMode||(b.btnDown.addClass(b.toThemeProperty("MLjqui-scrollbar-button-state-hover")),b.btnDown.addClass(b.toThemeProperty("MLjqui-fill-state-hover")),b._addArrowClasses("hover","down")):b.disabled||b.btnDownInstance.base.disabled||1==b.touchMode||(b.btnDown.removeClass(b.toThemeProperty("MLjqui-scrollbar-button-state-hover")),b.btnDown.removeClass(b.toThemeProperty("MLjqui-fill-state-hover")),b._removeArrowClasses("hover","down"))})}},destroy:function(){var b=this.btnUp,c=this.btnDown,d=this.btnThumb,e=(this.scrollWrap,this.areaUp),f=this.areaDown;this.arrowUp.remove(),delete this.arrowUp,this.arrowDown.remove(),delete this.arrowDown,f.removeClass(),e.removeClass(),c.removeClass(),b.removeClass(),d.removeClass(),b.MLjquiRepeatButton("destroy"),c.MLjquiRepeatButton("destroy"),e.MLjquiRepeatButton("destroy"),f.MLjquiRepeatButton("destroy"),d.MLjquiButton("destroy");var g=a.data(this.element,"MLjquiScrollBar");this._removeHandlers(),this.btnUp=null,this.btnDown=null,this.scrollWrap=null,this.areaUp=null,this.areaDown=null,this.scrollOuterWrap=null,delete this.mousemoveFunc,delete this.btnDownInstance,delete this.btnUpInstance,delete this.scrollOuterWrap,delete this.scrollWrap,delete this.btnDown,delete this.areaDown,delete this.areaUp,delete this.btnDown,delete this.btnUp,delete this.btnThumb,delete this.propertyChangeMap.value,delete this.propertyChangeMap.min,delete this.propertyChangeMap.max,delete this.propertyChangeMap.touchMode,delete this.propertyChangeMap.disabled,delete this.propertyChangeMap.theme,delete this.propertyChangeMap,g&&delete g.instance,this.host.removeData(),this.host.remove(),delete this.host,delete this.set,delete this.get,delete this.call,delete this.element},_removeHandlers:function(){this.removeHandler(this.btnUp,"mouseenter"),this.removeHandler(this.btnDown,"mouseenter"),this.removeHandler(this.btnThumb,"mouseenter"),this.removeHandler(this.btnUp,"mouseleave"),this.removeHandler(this.btnDown,"mouseleave"),this.removeHandler(this.btnThumb,"mouseleave"),this.removeHandler(this.btnUp,"click"),this.removeHandler(this.btnDown,"click"),this.removeHandler(this.btnDown,"mouseup"),this.removeHandler(this.btnUp,"mouseup"),this.removeHandler(this.btnDown,"mousedown"),this.removeHandler(this.btnUp,"mousedown"),this.removeHandler(this.areaUp,"mousedown"),this.removeHandler(this.areaDown,"mousedown"),this.removeHandler(this.areaUp,"click"),this.removeHandler(this.areaDown,"click"),this.removeHandler(this.btnThumb,"mousedown"),this.removeHandler(this.btnThumb,"dragstart"),this.removeHandler(a(document),"mouseup."+this.element.id),this.mousemoveFunc?this.removeHandler(a(document),"mousemove."+this.element.id,this.mousemoveFunc):this.removeHandler(a(document),"mousemove."+this.element.id),this.removeHandler(a(document),"mouseleave."+this.element.id),this.removeHandler(a(document),"mouseenter."+this.element.id)},_addArrowClasses:function(a,b){"pressed"==a&&(a="selected"),""!=a&&(a="-"+a),this.vertical?("up"!=b&&void 0!=b||this.arrowUp.addClass(this.toThemeProperty("MLjqui-icon-arrow-up"+a)),"down"!=b&&void 0!=b||this.arrowDown.addClass(this.toThemeProperty("MLjqui-icon-arrow-down"+a))):("up"!=b&&void 0!=b||this.arrowUp.addClass(this.toThemeProperty("MLjqui-icon-arrow-left"+a)),"down"!=b&&void 0!=b||this.arrowDown.addClass(this.toThemeProperty("MLjqui-icon-arrow-right"+a)))},_removeArrowClasses:function(a,b){"pressed"==a&&(a="selected"),""!=a&&(a="-"+a),this.vertical?("up"!=b&&void 0!=b||this.arrowUp.removeClass(this.toThemeProperty("MLjqui-icon-arrow-up"+a)),"down"!=b&&void 0!=b||this.arrowDown.removeClass(this.toThemeProperty("MLjqui-icon-arrow-down"+a))):("up"!=b&&void 0!=b||this.arrowUp.removeClass(this.toThemeProperty("MLjqui-icon-arrow-left"+a)),"down"!=b&&void 0!=b||this.arrowDown.removeClass(this.toThemeProperty("MLjqui-icon-arrow-right"+a)))},setTheme:function(){var b=this.btnUp,c=this.btnDown,d=this.btnThumb,e=this.scrollWrap,f=(this.areaUp,this.areaDown,this.arrowUp),g=this.arrowDown;this.scrollWrap[0].className=this.toThemeProperty("MLjqui-reset"),this.scrollOuterWrap[0].className=this.toThemeProperty("MLjqui-reset");var h=this.toThemeProperty("MLjqui-reset");this.areaDown[0].className=h,this.areaUp[0].className=h;var i=this.toThemeProperty("MLjqui-scrollbar")+" "+this.toThemeProperty("MLjqui-widget")+" "+this.toThemeProperty("MLjqui-widget-content");this.host.addClass(i),this.isTouchDevice&&this.host.addClass(this.toThemeProperty("MLjqui-scrollbar-mobile")),c[0].className=this.toThemeProperty("MLjqui-scrollbar-button-state-normal"),b[0].className=this.toThemeProperty("MLjqui-scrollbar-button-state-normal");var j="";if(this.vertical?(f[0].className=h+" "+this.toThemeProperty("MLjqui-icon-arrow-up"),g[0].className=h+" "+this.toThemeProperty("MLjqui-icon-arrow-down"),j=this.toThemeProperty("MLjqui-scrollbar-thumb-state-normal")):(f[0].className=h+" "+this.toThemeProperty("MLjqui-icon-arrow-left"),g[0].className=h+" "+this.toThemeProperty("MLjqui-icon-arrow-right"),j=this.toThemeProperty("MLjqui-scrollbar-thumb-state-normal-horizontal")),j+=" "+this.toThemeProperty("MLjqui-fill-state-normal"),d[0].className=j,this.disabled?(e.addClass(this.toThemeProperty("MLjqui-fill-state-disabled")),e.removeClass(this.toThemeProperty("MLjqui-scrollbar-state-normal"))):(e.addClass(this.toThemeProperty("MLjqui-scrollbar-state-normal")),e.removeClass(this.toThemeProperty("MLjqui-fill-state-disabled"))),"all"==this.roundedCorners)if(this.host.addClass(this.toThemeProperty("MLjqui-rc-all")),this.vertical){var k=a.MLjqui.cssroundedcorners("top");k=this.toThemeProperty(k),b.addClass(k);var l=a.MLjqui.cssroundedcorners("bottom");l=this.toThemeProperty(l),c.addClass(l)}else{var m=a.MLjqui.cssroundedcorners("left");m=this.toThemeProperty(m),b.addClass(m);var n=a.MLjqui.cssroundedcorners("right");n=this.toThemeProperty(n),c.addClass(n)}else{var o=a.MLjqui.cssroundedcorners(this.roundedCorners);o=this.toThemeProperty(o),elBtnUp.addClass(o),elBtnDown.addClass(o)}var o=a.MLjqui.cssroundedcorners(this.roundedCorners);o=this.toThemeProperty(o),d.hasClass(o)||d.addClass(o),this.isTouchDevice&&0!=this.touchModeStyle&&(this.showButtons=!1,d.addClass(this.toThemeProperty("MLjqui-scrollbar-thumb-state-normal-touch")))},isScrolling:function(){return void 0==this.thumbCapture||void 0==this.buttonDownCapture||void 0==this.buttonUpCapture||void 0==this.areaDownCapture||void 0==this.areaUpCapture?!1:this.thumbCapture||this.buttonDownCapture||this.buttonUpCapture||this.areaDownCapture||this.areaUpCapture},track:function(){var a,b,c,d;a=Date.now(),b=a-this.timestamp,this.timestamp=a,c=this.offset-this.frame,this.frame=this.offset,d=1e3*c/(1+b),this.velocity=.2*d+.2*this.velocity},handlemousedown:function(b){function c(a){e.reference=parseInt(e.btnThumb[0].style.top),e.offset=parseInt(e.btnThumb[0].style.top),e.vertical||(e.reference=parseInt(e.btnThumb[0].style.left),e.offset=parseInt(e.btnThumb[0].style.left)),e.velocity=e.amplitude=0,e.frame=e.offset,e.timestamp=Date.now(),clearInterval(e.ticker),e.ticker=setInterval(function(){e.track()},100)}if(void 0==this.thumbCapture||0==this.thumbCapture){this.thumbCapture=!0;var d=this.btnThumb;null!=d&&(d.addClass(this.toThemeProperty("MLjqui-fill-state-pressed")),this.vertical?d.addClass(this.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed")):d.addClass(this.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed-horizontal")))}var e=this;this.thumbCapture&&a.MLjqui.scrollAnimation&&c(b),this.dragStartX=b.clientX,this.dragStartY=b.clientY,this.dragStartValue=this.value},toggleHover:function(a,b){},refresh:function(){this._arrange()},_setElementPosition:function(a,b,c){isNaN(b)||parseInt(a[0].style.left)!=parseInt(b)&&(a[0].style.left=b+"px"),isNaN(c)||parseInt(a[0].style.top)!=parseInt(c)&&(a[0].style.top=c+"px")},_setElementTopPosition:function(a,b){isNaN(b)||(a[0].style.top=b+"px")},_setElementLeftPosition:function(a,b){isNaN(b)||(a[0].style.left=b+"px")},handlemouseleave:function(a){var b=this.btnUp,c=this.btnDown;if((this.buttonDownCapture||this.buttonUpCapture)&&(b.removeClass(this.toThemeProperty("MLjqui-scrollbar-button-state-pressed")),c.removeClass(this.toThemeProperty("MLjqui-scrollbar-button-state-pressed")),this._removeArrowClasses("pressed")),1==this.thumbCapture){var d=this.btnThumb,e=this.vertical?this.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed"):this.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed-horizontal");d.removeClass(e),d.removeClass(this.toThemeProperty("MLjqui-fill-state-pressed"))}},handlemouseenter:function(a){var b=this.btnUp,c=this.btnDown;if(this.buttonUpCapture&&(b.addClass(this.toThemeProperty("MLjqui-scrollbar-button-state-pressed")),b.addClass(this.toThemeProperty("MLjqui-fill-state-pressed")),this._addArrowClasses("pressed","up")),this.buttonDownCapture&&(c.addClass(this.toThemeProperty("MLjqui-scrollbar-button-state-pressed")),c.addClass(this.toThemeProperty("MLjqui-fill-state-pressed")),this._addArrowClasses("pressed","down")),1==this.thumbCapture){var d=this.btnThumb;this.vertical?d.addClass(this.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed")):d.addClass(this.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed-horizontal")),d.addClass(this.toThemeProperty("MLjqui-fill-state-pressed"))}},handlemousemove:function(a){var b=this.btnUp,c=this.btnDown,d=0;if(null!=c&&null!=b){if(null!=b&&null!=c&&void 0!=this.buttonDownCapture&&void 0!=this.buttonUpCapture&&(this.buttonDownCapture&&a.which==d?(c.removeClass(this.toThemeProperty("MLjqui-scrollbar-button-state-pressed")),c.removeClass(this.toThemeProperty("MLjqui-fill-state-pressed")),this._removeArrowClasses("pressed","down"),this.buttonDownCapture=!1):this.buttonUpCapture&&a.which==d&&(b.removeClass(this.toThemeProperty("MLjqui-scrollbar-button-state-pressed")),b.removeClass(this.toThemeProperty("MLjqui-fill-state-pressed")),this._removeArrowClasses("pressed","up"),this.buttonUpCapture=!1)),1!=this.thumbCapture)return!1;var e=this.btnThumb;if(a.which==d&&!this.isTouchDevice&&!this._touchSupport){this.thumbCapture=!1,this._arrange();var f=this.vertical?this.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed"):this.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed-horizontal");return e.removeClass(f),e.removeClass(this.toThemeProperty("MLjqui-fill-state-pressed")),!0}void 0!=a.preventDefault&&a.preventDefault(),null!=a.originalEvent&&(a.originalEvent.mouseHandled=!0),void 0!=a.stopPropagation&&a.stopPropagation();var g=0;try{g=this.vertical?a.clientY-this.dragStartY:a.clientX-this.dragStartX;var h=this._btnAndThumbSize;this._btnAndThumbSize||(h=this.vertical?b.height()+c.height()+e.height():b.width()+c.width()+e.width());var i=(this.max-this.min)/(this.scrollBarSize-h);if("auto"!=this.thumbStep){if(g*=i,Math.abs(this.dragStartValue+g-this.value)>=parseInt(this.thumbStep)){var j=Math.round(parseInt(g)/this.thumbStep)*this.thumbStep;return this.rtl&&!this.vertical?this.setPosition(this.dragStartValue-j):this.setPosition(this.dragStartValue+j),!1}return!1}g*=i;var j=g;this.rtl&&!this.vertical&&(j=-g),this.setPosition(this.dragStartValue+j),this.offset=parseInt(e[0].style.left),this.vertical&&(this.offset=parseInt(e[0].style.top))}catch(k){alert(k)}return!1}},handlemouseup:function(b,c){function d(){var a,b;if(h.amplitude)if(a=Date.now()-h.timestamp,b=-h.amplitude*Math.exp(-a/325),b>.5||-.5>b){var c=(h.max-h.min)/(h.scrollBarSize-h._btnAndThumbSize),e=c*(h.target+b),f=e;h.rtl&&!h.vertical&&(f=-e),h.setPosition(h.dragStartValue+f),requestAnimationFrame(d)}else{var c=(h.max-h.min)/(h.scrollBarSize-h._btnAndThumbSize),e=c*(h.target+b),f=e;h.rtl&&!h.vertical&&(f=-e),h.setPosition(h.dragStartValue+f)}}var e=!1;if(this.thumbCapture){this.thumbCapture=!1;var f=this.btnThumb,g=this.vertical?this.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed"):this.toThemeProperty("MLjqui-scrollbar-thumb-state-pressed-horizontal");if(f.removeClass(g),f.removeClass(this.toThemeProperty("MLjqui-fill-state-pressed")),e=!0,this._mouseup=new Date,a.MLjqui.scrollAnimation){var h=this;clearInterval(this.ticker),(this.velocity>25||this.velocity<-25)&&(this.amplitude=.8*this.velocity,this.target=Math.round(this.offset+this.amplitude),this.vertical?this.target-=this.reference:this.target-=this.reference,this.timestamp=Date.now(),requestAnimationFrame(d))}}if(this.areaDownCapture=this.areaUpCapture=!1,this.buttonUpCapture||this.buttonDownCapture){var i=this.btnUp,j=this.btnDown;this.buttonUpCapture=!1,this.buttonDownCapture=!1,i.removeClass(this.toThemeProperty("MLjqui-scrollbar-button-state-pressed")),j.removeClass(this.toThemeProperty("MLjqui-scrollbar-button-state-pressed")),i.removeClass(this.toThemeProperty("MLjqui-fill-state-pressed")),j.removeClass(this.toThemeProperty("MLjqui-fill-state-pressed")),this._removeArrowClasses("pressed"),e=!0,this._mouseup=new Date}e&&(void 0!=c.preventDefault&&c.preventDefault(),null!=c.originalEvent&&(c.originalEvent.mouseHandled=!0),void 0!=c.stopPropagation&&c.stopPropagation())},setPosition:function(b,c){this.element;if(void 0!=b&&NaN!=b||(b=this.min),b>=this.max&&(b=this.max),b<this.min&&(b=this.min),this.value!==b||1==c){if(b==this.max){var d=new a.Event("complete");this.host.trigger(d)}var e=this.value;if(this._triggervaluechanged){var f=new a.Event("valueChanged");f.previousValue=this.value,f.currentValue=b}this.value=b,this._positionelements(),this._triggervaluechanged&&this.host.trigger(f),this.valueChanged&&this.valueChanged({currentValue:this.value,previousvalue:e})}return b},val:function(a){var b=function(b){for(var c in b)if(b.hasOwnProperty(c))return!1;return"number"==typeof a?!1:"date"==typeof a?!1:"boolean"==typeof a?!1:"string"!=typeof a};return b(a)||0==arguments.length?this.value:(this.setPosition(a),a)},_getThumbSize:function(a){var b=this.max-this.min,c=0;return b>1?c=a/(b+a)*a:1==b?c=a-1:0==b&&(c=a),this.thumbSize>0&&(c=this.thumbSize),c<this.thumbMinSize&&(c=this.thumbMinSize),Math.min(c,a)},_positionelements:function(){var a=(this.element,this.areaUp),b=this.areaDown,c=(this.btnUp,this.btnDown,this.btnThumb),d=(this.scrollWrap,this._height?this._height:this.host.height()),e=this._width?this._width:this.host.width(),f=this.vertical?e:d;this.showButtons||(f=0);var g=this.vertical?d:e;this.scrollBarSize=g;var h=this._getThumbSize(g-2*f);h=Math.floor(h),h<this.thumbMinSize&&(h=this.thumbMinSize),(NaN==d||10>d)&&(d=10),(NaN==e||10>e)&&(e=10),f+=2,this.btnSize=f;var i=this._btnAndThumbSize;if(!this._btnAndThumbSize){var i=this.vertical?2*this.btnSize+c.outerHeight():2*this.btnSize+c.outerWidth();i=Math.round(i)}var j=(g-i)/(this.max-this.min)*(this.value-this.min);if(this.rtl&&!this.vertical&&(j=(g-i)/(this.max-this.min)*(this.max-this.value-this.min)),j=Math.round(j),0>j&&(j=0),this.vertical){var k=g-j-i;0>k&&(k=0),b[0].style.height=k+"px",a[0].style.height=j+"px",this._setElementTopPosition(a,f),this._setElementTopPosition(c,f+j),this._setElementTopPosition(b,f+j+h)}else a[0].style.width=j+"px",g-j-i>=0?b[0].style.width=g-j-i+"px":b[0].style.width="0px",this._setElementLeftPosition(a,f),this._setElementLeftPosition(c,f+j),this._setElementLeftPosition(b,2+f+j+h)},_arrange:function(){var a=this;if(a._initialLayout)return void(a._initialLayout=!1);if(a.min>a.max){var b=a.min;a.min=a.max,a.max=b}if(a.min<0){var c=a.max-a.min;a.min=0,a.max=c}var d=(a.element,a.areaUp),e=a.areaDown,f=a.btnUp,g=a.btnDown,h=a.btnThumb,i=a.scrollWrap,j=parseInt(a.element.style.height),k=parseInt(a.element.style.width);if(a.isPercentage)var j=a.host.height(),k=a.host.width();isNaN(j)&&(j=0),isNaN(k)&&(k=0),a._width=k,a._height=j;var l=a.vertical?k:j;a.showButtons||(l=0),f[0].style.width=l+"px",f[0].style.height=l+"px",g[0].style.width=l+"px",g[0].style.height=l+"px",a.vertical?i[0].style.width=k+2+"px":i[0].style.height=j+2+"px",a._setElementPosition(f,0,0);var m=l+2;a.vertical?a._setElementPosition(g,0,j-m):a._setElementPosition(g,k-m,0);var n=a.vertical?j:k;a.scrollBarSize=n;var o=a._getThumbSize(n-2*m);o=Math.floor(o-2),o<a.thumbMinSize&&(o=a.thumbMinSize);var p=!1;a.isTouchDevice&&0!=a.touchModeStyle&&(p=!0),a.vertical?(h[0].style.width=k+"px",h[0].style.height=o+"px",p&&0!==a.thumbTouchSize&&(h.css({width:a.thumbTouchSize+"px"}),h.css("margin-left",(a.host.width()-a.thumbTouchSize)/2))):(h[0].style.width=o+"px",h[0].style.height=j+"px",p&&0!==a.thumbTouchSize&&(h.css({height:a.thumbTouchSize+"px"}),h.css("margin-top",(a.host.height()-a.thumbTouchSize)/2))),(NaN==j||10>j)&&(j=10),(NaN==k||10>k)&&(k=10),a.btnSize=l;var q=a.vertical?2*m+(2+parseInt(h[0].style.height)):2*m+(2+parseInt(h[0].style.width));q=Math.round(q),a._btnAndThumbSize=q;var r=(n-q)/(a.max-a.min)*(a.value-a.min);if(a.rtl&&!a.vertical&&(r=(n-q)/(a.max-a.min)*(a.max-a.value-a.min)),r=Math.round(r),(isNaN(r)||0>r||r===-(1/0)||r===1/0)&&(r=0),a.vertical){var s=n-r-q;0>s&&(s=0),e[0].style.height=s+"px",e[0].style.width=k+"px",d[0].style.height=r+"px",d[0].style.width=k+"px";var t=parseInt(a.element.style.height);a.isPercentage&&(t=a.host.height()),h[0].style.visibility="inherit",(t-3*parseInt(l)<0||q>t)&&(h[0].style.visibility="hidden"),a._setElementPosition(d,0,m),a._setElementPosition(h,0,m+r),a._setElementPosition(e,0,m+r+o)}else{r>0&&(d[0].style.width=r+"px"),j>0&&(d[0].style.height=j+"px");var u=n-r-q;0>u&&(u=0),e[0].style.width=u+"px",e[0].style.height=j+"px";var v=parseInt(a.element.style.width);a.isPercentage&&(v=a.host.width()),h[0].style.visibility="inherit",(v-3*parseInt(l)<0||q>v)&&(h[0].style.visibility="hidden"),a._setElementPosition(d,m,0),a._setElementPosition(h,m+r,0),a._setElementPosition(e,m+r+o,0)}}})}(MLjquiBaseFramework),function(a){function b(b){return function(c,d){"string"!=typeof c&&(d=c,c="*");var e,f,g,h=c.toLowerCase().split(s),i=0,j=h.length;if(a.isFunction(d))for(;j>i;i++)e=h[i],g=/^\+/.test(e),g&&(e=e.substr(1)||"*"),f=b[e]=b[e]||[],f[g?"unshift":"push"](d)}}function c(a,b,d,e,f,g){f=f||b.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===t;k>j&&(l||!h);j++)h=i[j](b,d,e),"string"==typeof h&&(!l||g[h]?h=void 0:(b.dataTypes.unshift(h),h=c(a,b,d,e,h,g)));return!l&&h||g["*"]||(h=c(a,b,d,e,"*",g)),h}function d(b,c){var d,e,f=a.MLjqui.data.ajaxSettings.flatOptions||{};for(d in c)void 0!==c[d]&&((f[d]?b:e||(e={}))[d]=c[d]);e&&a.extend(!0,b,e)}function e(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes,j=a.responseFields;for(e in j)e in c&&(b[j[e]]=c[e]);for(;"*"===i[0];)i.shift(),
void 0===d&&(d=a.mimeType||b.getResponseHeader("content-type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function f(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if("*"!==e){if("*"!==h&&h!==e){if(c=i[h+" "+e]||i["* "+e],!c)for(d in i)if(f=d.split(" "),f[1]===e&&(c=i[h+" "+f[0]]||i["* "+f[0]])){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}if(c!==!0)if(c&&a["throws"])b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function g(){try{return new window.XMLHttpRequest}catch(a){}}function h(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}a.MLjqui.observableArray=function(b,c){if("string"==typeof b&&(b=a.parseJSON(b)),!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(a){return!1}}()){var d=Object.defineProperty;Object.defineProperty=function(a,b,c){if(d)try{return d(a,b,c)}catch(e){}if(a!==Object(a))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in c&&Object.prototype.__defineGetter__.call(a,b,c.get),Object.prototype.__defineSetter__&&"set"in c&&Object.prototype.__defineSetter__.call(a,b,c.set),"value"in c?a[b]=c.value:a[b]||(a[b]=c),a}}Array.prototype.forEach||(Array.prototype.forEach=function(a){if(void 0===this||null===this)throw TypeError();var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw TypeError();var d,e=arguments[1];for(d=0;c>d;d++)d in b&&a.call(e,b[d],d,b)}),"function"!=typeof Object.getOwnPropertyNames&&(Object.getOwnPropertyNames=function(a){if(a!==Object(a))throw TypeError("Object.getOwnPropertyNames called on non-object");var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c});var e,f=this,g=[];f.notifier=null,f.name="observableArray",f.observing=!0,f.changes=new Array;var c=c;return f.observe=function(){f.observing=!0,1==arguments.length&&(c=arguments[0])},f.unobserve=function(){f.observing=!1},f.toArray=function(){return g.slice(0)},f.toJSON=function(a,b){function c(a){return'"'+a.replace(m,function(a){var b=n[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'}function d(a){return 10>a?"0"+a:a}function e(a){var b;return b=isFinite(a.valueOf())?a.getUTCFullYear()+"-"+d(a.getUTCMonth()+1)+"-"+d(a.getUTCDate())+"T"+d(a.getUTCHours())+":"+d(a.getUTCMinutes())+":"+d(a.getUTCSeconds())+'Z"':"null"}function f(a){var b,c=a.length,d=[];for(b=0;c>b;b++)d.push(k(b,a)||"null");return"["+d.join(",")+"]"}function h(b){var d,e,f=[];for(d in b)if(Object.prototype.hasOwnProperty.call(b,d)){if(""!=d&&a&&-1===a.indexOf(d))continue;e=k(d,b),e&&f.push(c(d)+":"+e)}return"{"+f.join(",")+"}"}function i(a){switch(Object.prototype.toString.call(a)){case"[object Date]":return e(a);case"[object Array]":return f(a)}return h(a)}function j(a,b){switch(b){case"string":return c(a);case"number":case"float":case"integer":case"int":return isFinite(a)?a:"null";case"boolean":return a}return"null"}function k(a,b){var c=b[a],d=typeof c;return c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(a),d=typeof c),/(number|float|int|integer|string|boolean)/.test(d)||!c&&"object"===d?j(c,d):i(c)}var l=g;b&&(l=b);var m=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return!a&&window.JSON&&"function"==typeof window.JSON.stringify?window.JSON.stringify(l):k("",{"":l})},f.defineIndexProperty=function(b){if(!(b in f)){var c=function(b,c,d,h){var i=b[c],j=i,k=function(){return j},l=function(b){if(i=b,j!==i){var d=j;if(j=i,"function"==typeof e){var k=g.indexOf(h),l="",m=function(b,d){Object.getOwnPropertyNames(b).forEach(function(e){var f=a.type(b[e]);"array"==f||"object"==f?m(b[e],d+"."+e):c===e&&(l=d+"."+e)})};m(h,k),e({object:f,type:"update",path:l,index:k,name:c,newValue:i,oldValue:d})}}return j=i,i};void 0!=b[c]&&"length"!=c&&(Object.defineProperty?Object.defineProperty(b,c,{get:k,set:l}):Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&(Object.prototype.__defineGetter__.call(b,c,k),Object.prototype.__defineSetter__.call(b,c,l)))},d=function(b,e,f){var g=a.type(b);/(number|float|int|integer|string|boolean)/.test(g)||void 0!==b&&Object.getOwnPropertyNames(b).forEach(function(g){var h=a.type(b[g]);"array"==h||"object"==h?(c(b,g,e+"."+g,f),d(b[g],e+"."+g,f)):c(b,g,e+"."+g,f)})};Object.defineProperty(f,b,{configurable:!0,enumerable:!0,get:function(){return g[b]},set:function(a){var c=g[b];f.toJSON(null,c)!=f.toJSON(null,a)&&(g[b]=a,"function"==typeof e&&e({object:f,type:"update",path:b.toString(),index:b,name:"index",newValue:a,oldValue:c}),d(a,b,a))}}),d(f[b],b,f[b])}},f.push=function(){for(var a,b=0,c=arguments.length;c>b;b++)a=g.length,g.push(arguments[b]),f.defineIndexProperty(a),"function"==typeof e&&e({object:f,type:"add",name:"length",index:a,newValue:g.length,oldValue:a});return g.length},f.pop=function(){if(~g.length){var a=g.length-1,b=g.pop();return delete f[a],"function"==typeof e&&e({object:f,type:"delete",name:"length",index:a,newValue:g.length,oldValue:a}),b}},f.unshift=function(){for(var a=g.length,b=0,c=arguments.length;c>b;b++)g.splice(b,0,arguments[b]),f.defineIndexProperty(g.length-1);return"function"==typeof e&&e({object:f,type:"add",index:0,name:"length",newValue:g.length,oldValue:a}),g.length},f.shift=function(){var a=g.length;if(~g.length){var b=g.shift();return 0===g.length&&delete f[a],"function"==typeof e&&e({object:f,type:"delete",index:a,name:"length",newValue:g.length,oldValue:a}),b}},f.slice=function(b,c,d){var e=g.slice(b,c),f=new a.MLjqui.observableArray(e,d);return f},f.splice=function(b,c,d){var h,i=[];for(b=~b?b:g.length-b,c=(null==c?g.length-b:c)||0;c--;)h=g.splice(b,1)[0],i.push(h),delete f[g.length],"function"==typeof e&&e({object:f,type:"delete",index:b,name:"length",newValue:-1,oldValue:b});for(var j=2,k=arguments.length;k>j;j++)g.splice(b,0,arguments[j]),defineIndexProperty(g.length-1),"function"==typeof e&&e({object:f,type:"add",index:b,name:"length",newValue:g.length-1,oldValue:b}),b++;var l=new a.MLjqui.observableArray(i,d);return l},Object.defineProperty(f,"length",{configurable:!1,enumerable:!0,get:function(){return g.length},set:function(a){var b=Number(a);if(!(b%1===0&&b>=0))throw new RangeError("Invalid array length");return b<g.length?f.splice(b):b>g.length&&f.push.apply(f,new Array(b-g.length)),a}}),a.MLjqui.observableArray.prototype.fromArray=function(b,c){var d=new a.MLjqui.observableArray(b,c);return d},a.MLjqui.observableArray.prototype.clone=function(){var b=new a.MLjqui.observableArray(g,c);return b.observing=f.observing,b.changes=f.changes,b.notifier=f.notifier,b},f.remove=function(a){if(0>a||a>=f.length)throw new Error("Invalid index : "+a);if(f.hasOwnProperty(a)){var b=f[a];return f[a]=void 0,g[a]=void 0,"function"==typeof e&&e({object:f,type:"delete",index:a,name:"index",newValue:void 0,oldValue:b}),!0}return!1},f.concat=function(b,c){var d=g.concat(b),e=new a.MLjqui.observableArray(d,c);return e},Object.getOwnPropertyNames(Array.prototype).forEach(function(a){if(!(a in f)){var b=function(){var b=f.observing;f.observing=!1;var c=g[a],d=c.apply(g,arguments);return f.observing=b,d};Object.defineProperty(f,a,{configurable:!1,enumerable:!0,writeable:!1,value:b})}}),f.set=function(b,c){if("string"==a.type(b)&&b.split(".").length>1){for(var d=b.split("."),e=f,g=0;g<d.length;g++){if(0===g&&d[g]>=f.length)throw new Error("Invalid Index: "+b);g<d.length-1?e=e[d[g]]:e[d[g]]=c}return!0}return b>=f.length?f.push(c):f[b]=c,!0},f.get=function(a){return f[a]},b instanceof Array&&f.push.apply(f,b),e=function(){f.observing&&(arguments&&arguments[0]&&f.changes.push(arguments[0]),c&&c.apply(f,arguments),f.notifier&&f.notifier.apply(f,arguments))},f},a.MLjqui.formatDate=function(b,c,d){var e=a.MLjqui.dataFormat.formatdate(b,c,d);return e},a.MLjqui.formatNumber=function(b,c,d){var e=a.MLjqui.dataFormat.formatnumber(b,c,d);return e},a.MLjqui.dataAdapter=function(b,c){if(void 0!=b&&(void 0!==b.dataFields&&(b.datafields=b.dataFields),void 0!==b.dataType&&(b.datatype=b.dataType),void 0!==b.localData&&(b.localdata=b.localData),void 0!==b.sortColumn&&(b.sortcolumn=b.sortColumn),void 0!==b.sortDirection&&(b.sortdirection=b.sortDirection),void 0!==b.sortOrder&&(b.sortdirection=b.sortOrder),void 0!==b.formatData&&(b.formatdata=b.formatData),void 0!==b.processData&&(b.processdata=b.processData),void 0!==b.pageSize&&(b.pagesize=b.pageSize),void 0!==b.pageNum&&(b.pagenum=b.pageNum),void 0!==b.updateRow&&(b.updaterow=b.updateRow),void 0!==b.addRow&&(b.addrow=b.addRow),void 0!==b.deleteRow&&(b.deleterow=b.deleteRow),void 0!==b.contentType&&(b.contenttype=b.contentType),void 0!=b.totalRecords&&(b.totalrecords=b.totalRecords),void 0!=b.loadError&&(b.loadError=b.loadError),void 0!=b.sortComparer&&(b.sortcomparer=b.sortComparer)),this._source=b,this._options=c||{},void 0!=b.beforeLoadComplete&&(this._options.beforeLoadComplete=this._source.beforeLoadComplete),void 0!=b.downloadComplete&&(this._options.downloadComplete=this._source.downloadComplete),void 0!=b.loadComplete&&(this._options.loadComplete=this._source.loadComplete),void 0!=b.autoBind&&(this._options.downloadComplete=this._source.autoBind),void 0!=b.formatData&&(this._options.formatData=this._source.formatData),void 0!=b.loadError&&(this._options.loadError=this._source.loadError),void 0!=b.beforeSend&&(this._options.beforeSend=this._source.beforeSend),void 0!=b.contentType&&(this._options.contentType=this._source.contentType),void 0!=b.async&&(this._options.async=this._source.async),void 0!=b.loadServerData&&(this._options.loadServerData=this._source.loadServerData),void 0!=b.uniqueDataFields&&(this._options.uniqueDataFields=this._source.uniqueDataFields),this.records=new Array,this._downloadComplete=new Array,this._bindingUpdate=new Array,void 0!=b&&null!=b.localdata&&"function"==typeof b.localdata){var d=b.localdata();if(null!=d){b._localdata=b.localdata;var e=this;b._localdata.subscribe&&(e._oldlocaldata=[],b._localdata.subscribe(function(b){var c=function(b){return a.isArray(b)?a.makeArray(c(a(b))):a.extend(!0,{},b)};0!=e.suspendKO&&void 0!=e.suspendKO&&0!=e._oldlocaldata.length||(e._oldlocaldata=c(b))},b._localdata,"beforeChange"),b._localdata.subscribe(function(a){if(0==e.suspendKO||void 0==e.suspendKO){var c="";e._oldrecords=e.records,0==e._oldlocaldata.length&&(b.localdata=b._localdata()),0==e._oldlocaldata.length?c="change":a&&(e._oldlocaldata.length==a.length&&(c="update"),e._oldlocaldata.length>a.length&&(c="remove"),e._oldlocaldata.length<a.length&&(c="add")),e.dataBind(null,c)}},b._localdata,"change"),e._knockoutdatasource=!0),b.localdata=d}}1==this._options.autoBind&&this.dataBind()},a.MLjqui.dataAdapter.prototype={getrecords:function(){return this.records},beginUpdate:function(){this.isUpdating=!0},endUpdate:function(a){this.isUpdating=!1,0!=a&&(this._changedrecords&&this._changedrecords.length>0?(this.callBindingUpdate("update"),this._changedrecords=[]):this.dataBind(null,""))},formatDate:function(b,c,d){var e=a.MLjqui.dataFormat.formatdate(b,c,d);return e},formatNumber:function(b,c,d){var e=a.MLjqui.dataFormat.formatnumber(b,c,d);return e},dataBind:function(b,c){if(1!=this.isUpdating){var d=this._source;if(d){d.generatedfields&&(d.datafields=null,d.generatedfields=null),a.MLjqui.dataFormat.datescache=new Array,null!=d.dataFields&&(d.datafields=d.dataFields),void 0==d.recordstartindex&&(d.recordstartindex=0),void 0==d.recordendindex&&(d.recordendindex=0),void 0==d.loadallrecords&&(d.loadallrecords=!0),void 0==d.root&&(d.root=""),void 0==d.record&&(d.record=""),void 0!=d.sort&&(this.sort=d.sort),void 0!=d.filter?this.filter=d.filter:this.filter=null,void 0!=d.sortcolumn&&(this.sortcolumn=d.sortcolumn),void 0!=d.sortdirection&&(this.sortdirection=d.sortdirection),void 0!=d.sortcomparer&&(this.sortcomparer=d.sortcomparer),this.records=new Array;var e=this._options||{};if(this.virtualmode=void 0!=e.virtualmode?e.virtualmode:!1,this.totalrecords=void 0!=e.totalrecords?e.totalrecords:0,this.pageable=void 0!=e.pageable?e.pageable:!1,this.pagesize=void 0!=e.pagesize?e.pagesize:0,this.pagenum=void 0!=e.pagenum?e.pagenum:0,this.cachedrecords=void 0!=e.cachedrecords?e.cachedrecords:new Array,this.originaldata=new Array,this.recordids=new Array,this.updaterow=void 0!=e.updaterow?e.updaterow:null,this.addrow=void 0!=e.addrow?e.addrow:null,this.deleterow=void 0!=e.deleterow?e.deleterow:null,this.cache=void 0!=e.cache?e.cache:!1,this.unboundmode=!1,void 0!=d.formatdata&&(e.formatData=d.formatdata),void 0!=d.data&&(void 0==e.data&&(e.data={}),a.extend(e.data,d.data)),void 0!=d.mapchar?this.mapChar=d.mapchar?d.mapchar:">":this.mapChar=e.mapChar?e.mapChar:">",(e.unboundmode||d.unboundmode)&&(this.unboundmode=e.unboundmode||d.unboundmode),void 0!=d.cache&&(this.cache=d.cache),this.koSubscriptions)for(var f=0;f<this.koSubscriptions.length;f++)this.koSubscriptions[f].dispose();this.koSubscriptions=new Array,this.pagenum<0&&(this.pagenum=0);var g=this,h=d.datatype;"csv"!==d.datatype&&"tab"!==d.datatype&&"tsv"!==d.datatype&&"text"!=d.datatype||(h="text");var i=void 0!=e.async?e.async:!0;switch(void 0!=d.async&&(i=d.async),h){case"local":case"array":case"observablearray":case"observableArray":default:if(void 0==d.localdata&&d.length){d.localdata=new Array;for(var j=0;j<d.length;j++)d.localdata[d.localdata.length]=d[j],d[j].uid=j}d.beforeprocessing&&a.isFunction(d.beforeprocessing)&&d.beforeprocessing(d.localdata);var k=d.localdata.length;if(this.totalrecords=this.virtualmode?d.totalrecords||k:k,this.unboundmode){this.totalrecords=this.unboundmode?d.totalrecords||k:k;var l=d.datafields?d.datafields.length:0;if(l>0)for(var j=0;j<this.totalrecords;j++){for(var m={},n=0;l>n;n++)m[d.datafields[n].name]="";m.uid=j,d.localdata[d.localdata.length]=m}}void 0==this.totalrecords&&(this.totalrecords=0);var l=d.datafields?d.datafields.length:0,o=function(b,c){for(var e={},f=0;c>f;f++){var h=d.datafields?d.datafields[f]:{},i="";if(void 0!=h&&null!=h){if(h.map){if(a.isFunction(h.map))i=h.map(b);else{var j=h.map.split(g.mapChar);if(j.length>0){for(var k=b,l=0;l<j.length;l++)k&&(k=k[j[l]]);i=k}else i=b[h.map]}void 0!=i&&null!=i?i=i.toString():void 0==i&&null!=i&&(i="")}var m=!1;""==i&&(m=!0,i=b[h.name],void 0!=i&&null!=i&&(d._localdata&&i.subscribe?i=i():"array"!=h.type&&(i=i.toString()))),"[object Object]"==i&&h.map&&m&&(i=""),i=g.getvaluebytype(i,h),void 0!=h.displayname?e[h.displayname]=i:e[h.name]=i}}return e};if(d._localdata){this._changedrecords=[],this.records=new Array;var p=d._localdata();if(a.each(p,function(b,e){if("string"==typeof e)g.records.push(e);else{var f={},h=0,i=this;a.each(this,function(c,e){var j=null,k="string",m=c;if(l>0){for(var n=!1,o=!1,p=0;l>p;p++){var q=d.datafields[p];if(void 0!=q&&q.name==c){n=!0,j=q.map,k=q.type,m=q.name;break}if(void 0!=q&&q.map&&q.map.indexOf(c)>=0){n=!0,j=q.map,k=q.type,m=q.name,o=!0;var r=i[c];if(null!=j){var s=j.split(g.mapChar);if(s.length>0){for(var t=i,u=0;u<s.length;u++)t=t[s[u]];r=t}else r=i[j]}"string"!=k&&(r=g.getvaluebytype(r,{type:k})),f[m]=r,void 0!=f[m]&&(h+=f[m].toString().length+f[m].toString().substr(0,1))}}if(!n)return!0;if(o)return!0}var v=a.isFunction(i[c]);if(v){var r=i[c]();if("string"!=k&&(r=g.getvaluebytype(r,{type:k})),f[c]=r,i[c].subscribe){var w=b;g.koSubscriptions[g.koSubscriptions.length]=i[c].subscribe(function(a){var b=w;f[c]=a;var d={index:b,oldrecord:f,record:f};return g._changedrecords.push(d),g.isUpdating?void 0:(g.callBindingUpdate("update"),g._changedrecords=[],!1)})}}else{var r=i[c];if(null!=j){var s=j.split(g.mapChar);if(s.length>0){for(var t=i,u=0;u<s.length;u++)t=t[s[u]];r=t}else r=i[j]}"string"!=k&&(r=g.getvaluebytype(r,{type:k})),f[m]=r,void 0!=f[m]&&(h+=f[m].toString().length+f[m].toString().substr(0,1))}});var j=g.getid(d.id,i,b);if(f.uid=j,g.records.push(f),f._koindex=h,g._oldrecords){var k=g.records.length-1;if("update"==c&&g._oldrecords[k]._koindex!=h){var m={index:k,oldrecord:g._oldrecords[k],record:f};g._changedrecords.push(m)}}}}),"add"==c)for(var k=g.records.length,j=0;k>j;j++){for(var m=g.records[j],q=!1,r=0;r<g._oldrecords.length;r++)if(g._oldrecords[r]._koindex===m._koindex){q=!0;break}q||g._changedrecords.push({index:j,oldrecord:null,record:m,position:0!=j?"last":"first"})}else if("remove"==c)for(var k=g._oldrecords.length,j=0;k>j;j++){var s=g._oldrecords[j];g.records[j]?g.records[j]._koindex!=s._koindex&&g._changedrecords.push({index:j,oldrecord:s,record:null}):g._changedrecords.push({index:j,oldrecord:s,record:null})}}else if(a.isArray(d.localdata))if(0==l){var t=0,u=new Array;a.each(d.localdata,function(b,c){var e=new Object(this);if("string"==typeof c)return g.records=d.localdata,!1;var f=g.getid(d.id,e,b);if("object"==typeof f&&(f=b),e.uid=f,0==b){for(var h in this){t++;var i=a.type(this[h]);u.push({name:h,type:i})}l=t,d.datafields=u,d.generatedfields=u}if(l>0){var j=o(e,l);j.uid=f,g.records[g.records.length]=j}else g.records[g.records.length]=e})}else a.each(d.localdata,function(a){var b=this,c=o(b,l),e=g.getid(d.id,c,a);"object"==typeof e&&(e=a);var b=new Object(c);b.uid=e,g.records[g.records.length]=b});else{this.records=new Array;var t=0,u=new Array;a.each(d.localdata,function(b){var c=g.getid(d.id,this,b);if(0==l&&!("string"==typeof this||this instanceof String)){for(var e in this){t++;var f=a.type(this[e]);u.push({name:e,type:f})}l=t,d.datafields=u,d.generatedfields=u}if(l>0){var h=this,i=o(h,l);i.uid=c,g.records[g.records.length]=i}else this.uid=c,g.records[g.records.length]=this})}if(this.originaldata=d.localdata,this.cachedrecords=this.records,this.addForeignValues(d),e.uniqueDataFields){var v=this.getUniqueRecords(this.records,e.uniqueDataFields);this.records=v,this.cachedrecords=v}if(e.beforeLoadComplete){var w=e.beforeLoadComplete(g.records,this.originaldata);void 0!=w&&(g.records=w,g.cachedrecords=w)}if(e.autoSort&&e.autoSortField){var x=Object.prototype.toString;Object.prototype.toString="function"==typeof field?field:function(){return this[e.autoSortField]},g.records.sort(function(b,c){if(void 0===b&&(b=null),void 0===c&&(c=null),null===b&&null===c)return 0;if(null===b&&null!==c)return 1;if(null!==b&&null===c)return-1;if(b=b.toString(),c=c.toString(),null===b&&null===c)return 0;if(null===b&&null!==c)return 1;if(null!==b&&null===c)return-1;if(a.MLjqui.dataFormat.isNumber(b)&&a.MLjqui.dataFormat.isNumber(c))return c>b?-1:b>c?1:0;if(a.MLjqui.dataFormat.isDate(b)&&a.MLjqui.dataFormat.isDate(c))return c>b?-1:b>c?1:0;a.MLjqui.dataFormat.isNumber(b)||a.MLjqui.dataFormat.isNumber(c)||(b=String(b).toLowerCase(),c=String(c).toLowerCase());try{if(c>b)return-1;if(b>c)return 1}catch(d){}return 0}),Object.prototype.toString=x}g.loadedData=d.localdata,g.buildHierarchy(),a.isFunction(e.loadComplete)&&e.loadComplete(d.localdata,g.records);break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"ics":if(null!=d.localdata&&!d.url){if(a.isFunction(d.beforeprocessing)&&d.beforeprocessing(d.localdata),"xml"===d.datatype?g.loadxml(d.localdata,d.localdata,d):"text"===h?g.loadtext(d.localdata,d):"ics"===h?g.loadics(d.localdata,d):g.loadjson(d.localdata,d.localdata,d),g.addForeignValues(d),e.uniqueDataFields){var v=g.getUniqueRecords(g.records,e.uniqueDataFields);g.records=v,g.cachedrecords=v}if(e.beforeLoadComplete){var w=e.beforeLoadComplete(g.records,this.originaldata);void 0!=w&&(g.records=w,g.cachedrecords=w)}return g.loadedData=d.localdata,g.buildHierarchy.call(g),a.isFunction(e.loadComplete)&&e.loadComplete(d.localdata,g.records),void g.callBindingUpdate(c)}var y=void 0!=e.data?e.data:{};if(d.processdata&&d.processdata(y),a.isFunction(e.processData)&&e.processData(y),a.isFunction(e.formatData)){var z=e.formatData(y);void 0!=z&&(y=z)}var A="application/x-www-form-urlencoded";e.contentType&&(A=e.contentType);var B="GET";d.type&&(B=d.type),e.type&&(B=e.type);var C=h;if("ics"==h&&(C="text"),d.url&&d.url.length>0)a.isFunction(e.loadServerData)?g._requestData(y,d,e):this.xhr=a.MLjqui.data.ajax({dataType:C,cache:this.cache,type:B,url:d.url,async:i,timeout:d.timeout,contentType:A,data:y,success:function(b,c,f){if(a.isFunction(d.beforeprocessing)){var i=d.beforeprocessing(b,c,f);void 0!=i&&(b=i)}if(a.isFunction(e.downloadComplete)){var i=e.downloadComplete(b,c,f);void 0!=i&&(b=i)}if(null==b)return g.records=new Array,g.cachedrecords=new Array,g.originaldata=new Array,g.callDownloadComplete(),void(a.isFunction(e.loadComplete)&&e.loadComplete(new Array));var j=b;if(b.records&&(j=b.records),void 0!=b.totalrecords?d.totalrecords=b.totalrecords:void 0!=b.totalRecords&&(d.totalrecords=b.totalRecords),"xml"===d.datatype?g.loadxml(null,j,d):"text"===h?g.loadtext(j,d):"ics"===h?g.loadics(j,d):g.loadjson(null,j,d),g.addForeignValues(d),e.uniqueDataFields){var k=g.getUniqueRecords(g.records,e.uniqueDataFields);g.records=k,g.cachedrecords=k}if(e.beforeLoadComplete){var l=e.beforeLoadComplete(g.records,b);void 0!=l&&(g.records=l,g.cachedrecords=l)}g.loadedData=b,g.buildHierarchy.call(g),g.callDownloadComplete(),a.isFunction(e.loadComplete)&&e.loadComplete(b,c,f,g.records)},error:function(b,c,f){a.isFunction(d.loaderror)&&d.loaderror(b,c,f),a.isFunction(e.loadError)&&e.loadError(b,c,f),b=null,g.callDownloadComplete()},beforeSend:function(b,c){a.isFunction(e.beforeSend)&&e.beforeSend(b,c),a.isFunction(d.beforesend)&&d.beforesend(b,c)}});else if(g.buildHierarchy(new Array),g.callDownloadComplete(),a.isFunction(e.loadComplete)){if(!D)var D={};e.loadComplete(D)}}this.callBindingUpdate(c)}}},buildHierarchy:function(a){var b=this._source,c=new Array;if(b.datafields){if(b.hierarchy&&!b.hierarchy.reservedNames)b.hierarchy.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};else if(b.hierarchy){var d=b.hierarchy.reservedNames;d.leaf||(d.leaf="leaf"),d.parent||(d.parent="parent"),d.expanded||(d.expanded="expanded"),d.checked||(d.checked="checked"),d.selected||(d.selected="selected"),d.level||(d.level="level"),d.data||(d.data="data")}if(b.hierarchy){var e=this,d=b.hierarchy.reservedNames;if(b.hierarchy.root){if("xml"==b.dataType){var c=this.getRecordsHierarchy("uid","parentuid","records",null,a);return this.hierarchy=c,c}this.hierarchy=this.records;for(var f=b.hierarchy.root,g=0;g<this.records.length;g++){var h=this.records[g];if(h){var i=function(a){if(b.hierarchy.record)a.records=a[f][b.hierarchy.record];else{var c=f.split(e.mapChar),g=null;if(c.length>1){for(var h=a,i=0;i<c.length;i++)void 0!=h&&(h=h[c[i]]);g=h}else g=a[f];a.records=g}(null==a.records||a.records&&0==a.records.length)&&(a[d.leaf]=!0)};i(h),h[d.level]=0;var j=this.getid(b.id,h,g);h.uid=j,h[d.parent]=null,h[d.data]=h,void 0===h[d.expanded]&&(h[d.expanded]=!1);var k=function(a,c){if(!c)return void(a.records=new Array);for(var f=0;f<c.length;f++){var g=c[f];if(g){i(g),g[d.level]=a[d.level]+1,g[d.parent]=a,g[d.data]=g;var h=e.getid(b.id,g,f);h==f&&null==b.id?g.uid=a.uid+"_"+h:g.uid=h,void 0===g[d.expanded]&&(g[d.expanded]=!1),k(g,g.records)}}};k(h,h.records)}}return this.hierarchy}if(b.hierarchy.keyDataField&&b.hierarchy.parentDataField){var c=this.getRecordsHierarchy(b.hierarchy.keyDataField.name,b.hierarchy.parentDataField.name,"records",null,a);return this.hierarchy=c,c}if(b.hierarchy.groupingDataFields){for(var l=new Array,g=0;g<b.hierarchy.groupingDataFields.length;g++)l.push(b.hierarchy.groupingDataFields[g].name);var c=this.getGroupedRecords(l,"records","label",null,"data",null,"parent",a);return this.hierarchy=c,c}}}},addRecord:function(a,b,c,d){var e=this,f=function(){return{leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"}};if(void 0!=a){if(void 0==c){if(this.hierarchy&&this.hierarchy.length>=0&&(this._source.hierarchy||d)){var g=e._source&&e._source.hierarchy?e._source.hierarchy.reservedNames:null;null==g&&(g=f()),a[g.level]=0,"last"==b?this.hierarchy.push(a):"number"==typeof b&&isFinite(b)?this.hierarchy.splice(b,0,a):this.hierarchy.splice(0,0,a)}else"last"==b?this.records.push(a):"number"==typeof b&&isFinite(b)?this.records.splice(b,0,a):this.records.splice(0,0,a);return!0}if(this.hierarchy.length>0){var h=function(d){if(d)for(var g=0;g<d.length;g++){var i=d[g];if(i.uid==c){var j=e._source&&e._source.hierarchy?e._source.hierarchy.reservedNames:null;return null==j&&(j=f()),a[j.parent]=i,a[j.level]=i[j.level]+1,i.records?i[j.leaf]=!1:(i.records=new Array,i[j.leaf]=!1),"last"==b?i.records.push(a):"number"==typeof b&&isFinite(b)?i.records.splice(b,0,a):i.records.splice(0,0,a),!0}i.records&&h(i.records)}};h(this.hierarchy)}}return!1},deleteRecord:function(a){var b=this;if(this.hierarchy.length>0){var c=function(d){if(d)for(var e=0;e<d.length;e++){var f=d[e];if(f.uid==a){d.splice(e,1),b.recordids[a]&&delete b.recordids[a];var g=function(a){for(var c=0;c<a.length;c++){for(var d=a[c].uid,e=0;e<b.records.length;e++){var f=b.records[e];if(f.uid==d){b.records.splice(e,1);break}}a[c].records&&g(a[c].records)}};f.records&&g(f.records);for(var h=0;h<b.records.length;h++){var f=b.records[h];if(f.uid==a){b.records.splice(h,1);break}}return!0}f.records&&c(f.records)}};c(this.hierarchy)}else for(var d=0;d<this.records.length;d++){var e=this.records[d];if(e.uid==a)return this.records.splice(d,1),!0}return!1},addForeignValues:function(a){for(var b=this,c=a.datafields?a.datafields.length:0,d=0;c>d;d++){var e=a.datafields[d];if(void 0!=e)if(void 0!=e.values){void 0==e.value&&(e.value=e.name),void 0==e.values.value&&(e.values.value=e.value);var f,g,h=new Array;b.pageable&&b.virtualmode?(f=b.pagenum*b.pagesize,g=f+b.pagesize,g>b.totalrecords&&(g=b.totalrecords)):b.virtualmode?(f=a.recordstartindex,g=a.recordendindex,g>b.totalrecords&&(g=b.totalrecords)):(f=0,g=b.records.length);for(var i=f;g>i;i++){var j=b.records[i],k=e.name,l=j[e.value];if(void 0!=h[l])j[k]=h[l];else for(var m=0;m<e.values.source.length;m++){var n=e.values.source[m],o=n[e.values.value];if(void 0==o&&(o=n.uid),o==l){var p=n[e.values.name];j[k]=p,h[l]=p;break}}}}else if(void 0!=e.value)for(var i=0;i<b.records.length;i++){var j=b.records[i];j[e.name]=j[e.value]}}},abort:function(){this.xhr&&4!=this.xhr.readyState&&(this.xhr.abort(),me.callDownloadComplete())},_requestData:function(b,c,d){var e=this,f=function(b){if(b.totalrecords&&(c.totalrecords=b.totalrecords,e.totalrecords=b.totalrecords),b.records&&(e.records=b.records,e.cachedrecords=b.records),e.addForeignValues(c),d.uniqueDataFields){var f=e.getUniqueRecords(e.records,d.uniqueDataFields);e.records=f,e.cachedrecords=f}if(d.beforeLoadComplete){var g=d.beforeLoadComplete(e.records,data);void 0!=g&&(e.records=g,e.cachedrecords=g)}for(var h=0;h<e.records.length;h++){var i=e.records[h];void 0!=i&&void 0==i.uid&&(i.uid=e.getid(c.id,i,h))}e.buildHierarchy.call(e),a.isFunction(d.loadComplete)&&d.loadComplete(b),e.callDownloadComplete()};d.loadServerData(b,c,f)},getUniqueRecords:function(a,b){if(a&&b)for(var c=a.length,d=b.length,e=new Array,f=new Array,g=0;c>g;g++){var h=a[g],i="";if(void 0!=h){for(var j=0;d>j;j++){var k=b[j];i+=h[k]+"_"}f[i]||(e[e.length]=h),f[i]=!0}}return e},getAggregatedData:function(b,c,d,e){var f=d;f||(f=this.records);var g={},h=new Array,i=f.length;if(0!=i&&void 0!=i){for(var j=0;i>j;j++)for(var k=f[j],l=0;l<b.length;l++){var m=b[l],n=k[m.name];if(m.aggregates){g[m.name]=g[m.name]||{},h[m.name]=h[m.name]||0,h[m.name]++;var o=function(b){for(obj in b){var c=g[m.name][obj];null==c&&(g[m.name][obj]=0,c=0),a.isFunction(b[obj])&&(c=b[obj](c,n,m.name,k,e)),g[m.name][obj]=c}},p=parseFloat(n);p=!isNaN(p),p&&(n=parseFloat(n)),"number"==typeof n&&isFinite(n)?a.each(m.aggregates,function(){var a=g[m.name][this];if(null==a&&(a=0,"min"==this&&(a=9999999999999),"max"==this&&(a=-9999999999999)),"sum"==this||"avg"==this||"stdev"==this||"stdevp"==this||"var"==this||"varp"==this)a+=parseFloat(n);else if("product"==this)0==j?a=parseFloat(n):a*=parseFloat(n);else if("min"==this)a=Math.min(a,parseFloat(n));else if("max"==this)a=Math.max(a,parseFloat(n));else if("count"==this)a++;else if("object"==typeof this)return void o(this);g[m.name][this]=a}):a.each(m.aggregates,function(){if("min"==this||"max"==this||"count"==this||"product"==this||"sum"==this||"avg"==this||"stdev"==this||"stdevp"==this||"var"==this||"varp"==this){if(null===n)return!0;var a=g[m.name][this];return null==a&&(a=0),g[m.name][this]=a,!0}"object"==typeof this&&o(this)})}}for(var l=0;l<b.length;l++){var m=b[l];if(g[m.name]||(g[m.name]={},a.each(m.aggregates,function(a){g[m.name][this]=0})),void 0!=g[m.name].avg){var n=g[m.name].avg,q=h[m.name];0===q||void 0==q?g[m.name].avg=0:g[m.name].avg=n/q}else void 0!=g[m.name].count&&(g[m.name].count=i);(g[m.name].stdev||g[m.name].stdevp||g[m.name]["var"]||g[m.name].varp)&&a.each(m.aggregates,function(a){if("stdev"==this||"var"==this||"varp"==this||"stdevp"==this){for(var b=g[m.name][this],c=i,d=b/i,e=0,h=0;i>h;h++){var j=f[h],k=j[m.name];e+=(k-d)*(k-d)}var l="stdevp"==this||"varp"==this?c:c-1;0==l&&(l=1),"var"==this||"varp"==this?g[m.name][this]=e/l:"stdevp"!=this&&"stdev"!=this||(g[m.name][this]=Math.sqrt(e/l))}}),m.formatStrings&&a.each(m.aggregates,function(b){var d=m.formatStrings[b];if(d)if("min"==this||"max"==this||"count"==this||"product"==this||"sum"==this||"avg"==this||"stdev"==this||"stdevp"==this||"var"==this||"varp"==this){var e=g[m.name][this];g[m.name][this]=a.MLjqui.dataFormat.formatnumber(e,d,c)}else if("object"==typeof this)for(obj in this){var e=g[m.name][obj];g[m.name][obj]=a.MLjqui.dataFormat.formatnumber(e,d,c)}})}return g}},bindDownloadComplete:function(a,b){this._downloadComplete[this._downloadComplete.length]={id:a,func:b}},unbindDownloadComplete:function(a){for(var b=0;b<this._downloadComplete.length;b++)if(this._downloadComplete[b].id==a){this._downloadComplete[b].func=null,this._downloadComplete.splice(b,1);break}},callDownloadComplete:function(){for(var a=0;a<this._downloadComplete.length;a++){var b=this._downloadComplete[a];null!=b.func&&b.func()}},setSource:function(a){this._source=a},generatekey:function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},getGroupedRecords:function(b,c,d,e,f,g,h,i,j){var k=this;j||(j=0);for(var l=new Array,m=0;m<b.length;m++)l[m]=k.generatekey();c||(c="items"),d||(d="group"),f||(f="record"),h||(h="parentItem"),void 0===g&&(g="value");var n=new Array,o=0,p=new Array,q=b.length;new Array;if(!i)var i=this.records;for(var r=i.length,s=function(b){var c=b;return e&&a.each(e,function(){this.name&&this.map&&(c[this.map]=c[this.name])}),c},t=0;r>t;t++){var u=s(i[t]);id=u[k.uniqueId];var v=new Array,w=0;for(m=0;q>m;m++){var x=b[m],y=u[x];null!=y&&(v[w++]={value:y,hash:l[m]})}if(v.length!=q)break;for(var z=null,A="",B=-1,C=0;C<v.length;C++){B++;var D=v[C].value,E=v[C].hash;if(A=A+"_"+E+"_"+D,void 0==p[A]||null==p[A]){if(null==z){z={level:0},z[h]=null,z[d]=D,z[f]=u,void 0!==u.expanded?z.expanded=u.expanded:z.expanded=!1,g&&(z[g]=u[g]),z[c]=new Array;var F=n.length+j;this._source.id&&"number"!=typeof u.uid&&!isFinite(u.uid)||(F="Row"+F),z.uid=F,n[o++]=z}else{var G={level:z.level+1};G[h]=z,G[d]=D,G[c]=new Array,G[f]=u,void 0!==u.expanded?G.expanded=u.expanded:G.expanded=!1,g&&(G[g]=u[g]),G.uid=z.uid+"_"+z[c].length,z[c][z[c].length]=G,z=G}p[A]=z}else z=p[A]}u&&(u.leaf=!0),null!=z?(null==this._source.id&&(void 0==u.uid?u.uid=z.uid+"_"+z[c].length:-1==u.uid.toString().indexOf(z.uid)&&(u.uid=z.uid+"_"+u.uid)),u[h]=z,u.level=z.level+1,z[c][z[c].length]=u):void 0==u.uid&&(u.uid=this.generatekey())}return n},getRecordsHierarchy:function(b,c,d,e,f){
var g=new Array,h=this.records;if(f&&(h=f),0==this.records.length)return null;for(var i=null!=d?d:"items",j=[],k=h,l=k.length,m=this._source&&this._source.hierarchy?this._source.hierarchy.reservedNames:null,n=function(b){var c=b;return e&&a.each(e,function(){this.name&&this.map&&(c[this.map]=c[this.name])}),c},o=0;l>o;o++){var p=a.extend({},k[o]),q=p[c],r=p[b];j[r]={parentid:q,item:p}}for(var o=0;l>o;o++){var p=a.extend({},k[o]),q=p[c],r=p[b];if(void 0!=j[q]){var p={parentid:q,item:j[r].item},s=j[q].item;s[i]||(s[i]=[]);var t=s[i].length,u=p.item;m?void 0==u[m.parent]&&(u[m.parent]=s):void 0==u.parent&&(u.parent=s);var v=n(u);s[i][t]=v,j[q].item=s,j[r]=p}else{var u=j[r].item;m?void 0==u[m.parent]&&(u[m.parent]=null):void 0==u.parent&&(u.parent=null);var v=n(u);m?v[m.level]=0:v.level=0,g[g.length]=v}}if(0!=g.length){var w=function(a,b){for(var c=0;c<b.length;c++){m?b[c][m.level]=a:b[c].level=a;var d=b[c][i];d&&d.length>0?w(a+1,d):m?b[c][m.leaf]=!0:b[c].leaf=!0}};w(0,g)}return g},bindBindingUpdate:function(a,b){this._bindingUpdate[this._bindingUpdate.length]={id:a,func:b}},unbindBindingUpdate:function(a){for(var b=0;b<this._bindingUpdate.length;b++)if(this._bindingUpdate[b].id==a){this._bindingUpdate[b].func=null,this._bindingUpdate.splice(b,1);break}},callBindingUpdate:function(a){for(var b=0;b<this._bindingUpdate.length;b++){var c=this._bindingUpdate[b];null!=c.func&&c.func(a)}},getid:function(b,c,d){if(null==b||void 0==b.name||!b.name){if(a(b,c).length>0)return a(b,c).text();if(b&&b.toString().length>0){var e=a(c).attr(b);if(null!=e&&e.toString().length>0)return a.trim(e).split(" ").join("").replace(/([ #;?%&,.+*~\':"!^$[\]()=>|\/@])/g,"");var f=b.split(this.mapChar);if(f.length>1){for(var g=c,h=0;h<f.length;h++)void 0!=g&&(g=g[f[h]]);if(void 0!=g)return g}else if(void 0!=c[b])return c[b]}return d}var e=a(c).attr(b.name);if(null!=e&&e.toString().length>0)return e;if(b.map)try{var e=a(c).attr(b.map);if(null!=e&&e.toString().length>0)return e;if(a(b.map,c).length>0)return a(b.map,c).text();if(a(b.name,c).length>0)return a(b.name,c).text()}catch(i){return d}},loadjson:function(b,c,d){"string"==typeof b&&(b=a.parseJSON(b)),void 0==d.root&&(d.root=""),void 0==d.record&&(d.record="");var b=b||c;b||(b=[]);var e=this;if(""!=d.root){var f=d.root.split(e.mapChar);if(f.length>1){for(var g=b,h=0;h<f.length;h++)void 0!=g&&(g=g[f[h]]);b=g}else if(void 0!==b[d.root]?b=b[d.root]:b[0]&&void 0!==b[0][d.root]?b=b[0][d.root]:a.each(b,function(a){return this==d.root?(b=this,!1):void(void 0!=this[d.root]&&(b=this[d.root]))}),!b){var f=d.root.split(e.mapChar);if(f.length>0){for(var g=b,h=0;h<f.length;h++)void 0!=g&&(g=g[f[h]]);b=g}}}else if(!b.length)for(obj in b)if(a.isArray(b[obj])){b=b[obj];break}if(null!=b&&void 0==b.length&&(b=a.makeArray(b)),null==b||void 0==b||"undefined"==b||void 0==b.length)throw new Error("MLjquiDataAdapter: JSON Parse error! Invalid JSON. Please, check your JSON or your MLjquiDataAdapter initialization!");if(0==b.length)return void(this.totalrecords=0);var i=b.length;this.totalrecords=this.virtualmode?d.totalrecords||i:i,this.records=new Array,this.originaldata=new Array;var j=this.records,k=this.pageable?this.pagesize*this.pagenum:d.recordstartindex;this.recordids=new Array,d.loadallrecords&&(k=0,i=this.totalrecords);var l=0;this.virtualmode&&(k=this.pageable?this.pagesize*this.pagenum:d.recordstartindex,l=k,k=0,i=this.totalrecords);var m=d.datafields?d.datafields.length:0;if(0==m){var n=b[0],o=new Array;for(obj in n){var p=obj;o[o.length]={name:p}}d.datafields=o,d.generatedfields=d.datafields,m=o.length}for(var q=k,r=k;i>r;r++){var s=b[r];if(void 0==s)break;if(!d.record||""==d.record||(s=s[d.record],void 0!=s)){var t=this.getid(d.id,s,r);if("object"==typeof t&&(t=r),!this.recordids[t]){this.recordids[t]=s;for(var u={},v=0;m>v;v++){var w=d.datafields[v],x="";if(void 0!=w&&null!=w){if(w.map){if(a.isFunction(w.map))x=w.map(s);else{var f=w.map.split(e.mapChar);if(f.length>0){for(var y=s,h=0;h<f.length;h++)void 0!=y&&(y=y[f[h]]);x=y}else x=s[w.map]}void 0!=x&&null!=x?x=this.getvaluebytype(x,w):void 0==x&&null!=x&&(x="")}if(""==x&&!w.map&&(x=s[w.name],void 0==x&&null!=x&&(x=""),void 0!=w.value&&void 0!=x)){var z=x[w.value];void 0!=z&&(x=z)}if(x=this.getvaluebytype(x,w),void 0!=w.displayname?u[w.displayname]=x:u[w.name]=x,"array"===w.type){var A=function(b){if(b)for(var c=0;c<b.length;c++){var f=b[c];if(f)for(var g=0;m>g;g++){var h=d.datafields[g],i="";if(void 0!=h&&null!=h){if(h.map){if(a.isFunction(h.map))i=h.map(f);else{var j=h.map.split(e.mapChar);if(j.length>0){for(var k=f,l=0;l<j.length;l++)void 0!=k&&(k=k[j[l]]);i=k}else i=f[h.map]}void 0!=i&&null!=i?i=this.getvaluebytype(i,h):void 0==i&&null!=i&&(i="")}if(""==i&&!h.map&&(i=f[h.name],void 0==i&&null!=i&&(i=""),void 0!=h.value&&void 0!=i)){var n=i[h.value];void 0!=n&&(i=n)}i=this.getvaluebytype(i,h),void 0!=h.displayname?f[h.displayname]=i:f[h.name]=i,"array"===h.type&&A.call(this,i)}}}};A.call(this,x)}}}(d.recordendindex<=0||k<d.recordendindex)&&(j[l+q]=new Object(u),j[l+q].uid=t,this.originaldata[l+q]=new Object(j[r]),q++)}}}this.records=j,this.cachedrecords=this.records},loadxml:function(b,c,d){"string"==typeof b&&(b=c=a(a.parseXML(b)),b=null),void 0==d.root&&(d.root=""),void 0==d.record&&(d.record="");var b;b=a.MLjqui.browser.msie&&c&&void 0!=c.xml?a(d.root+" "+d.record,a.parseXML(c.xml)):b||a(d.root+" "+d.record,c),b||(b=[]);var e=b.length;if(0!=b.length){this.totalrecords=this.virtualmode?d.totalrecords||e:e,this.records=new Array,this.originaldata=new Array;var f=this.records,g=this.pageable?this.pagesize*this.pagenum:d.recordstartindex;this.recordids=new Array,d.loadallrecords&&(g=0,e=this.totalrecords);var h=0;this.virtualmode&&(g=this.pageable?this.pagesize*this.pagenum:d.recordstartindex,h=g,g=0,e=this.totalrecords);var i=d.datafields?d.datafields.length:0;if(0==i){var j=b[0],k=new Array;for(obj in j){var l=obj;k[k.length]={name:l}}d.datafields=k,d.generatedfields=d.datafields,i=k.length}for(var m=g,n=!1,o=g;e>o;o++){var p=b[o];if(void 0==p)break;var q=this.getid(d.id,p,o);if(!this.recordids[q]){this.recordids[q]=p;var r={},s=!1;d.hierarchy&&d.hierarchy.root&&(s=!0);for(var t=0;i>t;t++){var u=d.datafields[t],v="";if(void 0!=u&&null!=u){if(u.map)if(a.isFunction(u.map))v=u.map(p);else{var w=u.map.indexOf("[");if(0>w)if(v=a(u.map,p),1==v.length)v=v.text();else{n=!0;for(var x=new Array,y=0;y<v.length;y++)x.push(a(v[y]).text());v=x,s&&x.length>0&&(v=x[0])}else{var z=u.map.substring(0,w-1),A=u.map.indexOf("]"),B=u.map.substring(w+1,A);v=a(z,p).attr(B),void 0==v&&(v=a(p).attr(B)),void 0==v&&(v="")}""==v&&(v=a(p).attr(u.map),void 0==v&&(v=""))}if(""==v){if(v=a(u.name,p),1==v.length)v=v.text();else{for(var x=new Array,y=0;y<v.length;y++)x.push(a(v[y]).text());v=x,s&&x.length>0&&(v=x[0])}""==v&&(v=a(p).attr(u.name),void 0==v&&(v="")),""==v&&p.nodeName&&p.nodeName==u.name&&p.firstChild&&(v=a(p.firstChild).text())}v=this.getvaluebytype(v,u),void 0!=u.displayname?r[u.displayname]=v:r[u.name]=v}}(d.recordendindex<=0||g<d.recordendindex)&&(f[h+m]=a.extend({},r),f[h+m].uid=q,this.originaldata[h+m]=a.extend({},f[o]),m++)}}if(d.hierarchy&&d.hierarchy.root)for(var o=g;e>o;o++){var p=b[o],C=f[o];if(a(p).parent().length>0){var q=this.getid(d.id,a(p).parents(d.hierarchy.record+":first"));C.parentuid=q}else C.parentuid=null}this.records=f,this.cachedrecords=this.records}},loadics:function(a,b){if(null!=a){var c=b.rowDelimiter||this.rowDelimiter||"\n",d=a.split(c),e=d.length,f=a.split("\r");1==e&&f.length>1&&(d=f,e=d.length),this.records=new Array,this.originaldata=new Array;var g=this.records;this.recordids=new Array;for(var h=function(a){var b=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/,c=b.exec(a);if(!c)throw new Error("Invalid UNTIL value: "+a);return new Date(Date.UTC(c[1],c[2]-1,c[3],c[5]||0,c[6]||0,c[7]||0))},i=0;e>i;i++){var j=d[i];if("BEGIN:VEVENT"!=j)if(j.indexOf("SUMMARY")>=0)l.SUMMARY=j.substring(j.indexOf("SUMMARY")+8);else if(j.indexOf("LOCATION")>=0)l.LOCATION=j.substring(j.indexOf("LOCATION")+9);else if(j.indexOf("DESCRIPTION")>=0)l.DESCRIPTION=j.substring(j.indexOf("DESCRIPTION")+12);else if(j.indexOf("RRULE")>=0)l.RRULE=j.substring(j.indexOf("RRULE")+6);else if(j.indexOf("EXDATE")>=0){var k=j.substring(j.indexOf("EXDATE")+7);l.EXDATE=k}else j.indexOf("DTEND")>=0?l.DTEND=h(j.substring(j.indexOf("DTEND")+6)):j.indexOf("DTSTART")>=0?l.DTSTART=h(j.substring(j.indexOf("DTSTART")+8)):j.indexOf("UID")>=0?l.uid=l.UID=j.substring(j.indexOf("UID")+4):j.indexOf("STATUS")>=0?l.STATUS=j.substring(j.indexOf("STATUS")+7):"END:VEVENT"!=j||g.push(l);else var l={}}this.records=g,this.cachedrecords=this.records}},loadtext:function(b,c){if(null!=b){var d=c.rowDelimiter||this.rowDelimiter||"\n",e=b.split(d),f=e.length,g=b.split("\r");1==f&&g.length>1&&(e=g,f=e.length),this.totalrecords=this.virtualmode?c.totalrecords||f:f,this.records=new Array,this.originaldata=new Array;var h=this.records,i=this.pageable?this.pagesize*this.pagenum:c.recordstartindex;this.recordids=new Array,c.loadallrecords&&(i=0,f=this.totalrecords);var j=0;this.virtualmode&&(i=this.pageable?this.pagesize*this.pagenum:c.recordstartindex,j=i,i=0,f=this.totalrecords);var k=c.datafields.length,l=c.columnDelimiter||this.columnDelimiter;l||(l="tab"===c.datatype||"tsv"===c.datatype?"	":",");for(var m=i;f>m;m++){var n=e[m],o=null;if(!this.recordids[o]){null==c.id&&(o=m,this.recordids[o]=n);for(var p={},q=e[m].split(l),r=0;k>r;r++)if(!(r>=q.length)){var s=c.datafields[r],t=q[r];s.map&&a.isFunction(s.map)&&(t=s.map(n)),s.type&&(t=this.getvaluebytype(t,s));var u=s.map||s.name||r.toString();p[u]=t,null!=c.id&&c.id===s.name&&(o=t,this.recordids[o]=n)}null==o&&(o=m),h[j+m]=a.extend({},p),h[j+m].uid=o,this.originaldata[j+m]=a.extend({},h[m])}}this.records=h,this.cachedrecords=this.records}},getvaluebytype:function(b,c){var d=b;if(null==b)return b;if(a.isArray(b)&&"array"!=c.type){for(var e=0;e<b.length;e++)b[e]=this.getvaluebytype(b[e],c);return b}if("date"==c.type)if("NaN"==b)b="";else{var f=new Date(b);if("string"==typeof b&&c.format){var g=a.MLjqui.dataFormat.parsedate(b,c.format);null!=g&&(f=g)}b=("NaN"==f.toString()||"Invalid Date"==f.toString())&&a.MLjqui.dataFormat?a.MLjqui.dataFormat.tryparsedate(b):f,null==b&&(b=d)}else if("float"==c.type||"number"==c.type||"decimal"==c.type)if("NaN"==b)b="";else{var b=parseFloat(b);isNaN(b)&&(b=d)}else if("int"==c.type||"integer"==c.type){var b=parseInt(b);isNaN(b)&&(b=d)}else"bool"!=c.type&&"boolean"!=c.type||(null!=b&&void 0!=b.toLowerCase&&("false"==b.toLowerCase()?b=!1:"true"==b.toLowerCase()&&(b=!0)),b=1==b?!0:0==b&&""!==b?!1:"");return b}},a.MLjqui.dataFormat={},a.extend(a.MLjqui.dataFormat,{regexTrim:/^\s+|\s+$/g,regexInfinity:/^[+-]?infinity$/i,regexHex:/^0x[a-f0-9]+$/i,regexParseFloat:/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,toString:Object.prototype.toString,isBoolean:function(a){return"boolean"==typeof a},isObject:function(b){return b&&("object"==typeof b||a.isFunction(b))||!1},isDate:function(a){return a instanceof Date},arrayIndexOf:function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isNull:function(a){return null===a},isUndefined:function(a){return"undefined"==typeof a},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a)},isEmpty:function(b){return!this.isString(b)&&this.isValue(b)?!1:this.isValue(b)?(b=a.trim(b).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),""===b):!0},startsWith:function(a,b){return 0===a.indexOf(b)},endsWith:function(a,b){return a.substr(a.length-b.length)===b},trim:function(a){return(a+"").replace(this.regexTrim,"")},isArray:function(a){return"[object Array]"===this.toString.call(a)},defaultcalendar:function(){var a={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"MM-dd-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","};return a},expandFormat:function(a,b){b=b||"F";var c,d=a.patterns,e=b.length;if(1===e){if(c=d[b],!c)throw"Invalid date format string '"+b+"'.";b=c}else 2===e&&"%"===b.charAt(0)&&(b=b.charAt(1));return b},getEra:function(a,b){if(!b)return 0;if("string"==typeof a)return 0;for(var c,d=a.getTime(),e=0,f=b.length;f>e;e++)if(c=b[e].start,null===c||d>=c)return e;return 0},toUpper:function(a){return a.split("").join(" ").toUpperCase()},toUpperArray:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b[c]=this.toUpper(a[c]);return b},getEraYear:function(a,b,c,d){var e=a.getFullYear();return!d&&b.eras&&(e-=b.eras[c].offset),e},toUpper:function(a){return a?a.toUpperCase():""},getDayIndex:function(a,b,c){var d,e=a.days,f=a._upperDays;return f||(a._upperDays=f=[this.toUpperArray(e.names),this.toUpperArray(e.namesAbbr),this.toUpperArray(e.namesShort)]),b=b.toUpperCase(),c?(d=this.arrayIndexOf(f[1],b),-1===d&&(d=this.arrayIndexOf(f[2],b))):d=this.arrayIndexOf(f[0],b),d},getMonthIndex:function(a,b,c){var d=a.months,e=a.monthsGenitive||a.months,f=a._upperMonths,g=a._upperMonthsGen;f||(a._upperMonths=f=[this.toUpperArray(d.names),this.toUpperArray(d.namesAbbr)],a._upperMonthsGen=g=[this.toUpperArray(e.names),this.toUpperArray(e.namesAbbr)]),b=this.toUpper(b);var h=this.arrayIndexOf(c?f[1]:f[0],b);return 0>h&&(h=this.arrayIndexOf(c?g[1]:g[0],b)),h},appendPreOrPostMatch:function(a,b){for(var c=0,d=!1,e=0,f=a.length;f>e;e++){var g=a.charAt(e);switch(g){case"'":d?b.push("'"):c++,d=!1;break;case"\\":d&&b.push("\\"),d=!d;break;default:b.push(g),d=!1}}return c},getTokenRegExp:function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},formatlink:function(a,b){var c="";return b&&b.target&&(c="target="+b.target),""!=c?"<a "+c+' href="'+a+'">'+a+"</a>":'<a href="'+a+'">'+a+"</a>"},formatemail:function(a){return'<a href="mailto:'+a+'">'+a+"</a>"},formatNumber:function(a,b,c){return this.formatnumber(a,b,c)},formatnumber:function(a,b,c){if(void 0!=c&&null!=c&&""!=c||(c=this.defaultcalendar()),""===b||null===b)return a;this.isNumber(a)||(a*=1);var d;b.length>1&&(d=parseInt(b.slice(1),10));var e={},f=b.charAt(0).toUpperCase();switch(e.thousandsSeparator=c.thousandsseparator,e.decimalSeparator=c.decimalseparator,f){case"D":case"d":case"F":case"f":e.decimalPlaces=d;break;case"N":case"n":e.decimalPlaces=0;break;case"C":case"c":e.decimalPlaces=d,"before"==c.currencysymbolposition?e.prefix=c.currencysymbol:e.suffix=c.currencysymbol;break;case"P":case"p":e.suffix=c.percentsymbol,e.decimalPlaces=d;break;default:throw"Bad number format specifier: "+f}if(this.isNumber(a)){var g,h=0>a,i=a+"",j=e.decimalSeparator?e.decimalSeparator:".";if(this.isNumber(e.decimalPlaces)){var k=e.decimalPlaces,l=Math.pow(10,k);if(i=(a*l).toFixed(0)/l+"",g=i.lastIndexOf("."),k>0)for(0>g?(i+=j,g=i.length-1):"."!==j&&(i=i.replace(".",j));i.length-1-g<k;)i+="0"}else{var i=a+"";g=i.lastIndexOf("."),g>0&&void 0==k&&"."!==j&&(i=i.replace(".",j))}if(e.thousandsSeparator){var m=e.thousandsSeparator;g=i.lastIndexOf(j),g=g>-1?g:i.length;for(var n=i.substring(g),o=-1,p=g;p>0;p--)o++,o%3===0&&p!==g&&(!h||p>1)&&(n=m+n),n=i.charAt(p-1)+n;i=n}return i=e.prefix?e.prefix+i:i,i=e.suffix?i+e.suffix:i}return a},tryparsedate:function(b,c){void 0!=c&&null!=c||(c=this.defaultcalendar());var d=this;if(""==b)return null;if(null==b||b.substring||(b=b.toString()),null!=b&&"/Date("==b.substring(0,6)){var e=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/,f=new Date(+b.replace(/\/Date\((\d+)\)\//,"$1"));if("Invalid Date"==f){var g=b.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/),f=null;g&&(f=new Date(1*g[1]+36e5*g[2]+6e4*g[3]))}if(null==f||"Invalid Date"==f||isNaN(f)){var h=e.exec(b);if(h){var i=new Date(parseInt(h[1]));if(h[2]){var j=parseInt(h[3]);"-"===h[2]&&(j=-j);var k=i.getUTCMinutes();i.setUTCMinutes(k-j)}if(!isNaN(i.valueOf()))return i}}return f}patterns=c.patterns;for(prop in patterns)if(f=d.parsedate(b,patterns[prop],c)){if("ISO"==prop){var l=d.parsedate(b,patterns.ISO2,c);if(l)return l}return f}if(null!=b){for(var l=null,m=[":","/","-"],n=!0,o=0;o<m.length;o++)-1!=b.indexOf(m[o])&&(n=!1);if(n){var p=new Number(b);if(!isNaN(p))return new Date(p)}}if("string"===a.type(b)){var q=d;b=q.trim(b);var r=[":","/","-"," ",","],s=function(a,b,c){return c.replace(new RegExp(a,"g"),b)};b=s(", ",",",b);var t="",u=b;b.indexOf(":")>=0?(t=b.substring(b.indexOf(":")-2),t=q.trim(t),u=b.substring(0,b.indexOf(":")-2)):b.toUpperCase().indexOf("AM")>=0?(t=b.substring(b.toUpperCase().indexOf("AM")-2),t=q.trim(t),u=b.substring(0,b.toUpperCase().indexOf("AM")-2)):b.toUpperCase().indexOf("PM")>=0&&(t=b.substring(b.toUpperCase().indexOf("PM")-2),t=q.trim(t),u=b.substring(0,b.toUpperCase().indexOf("PM")-2));var v=new Date,w=!1;if(u){for(var x=0;x<r.length;x++)if(u.indexOf(r[x])>=0){m=u.split(r[x]);break}for(var y=new Array,z=new Array,A=new Array,B=null,C=null,x=0;x<m.length;x++){var o=m[x],D=q.parsedate(o,"d",c)||q.parsedate(o,"dd",c)||q.parsedate(o,"ddd",c)||q.parsedate(o,"dddd",c);if(D&&o.length<=2){B=x,y.push(D.getDate());break}}for(var x=0;x<m.length;x++){var o=m[x],E=q.parsedate(o,"M",c)||q.parsedate(o,"MM",c)||q.parsedate(o,"MMM",c)||q.parsedate(o,"MMMM",c);if(E){if(void 0!=B&&B==x)continue;if(z.push(E.getMonth()),o.length>2){C=x;break}}}for(var x=0;x<m.length;x++){var o=m[x],F=q.parsedate(o,"yyyy",c);if(F){if(void 0!=B&&B==x)continue;if(void 0!=C&&C==x)continue;A.push(F.getFullYear())}}for(var G=new Array,H=0;H<y.length;H++)for(var g=0;g<z.length;g++)for(var I=0;I<A.length;I++){var i=new Date(A[I],z[g],y[H]);A[I]<1970&&i.setFullYear(A[I]),NaN!=i.getTime()&&G.push(i)}G.length>0&&(v=G[0],w=!0)}if(t){var J=t.indexOf(":")>=0?t.split(":"):t,K=q.parsedate(t,"h:mm tt",c)||q.parsedate(t,"h:mm:ss tt",c)||q.parsedate(t,"HH:mm:ss.fff",c)||q.parsedate(t,"HH:mm:ss.ff",c)||q.parsedate(t,"HH:mm:ss.tttt",c)||q.parsedate(t,"HH:mm:ss",c)||q.parsedate(t,"HH:mm",c)||q.parsedate(t,"HH",c),L=0,M=0,N=0,O=0;K&&NaN!=K.getTime()?(L=K.getHours(),M=K.getMinutes(),N=K.getSeconds(),O=K.getMilliseconds()):(1==J.length&&(L=parseInt(J[0])),2==J.length&&(L=parseInt(J[0]),M=parseInt(J[1])),3==J.length&&(L=parseInt(J[0]),M=parseInt(J[1]),J[2].indexOf(".")>=0?(N=parseInt(J[2].toString().split(".")[0]),O=parseInt(J[2].toString().split(".")[1])):N=parseInt(J[2])),4==J.length&&(L=parseInt(J[0]),M=parseInt(J[1]),N=parseInt(J[2]),O=parseInt(J[3]))),!v||isNaN(L)||isNaN(M)||isNaN(N)||isNaN(O)||(v.setHours(L,M,N,O),w=!0)}if(w)return v}return null},getparseregexp:function(a,b){var c=a._parseRegExp;if(c){var d=c[b];if(d)return d}else a._parseRegExp=c={};for(var e,f=this.expandFormat(a,b).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),g=["^"],h=[],i=0,j=0,k=this.getTokenRegExp();null!==(e=k.exec(f));){var l=f.slice(i,e.index);if(i=k.lastIndex,j+=this.appendPreOrPostMatch(l,g),j%2)g.push(e[0]);else{var m,n=e[0],o=n.length;switch(n){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":m="(\\D+)";break;case"tt":case"t":m="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":m="(\\d{"+o+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":m="(\\d\\d?)";break;case"zzz":m="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":m="([+-]?\\d\\d?)";break;case"/":m="(\\"+a["/"]+")";break;default:throw"Invalid date format pattern '"+n+"'."}m&&g.push(m),h.push(e[0])}}this.appendPreOrPostMatch(f.slice(i),g),g.push("$");var p=g.join("").replace(/\s+/g,"\\s+"),q={regExp:p,groups:h};return c[b]=q},outOfRange:function(a,b,c){return b>a||a>c},expandYear:function(a,b){var c=new Date,d=this.getEra(c);if(100>b){var e=a.twoDigitYearMax;e="string"==typeof e?(new Date).getFullYear()%100+parseInt(e,10):e;var f=this.getEraYear(c,a,d);b+=f-f%100,b>e&&(b-=100)}return b},parsedate:function(a,b,c){void 0!=c&&null!=c||(c=this.defaultcalendar()),a=this.trim(a);var d=c,e=this.getparseregexp(d,b),f=new RegExp(e.regExp).exec(a);if(null===f)return null;for(var g,h=e.groups,i=null,j=null,k=null,l=null,m=null,n=0,o=0,p=0,q=0,r=null,s=!1,t=0,u=h.length;u>t;t++){var v=f[t+1];if(v){var w=h[t],x=w.length,y=parseInt(v,10);switch(w){case"dd":case"d":if(l=y,this.outOfRange(l,1,31))return null;break;case"MMM":case"MMMM":if(k=this.getMonthIndex(d,v,3===x),this.outOfRange(k,0,11))return null;break;case"M":case"MM":if(k=y-1,this.outOfRange(k,0,11))return null;break;case"y":case"yy":case"yyyy":if(j=4>x?this.expandYear(d,y):y,this.outOfRange(j,0,9999))return null;break;case"h":case"hh":if(n=y,12===n&&(n=0),this.outOfRange(n,0,11))return null;break;case"H":case"HH":if(n=y,this.outOfRange(n,0,23))return null;break;case"m":case"mm":if(o=y,this.outOfRange(o,0,59))return null;break;case"s":case"ss":if(p=y,this.outOfRange(p,0,59))return null;break;case"tt":case"t":if(s=d.PM&&(v===d.PM[0]||v===d.PM[1]||v===d.PM[2]),!s&&(!d.AM||v!==d.AM[0]&&v!==d.AM[1]&&v!==d.AM[2]))return null;break;case"f":case"ff":case"fff":if(q=y*Math.pow(10,3-x),this.outOfRange(q,0,999))return null;break;case"ddd":case"dddd":if(m=this.getDayIndex(d,v,3===x),this.outOfRange(m,0,6))return null;break;case"zzz":var z=v.split(/:/);if(2!==z.length)return null;if(g=parseInt(z[0],10),this.outOfRange(g,-12,13))return null;var A=parseInt(z[1],10);if(this.outOfRange(A,0,59))return null;r=60*g+(this.startsWith(v,"-")?-A:A);break;case"z":case"zz":if(g=y,this.outOfRange(g,-12,13))return null;r=60*g;break;case"g":case"gg":var B=v;if(!B||!d.eras)return null;B=trim(B.toLowerCase());for(var C=0,D=d.eras.length;D>C;C++)if(B===d.eras[C].name.toLowerCase()){i=C;break}if(null===i)return null}}}var E,F=new Date,G=d.convert;if(E=F.getFullYear(),null===j?j=E:d.eras&&(j+=d.eras[i||0].offset),null===k&&(k=0),null===l&&(l=1),G){if(F=G.toGregorian(j,k,l),null===F)return null}else{if(F.setFullYear(j,k,l),F.getDate()!==l)return null;if(null!==m&&F.getDay()!==m)return null}if(s&&12>n&&(n+=12),F.setHours(n,o,p,q),null!==r){var H=F.getMinutes()-(r+F.getTimezoneOffset());F.setHours(F.getHours()+parseInt(H/60,10),H%60)}return F},cleardatescache:function(){this.datescache=new Array},formatDate:function(a,b,c){return this.formatdate(a,b,c)},formatdate:function(a,b,c){function d(a,b){var c,d=a+"";return b>1&&d.length<b?(c=m[b-2]+d,c.substr(c.length-b,b)):c=d}function e(a,b){if(l)return l[b];if(void 0!=a.getMonth)switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate()}}if(void 0!=c&&null!=c||(c=this.defaultcalendar()),"string"==typeof a)return a;var f=a.toString()+"_"+b;if(this.datescache&&this.datescache[f])return this.datescache[f];if(!b||!b.length||"i"===b){var g;return g=this.formatDate(a,c.patterns.F,c)}var h=c.eras,i="s"===b;b=this.expandFormat(c,b),g=[];for(var j,k,l,m=["0","00","000"],n=0,o=this.getTokenRegExp();;){var p=o.lastIndex,q=o.exec(b),r=b.slice(p,q?q.index:b.length);if(n+=this.appendPreOrPostMatch(r,g),!q)break;if(n%2)g.push(q[0]);else{var s=q[0],t=s.length;switch(s){case"ddd":case"dddd":var u=3===t?c.days.namesAbbr:c.days.names;g.push(u[a.getDay()]);break;case"d":case"dd":k=!0,g.push(d(e(a,2),t));break;case"MMM":case"MMMM":var v=e(a,1);g.push(c.months[3===t?"namesAbbr":"names"][v]);break;case"M":case"MM":g.push(d(e(a,1)+1,t));break;case"y":case"yy":case"yyyy":v=this.getEraYear(a,c,this.getEra(a,h),i),4>t&&(v%=100),g.push(d(v,t));break;case"h":case"hh":j=a.getHours()%12,0===j&&(j=12),g.push(d(j,t));break;case"H":case"HH":g.push(d(a.getHours(),t));break;case"m":case"mm":g.push(d(a.getMinutes(),t));break;case"s":case"ss":g.push(d(a.getSeconds(),t));break;case"t":case"tt":v=a.getHours()<12?c.AM?c.AM[0]:" ":c.PM?c.PM[0]:" ",g.push(1===t?v.charAt(0):v);break;case"f":case"ff":case"fff":g.push(d(a.getMilliseconds(),3).substr(0,t));break;case"z":case"zz":j=a.getTimezoneOffset()/60,g.push((0>=j?"+":"-")+d(Math.floor(Math.abs(j)),t));break;case"zzz":j=a.getTimezoneOffset()/60,g.push((0>=j?"+":"-")+d(Math.floor(Math.abs(j)),2)+":"+d(Math.abs(a.getTimezoneOffset()%60),2));break;case"g":case"gg":c.eras&&g.push(c.eras[this.getEra(a,h)].name);break;case"/":g.push(c["/"]);break;default:throw"Invalid date format pattern '"+s+"'."}}}var w=g.join("");return this.datescache||(this.datescache=new Array),this.datescache[f]=w,w}}),a.MLjqui.data={};var i,j,k=/#.*$/,l=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,m=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,n=/^(?:GET|HEAD)$/,o=/^\/\//,p=/\?/,q=/([?&])_=[^&]*/,r=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,s=/\s+/,t=(a.fn.load,{}),u={},v=["*/"]+["*"];try{j=location.href}catch(w){j=document.createElement("a"),j.href="",j=j.href}i=r.exec(j.toLowerCase())||[],a.extend(a.MLjqui.data,{ajaxSetup:function(b,c){return c?d(b,a.MLjqui.data.ajaxSettings):(c=b,b=a.MLjqui.data.ajaxSettings),d(b,c),b},ajaxSettings:{url:j,isLocal:m.test(i[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":v},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":a.parseJSON,"text xml":a.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:b(t),ajaxTransport:b(u),ajax:function(b,d){function g(b,c,d,g){var i,k,l,m,n,o=c;2!==J&&(J=2,x&&clearTimeout(x),w=void 0,j=g||"",L.readyState=b>0?4:0,d&&(m=e(B,L,d)),b>=200&&300>b||304===b?(B.ifModified&&(n=L.getResponseHeader("Last-Modified"),n&&(a.lastModified[h]=n),n=L.getResponseHeader("Etag"),n&&(a.etag[h]=n)),304===b?(o="notmodified",i=!0):(i=f(B,m),o=i.state,k=i.data,l=i.error,i=!l)):(l=o,o&&!b||(o="error",0>b&&(b=0))),L.status=b,L.statusText=(c||o)+"",i?E.resolveWith(C,[k,o,L]):E.rejectWith(C,[L,o,l]),L.statusCode(G),G=void 0,z&&D.trigger("ajax"+(i?"Success":"Error"),[L,B,i?k:l]),F.fireWith(C,[L,o]),z&&(D.trigger("ajaxComplete",[L,B]),--a.active||a.event.trigger("ajaxStop")))}"object"==typeof b&&(d=b,b=void 0),d=d||{};var h,j,m,w,x,y,z,A,B=a.MLjqui.data.ajaxSetup({},d),C=B.context||B,D=C!==B&&(C.nodeType||C instanceof a)?a(C):a.event,E=a.Deferred(),F=a.Callbacks("once memory"),G=B.statusCode||{},H={},I={},J=0,K="canceled",L={readyState:0,setRequestHeader:function(a,b){if(!J){var c=a.toLowerCase();a=I[c]=I[c]||a,H[a]=b}return this},getAllResponseHeaders:function(){return 2===J?j:null},getResponseHeader:function(a){var b;if(2===J){if(!m)for(m={};b=l.exec(j);)m[b[1].toLowerCase()]=b[2];b=m[a.toLowerCase()]}return void 0===b?null:b},overrideMimeType:function(a){return J||(B.mimeType=a),this},abort:function(a){return a=a||K,w&&w.abort(a),g(0,a),this}};if(E.promise(L),L.success=L.done,L.error=L.fail,L.complete=F.add,L.statusCode=function(a){if(a){var b;if(2>J)for(b in a)G[b]=[G[b],a[b]];else b=a[L.status],L.always(b)}return this},B.url=((b||B.url)+"").replace(k,"").replace(o,i[1]+"//"),B.dataTypes=a.trim(B.dataType||"*").toLowerCase().split(s),null==B.crossDomain&&(y=r.exec(B.url.toLowerCase()),B.crossDomain=!(!y||y[1]===i[1]&&y[2]===i[2]&&(y[3]||("http:"===y[1]?80:443))==(i[3]||("http:"===i[1]?80:443)))),B.data&&B.processData&&"string"!=typeof B.data&&(B.data=a.param(B.data,B.traditional)),c(t,B,d,L),2===J)return L;if(z=B.global,B.type=B.type.toUpperCase(),B.hasContent=!n.test(B.type),z&&0===a.active++&&a.event.trigger("ajaxStart"),!B.hasContent&&(B.data&&(B.url+=(p.test(B.url)?"&":"?")+B.data,delete B.data),h=B.url,B.cache===!1)){var M=a.now(),N=B.url.replace(q,"$1_="+M);B.url=N+(N===B.url?(p.test(B.url)?"&":"?")+"_="+M:"")}(B.data&&B.hasContent&&B.contentType!==!1||d.contentType)&&L.setRequestHeader("Content-Type",B.contentType),B.ifModified&&(h=h||B.url,a.lastModified[h]&&L.setRequestHeader("If-Modified-Since",a.lastModified[h]),a.etag[h]&&L.setRequestHeader("If-None-Match",a.etag[h])),L.setRequestHeader("Accept",B.dataTypes[0]&&B.accepts[B.dataTypes[0]]?B.accepts[B.dataTypes[0]]+("*"!==B.dataTypes[0]?", "+v+"; q=0.01":""):B.accepts["*"]);for(A in B.headers)L.setRequestHeader(A,B.headers[A]);if(B.beforeSend&&(B.beforeSend.call(C,L,B)===!1||2===J))return L.abort();K="abort";for(A in{success:1,error:1,complete:1})L[A](B[A]);if(w=c(u,B,d,L)){L.readyState=1,z&&D.trigger("ajaxSend",[L,B]),B.async&&B.timeout>0&&(x=setTimeout(function(){L.abort("timeout")},B.timeout));try{J=1,w.send(H,g)}catch(O){if(!(2>J))throw O;g(-1,O)}}else g(-1,"No Transport");return L},active:0,lastModified:{},etag:{}});var x=[],y=/\?/,z=/(=)\?(?=&|$)|\?\?/,A=a.now();a.MLjqui.data.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=x.pop()||a.expando+"_"+A++;return this[b]=!0,b}}),a.MLjqui.data.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.data,i=b.url,j=b.jsonp!==!1,k=j&&z.test(i),l=j&&!k&&"string"==typeof h&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&z.test(h);return"jsonp"===b.dataTypes[0]||k||l?(e=b.jsonpCallback=a.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,f=window[e],k?b.url=i.replace(z,"$1"+e):l?b.data=h.replace(z,"$1"+e):j&&(b.url+=(y.test(i)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||a.error(e+" was not called"),g[0]},b.dataTypes[0]="json",window[e]=function(){g=arguments},d.always(function(){window[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,x.push(e)),g&&a.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),a.MLjqui.data.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(b){return a.globalEval(b),b}}}),a.MLjqui.data.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),a.MLjqui.data.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(d,e){b=document.createElement("script"),b.async="async",a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,d){(d||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,c&&b.parentNode&&c.removeChild(b),b=void 0,d||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(0,1)}}}});var B,C=window.ActiveXObject?function(){for(var a in B)B[a](0,1)}:!1,D=0;a.MLjqui.data.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&g()||h()}:g,function(b){a.extend(a.support,{ajax:!!b,cors:!!b&&"withCredentials"in b})}(a.MLjqui.data.ajaxSettings.xhr()),a.support.ajax&&a.MLjqui.data.ajaxTransport(function(b){if(!b.crossDomain||a.support.cors){var c;return{send:function(d,e){var f,g,h=b.xhr();if(b.username?h.open(b.type,b.url,b.async,b.username,b.password):h.open(b.type,b.url,b.async),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");try{for(g in d)h.setRequestHeader(g,d[g])}catch(i){}h.send(b.hasContent&&b.data||null),c=function(d,g){var i,j,k,l,m;try{if(c&&(g||4===h.readyState))if(c=void 0,f&&(h.onreadystatechange=a.noop,C&&delete B[f]),g)4!==h.readyState&&h.abort();else{
i=h.status,k=h.getAllResponseHeaders(),l={},m=h.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=h.responseText}catch(n){}try{j=h.statusText}catch(n){j=""}i||!b.isLocal||b.crossDomain?1223===i&&(i=204):i=l.text?200:404}}catch(o){g||e(-1,o)}l&&e(i,j,l,k)},b.async?4===h.readyState?setTimeout(c,0):(f=++D,C&&(B||(B={},a(window).unload(C)),B[f]=c),h.onreadystatechange=c):c()},abort:function(){c&&c(0,1)}}}}),a.MLjqui.filter=function(){this.operator="and";var b=1,c=["EMPTY","NOT_EMPTY","CONTAINS","CONTAINS_CASE_SENSITIVE","DOES_NOT_CONTAIN","DOES_NOT_CONTAIN_CASE_SENSITIVE","STARTS_WITH","STARTS_WITH_CASE_SENSITIVE","ENDS_WITH","ENDS_WITH_CASE_SENSITIVE","EQUAL","EQUAL_CASE_SENSITIVE","NULL","NOT_NULL"],d=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],e=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],f=["EQUAL","NOT_EQUAL"],g=new Array,h=new Array;this.evaluate=function(a){for(var c=!0,d=0;d<g.length;d++){var e=g[d].evaluate(a);c=0==d?e:h[d]==b||"or"==h[d]?c||e:c&&e}return c},this.getfilterscount=function(){return g.length},this.setoperatorsbyfiltertype=function(a,b){switch(a){case"numericfilter":d=b;break;case"stringfilter":c=b;break;case"datefilter":e=b;break;case"booleanfilter":f=b}},this.getoperatorsbyfiltertype=function(a){var b=new Array;switch(a){case"numericfilter":b=d.slice(0);break;case"stringfilter":b=c.slice(0);break;case"datefilter":b=e.slice(0);break;case"booleanfilter":b=f.slice(0)}return b};var i=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+"-"+a()+"-"+a()};this.createfilter=function(a,b,c,d,e,f){if(null==a||void 0==a)return null;switch(a){case"numericfilter":return new l(b,c.toUpperCase());case"stringfilter":return new j(b,c.toUpperCase());case"datefilter":return new m(b,c.toUpperCase(),e,f);case"booleanfilter":return new k(b,c.toUpperCase());case"custom":return new n(b,c.toUpperCase(),d)}throw new Error("MLjquiGrid: There is no such filter type. The available filter types are: 'numericfilter', 'stringfilter', 'datefilter' and 'booleanfilter'")},this.getfilters=function(){for(var a=new Array,b=0;b<g.length;b++){var c={value:g[b].filtervalue,condition:g[b].comparisonoperator,operator:h[b],type:g[b].type};g[b].data&&(c.id=g[b].data),a[b]=c}return a},this.addfilter=function(a,b){g[g.length]=b,b.key=i(),h[h.length]=a},this.removefilter=function(a){for(var b=0;b<g.length;b++)if(g[b].key==a.key){g.splice(b,1),h.splice(b,1);break}},this.getoperatorat=function(a){return void 0==a||null==a?null:0>a||a>g.length?null:h[a]},this.setoperatorat=function(a,b){return void 0==a||null==a?null:0>a||a>g.length?null:void(h[b]=b)},this.getfilterat=function(a){return void 0==a||null==a?null:0>a||a>g.length?null:g[a]},this.setfilterat=function(a,b){return void 0==a||null==a?null:0>a||a>g.length?null:(b.key=i(),void(g[a]=b))},this.clear=function(){g=new Array,h=new Array};var j=function(b,c){this.filtervalue=b,this.comparisonoperator=c,this.type="stringfilter",this.evaluate=function(b){var c=this.filtervalue,d=this.comparisonoperator;if(null==b||void 0==b||""==b){if("NULL"==d)return!0;if("EQUAL"==d&&b==c)return!0;if("NOT_EQUAL"==d&&b!=c)return!0;if("EMPTY"!=d)return!1;if(""==b)return!0}var e="";try{e=b.toString()}catch(f){return!0}var g=function(b,c){switch(d){case"EQUAL":return a.MLjqui.string.equalsIgnoreCase(b,c);case"EQUAL_CASE_SENSITIVE":return a.MLjqui.string.equals(b,c);case"NOT_EQUAL":return!a.MLjqui.string.equalsIgnoreCase(b,c);case"NOT_EQUAL_CASE_SENSITIVE":return!a.MLjqui.string.equals(b,c);case"CONTAINS":return a.MLjqui.string.containsIgnoreCase(b,c);case"CONTAINS_CASE_SENSITIVE":return a.MLjqui.string.contains(b,c);case"DOES_NOT_CONTAIN":return!a.MLjqui.string.containsIgnoreCase(b,c);case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!a.MLjqui.string.contains(b,c);case"EMPTY":return""==b;case"NOT_EMPTY":return""!=b;case"NOT_NULL":return null!=b;case"STARTS_WITH":return a.MLjqui.string.startsWithIgnoreCase(b,c);case"ENDS_WITH":return a.MLjqui.string.endsWithIgnoreCase(b,c);case"ENDS_WITH_CASE_SENSITIVE":return a.MLjqui.string.endsWith(b,c);case"STARTS_WITH_CASE_SENSITIVE":return a.MLjqui.string.startsWith(b,c);default:return!1}},h=new Array;if(c&&c.indexOf&&(c.indexOf("|")>=0||c.indexOf(" AND ")>=0||c.indexOf(" OR ")>=0||c.indexOf(" and ")>=0||c.indexOf(" or ")>=0)){var i=g(e,c);if(i)return i;var j=c.indexOf(" AND ")>=0?c.split(" AND "):new Array,k=c.indexOf(" OR ")>=0?c.split(" OR "):new Array,l=c.indexOf(" and ")>=0?c.split(" and "):new Array,m=c.indexOf(" or ")>=0?c.split(" or "):new Array,n=c.indexOf("|")>=0?c.split("|"):new Array;if(n.length>0)for(var o=0;o<n.length;o++)n[o]=a.trim(n[o]);var p=c.indexOf(" ")>=0?c.split(" "):new Array;if(p.length>0)for(var o=0;o<p.length;o++)p[o]=a.trim(p[o]);if(j=j.concat(p),j=j.concat(l),k=k.concat(n),k=k.concat(m),j.length>0)for(var o=0;o<j.length;o++)!j[o].indexOf(" OR ")>=0&&h.push(j[o]);if(k.length>0)for(var o=0;o<k.length;o++)!k[o].indexOf(" AND ")>=0&&h.push(k[o]);for(var q=void 0,r=0;r<h.length;r++){var b=h[r],i=g(e,b),s=r<j.length?"and":"or";q=void 0==q?i:"or"==s?q||i:q&&i}return q}return g(e,c)}},k=function(a,b){this.filtervalue=a,this.comparisonoperator=b,this.type="booleanfilter",this.evaluate=function(a){var b=this.filtervalue,c=this.comparisonoperator;if(null==a||void 0==a)return"NULL"==c;var d=a;switch(c){case"EQUAL":return d==b||d.toString()==b.toString();case"NOT_EQUAL":return d!=b&&d.toString()!=b.toString();default:return!1}}},l=function(b,c){this.filtervalue=b,this.comparisonoperator=c,this.type="numericfilter",this.evaluate=function(b){var c=this.filtervalue,d=this.comparisonoperator;if(null===b||void 0===b||""===b){if("NOT_NULL"==d)return!1;if("NULL"==d)return!0;switch(d){case"EQUAL":return b==c;case"NOT_EQUAL":return b!=c}return!1}if("NULL"==d)return!1;if("NOT_NULL"==d)return!0;var e=b;try{e=parseFloat(e)}catch(f){if(""!=b.toString())return!1}var g=function(b,c){switch(d){case"EQUAL":return b==c;case"NOT_EQUAL":return b!=c;case"GREATER_THAN":return b>c;case"GREATER_THAN_OR_EQUAL":return b>=c;case"LESS_THAN":return c>b;case"LESS_THAN_OR_EQUAL":return c>=b;case"STARTS_WITH":return a.MLjqui.string.startsWithIgnoreCase(b.toString(),c.toString());case"ENDS_WITH":return a.MLjqui.string.endsWithIgnoreCase(b.toString(),c.toString());case"ENDS_WITH_CASE_SENSITIVE":return a.MLjqui.string.endsWith(b.toString(),c.toString());case"STARTS_WITH_CASE_SENSITIVE":return a.MLjqui.string.startsWith(b.toString(),c.toString());case"CONTAINS":return a.MLjqui.string.containsIgnoreCase(b.toString(),c.toString());case"CONTAINS_CASE_SENSITIVE":return a.MLjqui.string.contains(b.toString(),c.toString());case"DOES_NOT_CONTAIN":return!a.MLjqui.string.containsIgnoreCase(b.toString(),c.toString());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!a.MLjqui.string.contains(b.toString(),c.toString());default:return!0}},h=new Array;if(c&&c.indexOf&&(c.indexOf("|")>=0||c.indexOf(" AND ")>=0||c.indexOf(" OR ")>=0||c.indexOf(" and ")>=0||c.indexOf(" or ")>=0)){var i=g(e,c);if(i)return i;c=c.toString();var j=c.indexOf(" AND ")>=0?c.split(" AND "):new Array,k=c.indexOf(" OR ")>=0?c.split(" OR "):new Array,l=c.indexOf(" and ")>=0?c.split(" and "):new Array,m=c.indexOf(" or ")>=0?c.split(" or "):new Array;j=j.concat(l),k=k.concat(m);var n=c.indexOf("|")>=0?c.split("|"):new Array;if(n.length>0)for(var o=0;o<n.length;o++)n[o]=a.trim(n[o]);if(k=k.concat(n),j.length>0)for(var o=0;o<j.length;o++)!j[o].indexOf(" OR ")>=0&&h.push(j[o]);if(k.length>0)for(var o=0;o<k.length;o++)!k[o].indexOf(" AND ")>=0&&h.push(k[o]);for(var p=void 0,q=0;q<h.length;q++){var b=h[q];if(b&&b.indexOf&&b.indexOf("..")>=0){var r=b.toString().split("..");2==r.length&&(i=e>=r[0]&&e<=r[1])}else var i=g(e,b);var s=q<j.length?"and":"or";p=void 0==p?i:"or"==s?p||i:p&&i}return p}return c&&c.indexOf&&c.indexOf("..")>=0&&(h=c.toString().split(".."),2==h.length)?e>=h[0]&&e<=h[1]:g(e,c)}},m=function(b,c,d,e){this.filtervalue=b,this.type="datefilter";var f=this;if(void 0!=d&&void 0!=e){var g=a.MLjqui.dataFormat.parsedate(b,d,e);if(null!=g)this.filterdate=g;else{var h=a.MLjqui.dataFormat.tryparsedate(b,e);null!=h&&(this.filterdate=h)}}else{var i=new Date(b);"NaN"==i.toString()||"Invalid Date"==i.toString()?this.filterdate=a.MLjqui.dataFormat.tryparsedate(b):this.filterdate=i}if(!this.filterdate){var i=new Date(b);"NaN"==i.toString()||"Invalid Date"==i.toString()?this.filterdate=a.MLjqui.dataFormat.tryparsedate(b):this.filterdate=i}this.comparisonoperator=c,this.evaluate=function(b){var c=this.filtervalue,g=this.comparisonoperator;if(null==b||void 0==b||""==b){if("NOT_NULL"==g)return!1;if("NULL"==g)return!0;switch(g){case"EQUAL":return b==c;case"NOT_EQUAL":return b!=c}return!1}if("NULL"==g)return!1;if("NOT_NULL"==g)return!0;var h=new Date;h.setFullYear(1900,0,1),h.setHours(12,0,0,0);try{var i=new Date(b);b="NaN"==i.toString()||"Invalid Date"==i.toString()?a.MLjqui.dataFormat.tryparsedate(b):i,h=b;var j=!1;if(void 0!=d&&void 0!=e&&(d.indexOf("t")>=0||d.indexOf("T")>=0||d.indexOf(":")>=0||d.indexOf("f")>=0)&&(j=!0,c&&-1==c.toString().indexOf(":"))){var k=a.MLjqui.dataFormat.tryparsedate(c.toString()+":00",e);null!=k&&(f.filterdate=k)}j||(h.setHours(0),h.setMinutes(0),h.setSeconds(0))}catch(l){if(""!=b.toString())return!1}if(null!=f.filterdate)c=f.filterdate;else if(c&&c.indexOf&&(-1!=c.indexOf(":")||!isNaN(parseInt(c)))){var m=new Date(h);m.setHours(12,0,0,0);for(var n=c.split(":"),o=0;o<n.length;o++)0==o&&m.setHours(n[o]),1==o&&m.setMinutes(n[o]),2==o&&m.setSeconds(n[o]);c=m}j&&c&&c.setFullYear&&h&&h.getFullYear&&-1==d.indexOf("d")&&-1==d.indexOf("M")&&-1==d.indexOf("y")&&c.setFullYear(h.getFullYear(),h.getMonth(),h.getDate());var p=function(b,c){switch(null==b&&(b=""),g){case"EQUAL":return b.toString()==c.toString();case"NOT_EQUAL":return b.toString()!=c.toString();case"GREATER_THAN":return b>c;case"GREATER_THAN_OR_EQUAL":return b>=c;case"LESS_THAN":return c>b;case"LESS_THAN_OR_EQUAL":return c>=b;case"STARTS_WITH":return a.MLjqui.string.startsWithIgnoreCase(b.toString(),c.toString());case"ENDS_WITH":return a.MLjqui.string.endsWithIgnoreCase(b.toString(),c.toString());case"ENDS_WITH_CASE_SENSITIVE":return a.MLjqui.string.endsWith(b.toString(),c.toString());case"STARTS_WITH_CASE_SENSITIVE":return a.MLjqui.string.startsWith(b.toString(),c.toString());case"CONTAINS":return a.MLjqui.string.containsIgnoreCase(b.toString(),c.toString());case"CONTAINS_CASE_SENSITIVE":return a.MLjqui.string.contains(b.toString(),c.toString());case"DOES_NOT_CONTAIN":return!a.MLjqui.string.containsIgnoreCase(b.toString(),c.toString());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!a.MLjqui.string.contains(b.toString(),c.toString());default:return!0}},q=new Array;if(c&&c.indexOf&&(c.indexOf("|")>=0||c.indexOf(" AND ")>=0||c.indexOf(" OR ")>=0||c.indexOf(" and ")>=0||c.indexOf(" or ")>=0)){var k=p(h,c);if(k)return k;var r=c.indexOf(" AND ")>=0?c.split(" AND "):new Array,s=c.indexOf(" OR ")>=0?c.split(" OR "):new Array,t=c.indexOf(" and ")>=0?c.split(" and "):new Array,u=c.indexOf(" or ")>=0?c.split(" or "):new Array;r=r.concat(t),s=s.concat(u);var v=c.indexOf("|")>=0?c.split("|"):new Array;if(v.length>0)for(var o=0;o<v.length;o++)v[o]=a.trim(v[o]);if(s=s.concat(v),r.length>0)for(var o=0;o<r.length;o++)!r[o].indexOf(" OR ")>=0&&q.push(r[o]);if(s.length>0)for(var o=0;o<s.length;o++)!s[o].indexOf(" AND ")>=0&&q.push(s[o]);for(var w=void 0,x=0;x<q.length;x++){var b=q[x];if(b&&b.indexOf&&b.indexOf("..")>=0){var y=b.toString().split("..");2==y.length&&(k=h>=y[0]&&h<=y[1])}else var k=p(h,b);var z=x<r.length?"and":"or";w=void 0==w?k:"or"==z?w||k:w&&k}return w}return c&&c.indexOf&&c.indexOf("..")>=0&&(q=c.toString().split(".."),2==q.length)?h>=q[0]&&h<=q[1]:p(h,c)}},n=function(a,b,c){this.filtervalue=a,this.comparisonoperator=b,this.evaluate=function(a,b){return c(this.filtervalue,a,this.comparisonoperator)}}}}(MLjquiBaseFramework),function(a){a.MLjqui.MLjquiWidget("MLjquiTabs","",{}),a.extend(a.MLjqui._MLjquiTabs.prototype,{defineInstance:function(){var b={scrollAnimationDuration:200,enabledHover:!0,disabled:!1,collapsible:!1,animationType:"none",enableScrollAnimation:!0,contentTransitionDuration:450,toggleMode:"click",selectedItem:0,height:"auto",width:"auto",position:"top",selectionTracker:!1,scrollable:!0,scrollPosition:"right",scrollStep:70,autoHeight:!0,headerHeight:null,showCloseButtons:!1,canCloseAllTabs:!0,closeButtonSize:16,arrowButtonSize:16,keyboardNavigation:!0,reorder:!1,selectionTrackerAnimationDuration:300,_isTouchDevice:!1,roundedCorners:!0,_headerExpandingBalance:0,_dragStarted:!1,_tabCaptured:!1,_lastUnorderedListPosition:0,_selectedItem:0,_titleList:[],_contentList:[],_contentWrapper:null,_unorderedList:null,_scrollTimeout:null,isCollapsed:!1,touchMode:!1,initTabContent:null,enableDropAnimation:!1,_currentEvent:null,_needScroll:!0,_isAnimated:{},_events:["created","selected","add","removed","enabled","disabled","selecting","unselecting","unselected","dragStart","dragEnd","locked","unlocked","collapsed","expanded","tabclick"],_initTabContentList:[],_invalidArgumentExceptions:{invalidScrollAnimationDuration:"The scroll animation duration is not valid!",invalidWidth:"Width you've entered is invalid!",invalidHeight:"Height you've entered is invalid!",invalidAnimationType:"You've entered invalid animation type!",invalidcontentTransitionDuration:"You've entered invalid value for contentTransitionDuration!",invalidToggleMode:"You've entered invalid value for toggleMode!",invalidPosition:"You've entered invalid position!",invalidScrollPosition:"You've entered invalid scroll position!",invalidScrollStep:"You've entered invalid scroll step!",invalidStructure:"Invalid structure!",invalidArrowSize:"Invalid scroll button size!",invalidCloseSize:"Invalid close button size!"},aria:{"aria-disabled":{name:"disabled",type:"boolean"}},rtl:!1};return a.extend(!0,this,b),b},createInstance:function(){a.MLjqui.aria(this),this.host.addClass(this.toThemeProperty("MLjqui-tabs")),this.host.addClass(this.toThemeProperty("MLjqui-widget")),this.host.addClass(this.toThemeProperty("MLjqui-widget-content")),this.host.attr("role","tablist"),this._unorderedList=this.host.children("ul"),this._titleList=this.host.children("ul").children("li"),this._contentList=this.host.children("div"),this._selectedItem=this.selectedItem,this._isTouchDevice=a.MLjqui.mobile.isTouchDevice(),this._needScroll=this.scrollable,this.selectionTracker&&(this.selectionTracker=this._seletionTrackerBrowserCheck()),this._isTouchDevice&&(this.reorder=!1,this.keyboardNavigation=!1);for(var b=this.length();b;)b--,this._titleList[b]=a(this._titleList[b]),this._titleList[b].attr("role","tab"),this._contentList[b]=a(this._contentList[b]),this._contentList[b].attr("role","tabpanel");this._validateProperties(),this._refresh(),this._moveSelectionTrack(this._selectedItem,0),this.disabled&&this.disable(),this.element.tabIndex=0,this._raiseEvent(0),this._enableWindowResize()},_hiddenParent:function(){var b=this;if("none"==b.host.css("display"))return!0;var c=!1;return a.each(b.host.parents(),function(){return"none"==a(this).css("display")?(c=!0,!1):void 0}),c},_enableWindowResize:function(){var b=this,c=a.MLjqui.isHidden(b.host);a.MLjqui.utilities.resize(this.host,function(){c?(b._uiRefresh(!0),c=!1):b.refresh()})},resize:function(b,c){this.width=b,this.height=c;var d=a.MLjqui.isHidden(this.host);d?(this._uiRefresh(!0),d=!1):this.refresh()},refresh:function(a){1==a&&void 0!=a||this._setSize()},_seletionTrackerBrowserCheck:function(){var b="Browser CodeName: "+navigator.appCodeName;return b+="Browser Name: "+navigator.appName,b+="Browser Version: "+navigator.appVersion,b+="Platform: "+navigator.platform,b+="User-agent header: "+navigator.userAgent,-1!=b.indexOf("IEMobile")?!1:-1!=b.indexOf("Windows Phone OS")?!1:!(a.MLjqui.browser.msie&&a.MLjqui.browser.version<=7)},render:function(){this._refresh()},_uiRefresh:function(a){if(this._unorderedListLeftBackup=this._unorderedList.css("left"),a&&this._render(),this._addStyles(),this._performLayout(),this._prepareTabs(),this._removeEventHandlers(),this._addEventHandlers(),"auto"===this._unorderedListLeftBackup&&(this._unorderedListLeftBackup=this._getArrowsDisplacement()),this._unorderedList.css("left",this._unorderedListLeftBackup),this.rtl&&this.scrollable&&this._rightArrow&&"hidden"!=this._rightArrow.css("visibility")){var b=2*this.arrowButtonSize,c=this.host.width()-parseInt(this._unorderedList.width()+b+ +parseInt(this._unorderedList.css("margin-left")),10);this._unorderedList.css("left",c+"px")}},_refresh:function(){a.MLjqui.isHidden(this.host)||this._uiRefresh(!0)},_addStyles:function(){this._unorderedList.addClass(this.toThemeProperty("MLjqui-tabs-title-container")),this._unorderedList.css({outline:"none","white-space":"nowrap","margin-top":"0px","margin-bottom":"0px",padding:"0px",background:"transparent",border:"none","border-style":"none","text-indent":"0px"});for(var a=this.length();a;)switch(a--,this._titleList[a].removeClass(),this._titleList[a].css("padding",""),this._titleList[a].addClass("MLjqui-reset"),this._titleList[a].addClass("MLjqui-disableselect"),this._titleList[a].addClass(this.toThemeProperty("MLjqui-tabs-title")),this._titleList[a].addClass(this.toThemeProperty("MLjqui-item")),"bottom"==this.position&&this._titleList[a].addClass(this.toThemeProperty("MLjqui-tabs-title-bottom")),this._titleList[a].disabled&&(this._titleList[a].addClass(this.toThemeProperty("MLjqui-tabs-title-disable")),this._titleList[a].addClass(this.toThemeProperty("MLjqui-fill-state-disabled"))),this._titleList[a].removeClass(this.toThemeProperty("MLjqui-rc-b")),this._titleList[a].removeClass(this.toThemeProperty("MLjqui-rc-t")),this._contentList[a].removeClass(this.toThemeProperty("MLjqui-rc-b")),this._contentList[a].removeClass(this.toThemeProperty("MLjqui-rc-t")),this.position){case"top":this._titleList[a].addClass(this.toThemeProperty("MLjqui-rc-t")),this._contentList[a].addClass(this.toThemeProperty("MLjqui-rc-b"));break;case"bottom":this._titleList[a].addClass(this.toThemeProperty("MLjqui-rc-b")),this._contentList[a].addClass(this.toThemeProperty("MLjqui-rc-t"))}if(this.selectionTracker)switch(this._selectionTracker.removeClass(this.toThemeProperty("MLjqui-rc-b")),this._selectionTracker.removeClass(this.toThemeProperty("MLjqui-rc-t")),this.position){case"top":this._selectionTracker.addClass(this.toThemeProperty("MLjqui-rc-t"));break;case"bottom":this._selectionTracker.addClass(this.toThemeProperty("MLjqui-rc-b"))}},_raiseEvent:function(b,c){var d=new a.Event(this._events[b]);d.owner=this,d.args=c,6!==b&&7!==b||(d.cancel=!1,this._currentEvent=d);var e="";try{if(e=this.host.trigger(d),1==b){var f=this;if(this.selectionTracker||"none"!=this.animationType)setTimeout(function(){f._initTabContentList[f.selectedItem]||f.initTabContent&&(f.initTabContent(f.selectedItem),f._initTabContentList[f.selectedItem]=!0);var b=new a.Event("loadContent");b.owner=this,f._contentList.length>0&&f._contentList[f.selectedItem]&&f._contentList[f.selectedItem].find("div").trigger(b)},50+f.selectionTrackerAnimationDuration);else{var d=new a.Event("loadContent");f._initTabContentList[f.selectedItem]||f.initTabContent&&(f.initTabContent(f.selectedItem),f._initTabContentList[f.selectedItem]=!0),d.owner=this;var d=new a.Event("resize");this.host.trigger(d)}}}catch(g){g&&console&&console.log(g)}return e},_getArrowsDisplacement:function(){if(!this._needScroll)return 0;var a,b=this.arrowButtonSize,c=this.arrowButtonSize;return a="left"===this.scrollPosition?b+c:"both"===this.scrollPosition?b:0},_scrollRight:function(a,b){this._unorderedList.stop(),this._unlockAnimation("unorderedList");var c,d,e=parseInt(this._unorderedList.width()+parseInt(this._unorderedList.css("margin-left")),10),f=parseInt(this.host.width(),10),g=parseInt(this._unorderedList.css("left"),10),h=this._getArrowsDisplacement(),i=0,j=void 0;this.scrollable?(c=parseInt(this._leftArrow.outerWidth(),10),d=parseInt(this._rightArrow.outerWidth(),10)):(c=0,d=0),a=this.enableScrollAnimation?a:0,parseInt(this._headerWrapper.width(),10)>parseInt(this._unorderedList.css("margin-left"))+parseInt(this._unorderedList.width(),10)?i=h:Math.abs(g)+this.scrollStep<Math.abs(f-e)+c+d+h?(i=g-this.scrollStep,j=g-this.scrollStep+parseInt(this._titleList[this._selectedItem].position().left)):(i=f-e-(2*this.arrowButtonSize-h),i<parseInt(this._unorderedList.css("left"),10)-4&&i>parseInt(this._unorderedList.css("left"),10)+4&&(j=f-e-c-d+parseInt(this._titleList[this._selectedItem].position().left))),this._performScrollAnimation(i,j,a)},_scrollLeft:function(a,b){this._unorderedList.stop(),this._unlockAnimation("unorderedList");var c=parseInt(this._unorderedList.css("left")),d=this._getArrowsDisplacement(),e=0,f=void 0;a=this.enableScrollAnimation?a:0,parseInt(this._headerWrapper.width())>=parseInt(this._unorderedList.width())?e=d:c+this.scrollStep<d?(e=c+this.scrollStep,f=c+this.scrollStep+parseInt(this._titleList[this._selectedItem].position().left)):(e=d,e<parseInt(this._unorderedList.css("left"))-4&&e>parseInt(this._unorderedList.css("left"))+4&&(f=parseInt(this._titleList[this._selectedItem].position().left))),this._performScrollAnimation(e,f,a)},_performScrollAnimation:function(a,b,c){var d=this;void 0!==b&&this._moveSelectionTrack(this._selectedItem,0,b),this._lockAnimation("unorderedList"),this._unorderedList.animate({left:a},c,function(){d._moveSelectionTrack(d.selectedItem,0),d._unlockAnimation("unorderedList")})},_addKeyboardHandlers:function(){var b=this;this.keyboardNavigation&&this.addHandler(this.host,"keydown",function(c){if(!b._activeAnimation()){var d=b._selectedItem,e=b.selectionTracker,f=b.getContentAt(d);if(a(c.target).ischildof(f))return!0;switch(c.keyCode){case 37:return b.rtl?b.next():b.previous(),!1;case 39:return b.rtl?b.previous():b.next(),!1;case 36:return b.first(),!1;case 35:return b.last(),!1;case 27:b._tabCaptured&&(b._cancelClick=!0,b._uncapture(null,b.selectedItem),b._tabCaptured=!1)}b.selectionTracker=e}return!0})},_addScrollHandlers:function(){var b=this;this.addHandler(this._leftArrow,"mousedown",function(){b._startScrollRepeat(!0,b.scrollAnimationDuration)}),this.addHandler(this._rightArrow,"mousedown",function(){b._startScrollRepeat(!1,b.scrollAnimationDuration)}),this.addHandler(this._rightArrow,"mouseleave",function(){clearTimeout(b._scrollTimeout)}),this.addHandler(this._leftArrow,"mouseleave",function(){clearTimeout(b._scrollTimeout)}),this.addHandler(a(document),"mouseup.tab"+this.element.id,this._mouseUpScrollDocumentHandler,this),this.addHandler(a(document),"mouseleave.tab"+this.element.id,this._mouseLeaveScrollDocumentHandler,this)},_mouseLeaveScrollDocumentHandler:function(a){var b=a.data;b._scrollTimeout&&clearTimeout(b._scrollTimeout)},_mouseUpScrollDocumentHandler:function(a){var b=a.data;clearTimeout(b._scrollTimeout)},_mouseUpDragDocumentHandler:function(a){var b=a.data;b._tabCaptured&&b._dragStarted&&b._uncapture(a),b._tabCaptured=!1},_addReorderHandlers:function(){this.addHandler(a(document),"mousemove.tab"+this.element.id,this._moveElement,this),this.addHandler(a(document),"mouseup.tab"+this.element.id,this._mouseUpDragDocumentHandler,this)},_addEventHandlers:function(){for(var b=this.length();b;)b--,this._addEventListenerAt(b);this.keyboardNavigation&&this._addKeyboardHandlers(),this.scrollable&&this._addScrollHandlers(),this.reorder&&!this._isTouchDevice&&this._addReorderHandlers();var c=this;try{if((""!=document.referrer||window.frameElement)&&null!=window.top&&window.top!=window.self){var d=function(a){c._tabCaptured&&(c._cancelClick=!0,c._uncapture(null,c.selectedItem),c._tabCaptured=!1)},e=null;window.parent&&document.referrer&&(e=document.referrer),e&&-1!=e.indexOf(document.location.host)&&window.top.document&&this.addHandler(a(window.top.document),"mouseup",d)}}catch(f){}},focus:function(){try{this.host.focus();var a=this;setTimeout(function(){a.host.focus()},25)}catch(b){}},_getFocusedItem:function(a,b){for(var c=this.length();c;){c--;var d=this._titleList[c],e=parseInt(d.outerWidth(!0)),f=parseInt(d.offset().left),g=(parseInt(this._unorderedList.offset().left),parseInt(this.host.offset().left),f);if(a>=g&&g+e>=a&&d!==this._capturedElement&&!this._titleList[c].locked&&this._titleList[c].disabled!==!0)return c}return-1},_uncapture:function(b){var c=this.selectionTracker;this._unorderedListLeftBackup=this._unorderedList.css("left"),this._dragStarted=!1,this._tabCaptured=!1;var d=this._indexOf(this._capturedElement);if(this._capturedElement){switch(this.position){case"top":this._capturedElement.css("bottom",0);break;case"bottom":this._capturedElement.css("top",0)}if(b)var e=this._getFocusedItem(b.clientX,b.clientY);-1!==e&&b?(this._raiseEvent(10,{item:d,dropIndex:e}),this._reorderItems(e,d)):this._capturedElement.css("left",0),a.each(this._titleList,function(){this.css("position","static")}),this._reorderHeaderElements(),this._unorderedList.css({position:"relative",top:"0px"}),this._prepareTabs(),-1!==e&&b?(this._moveSelectionTrack(this._selectedItem,0),this._addSelectStyle(this._selectedItem,!0)):(this._selectedItem=d,this._moveSelectionTrack(d,0),this._addSelectStyle(this._selectedItem,!0)),document.selection&&document.selection.clear(),this._unorderedList.css("left",this._unorderedListLeftBackup),this.selectionTracker=c}},_reorderItems:function(a,b){var c=this._titleList[this.selectedItem];this._contentList[b];"undefined"==typeof this._capturedElement&&(this._capturedElement=this._titleList[b]),this._titleList[b].remove(),a>b?this._titleList[b].insertAfter(this._titleList[a]):this._titleList[b].insertBefore(this._titleList[a]),this._reorderElementArrays(a,b),this._getSelectedItem(c),this._removeEventHandlers(),this._addEventHandlers()},_reorderElementArrays:function(a,b){var c=(this._titleList[this.selectedItem],this._contentList[b]);if(a>b){for(var d=b;a>=d;d++)this._titleList[d]=this._titleList[d+1],this._contentList[d]=this._contentList[d+1];this._contentList[a]=c,this._titleList[a]=this._capturedElement}else{for(var d=b;d>=a;d--)this._titleList[d]=this._titleList[d-1],this._contentList[d]=this._contentList[d-1];this._contentList[a]=c,this._titleList[a]=this._capturedElement}},getSelectedItem:function(){return this.selectedItem},_getSelectedItem:function(a){for(var b=this.length();b;)if(b--,this._titleList[b]===a){this._selectedItem=this.selectedItem=b;break}},_moveElement:function(a,b){var b=a.data;b._tabCaptured&&(document.selection&&document.selection.clear(),b._dragStarted?(b._performDrag(a),clearTimeout(b._scrollTimeout)):(unorderedListLeft=-parseInt(b._unorderedList.css("left"),10),(a.clientX+unorderedListLeft>b._startX+3||a.clientX+unorderedListLeft<b._startX-3)&&(b._prepareTabForDragging(),b._dragStarted=!0)))},_performDrag:function(a){var b=this.getZoomFactor();unorderedListLeft=-parseInt(this._unorderedList.css("left"),10),this._capturedElement.css("left",unorderedListLeft+a.clientX/b-this._startX/b),this._lastX=a.clientX/b,this._moveSelectionTrack(this.selectedItem,0)},getZoomFactor:function(){var a=1;if(document.body.getBoundingClientRect){var b=document.body.getBoundingClientRect(),c=b.right-b.left,d=document.body.offsetWidth;a=Math.round(c/d*100)/100}return a},_prepareTabForDragging:function(){switch(this._capturedElement.css({position:"relative",left:"0px",top:"0px","z-index":"300"}),this.selectedItem=this._indexOf(this._capturedElement),this.position){case"top":this._capturedElement.css("bottom",parseInt(this._capturedElement.css("top")));break;case"bottom":this._capturedElement.css("top",parseInt(this._capturedElement.css("top")))}this._raiseEvent(9,{item:this._indexOf(this._capturedElement)})},_dragScroll:function(a){var b=parseInt(this._unorderedList.css("left")),c=this;parseInt(this._capturedElement.css("left"));a.clientX<=this._headerWrapper.offset().left?(this._scrollLeft(this.scrollAnimationDuration),this._capturedElement.css("left",parseInt(this._capturedElement.css("left"))+this._lastUnorderedListPosition-b)):a.clientX>this._headerWrapper.offset().left+parseInt(this._headerWrapper.width(),10)?(this._scrollRight(this.scrollAnimationDuration),this._capturedElement.css("left",parseInt(this._capturedElement.css("left"))+this._lastUnorderedListPosition-b)):(this._unorderedList.stop(),this._unlockAnimation("unorderedList"),clearTimeout(this._scrollTimeout));var c=this;this._scrollTimeout=setTimeout(function(){c._dragScroll(a)},this.scrollAnimationDuration),this._lastUnorderedListPosition=b},_captureElement:function(a,b){this._tabCaptured||this._titleList[b].locked||this._titleList[b].disabled===!0||this._activeAnimation()||(unorderedListLeft=-parseInt(this._unorderedList.css("left"),10),this._startX=unorderedListLeft+a.clientX,this._startY=a.clientY,this._lastX=a.clientX,this._lastY=a.clientY,this._tabCaptured=!0,this._capturedElement=this._titleList[b])},_titleInteractionTrigger:function(a){this._headerExpandingBalance>0&&this._removeOppositeBorder(),this._selectedItem!==a?(this.select(this._titleList[a],"toggle"),this._titleList[a].collapsed=!1,this.collapsible||("auto"!==this.height?this._contentWrapper.css("visibility","visible"):this._contentWrapper.css("display","block"))):this.collapsible&&(this.isCollapsed?this.expand():this.collapse())},collapse:function(){var a=this._selectedItem,b=this;this.isCollapsed=!0,"auto"!==b.height?b._contentWrapper.css("visibility","hidden"):b._contentWrapper.hide(),b._raiseEvent(13,{item:a}),"top"==this.position?(b._headerWrapper.addClass(this.toThemeProperty("MLjqui-tabs-header-collapsed")),b.host.addClass(this.toThemeProperty("MLjqui-tabs-collapsed"))):(b._headerWrapper.addClass(this.toThemeProperty("MLjqui-tabs-header-collapsed-bottom")),b.host.addClass(this.toThemeProperty("MLjqui-tabs-collapsed-bottom")))},expand:function(){var a=this._selectedItem,b=this;this.isCollapsed=!1,this._select(a,b.contentTransitionDuration,null,!1,!0),"auto"!==b.height?b._contentWrapper.css("visibility","visible"):b._contentWrapper.show(),b._raiseEvent(14,{item:a}),"top"==this.position?(b._headerWrapper.removeClass(this.toThemeProperty("MLjqui-tabs-header-collapsed")),b.host.removeClass(this.toThemeProperty("MLjqui-tabs-collapsed"))):(b._headerWrapper.removeClass(this.toThemeProperty("MLjqui-tabs-header-collapsed-bottom")),b.host.removeClass(this.toThemeProperty("MLjqui-tabs-collapsed-bottom")))},_addSelectHandler:function(a){var b=this;this.addHandler(this._titleList[a],"selectstart",function(a){return!1}),this.addHandler(this._titleList[a],this.toggleMode,function(a){return function(){return b._raiseEvent("15",{item:a}),b._tabCaptured||b._cancelClick||b._titleInteractionTrigger(a),!0}}(a))},_addDragDropHandlers:function(a){var b=this;this.addHandler(this._titleList[a],"mousedown",function(c){return b._captureElement(c,a),!1}),this.addHandler(this._titleList[a],"mouseup",function(c){return b._tabCaptured&&b._dragStarted?(b._cancelClick=!0,b._uncapture(c,a)):b._cancelClick=!1,b._tabCaptured=!1,!1})},_removeHoverStates:function(){var b=this;a.each(this._titleList,function(){this.removeClass(b.toThemeProperty("MLjqui-tabs-title-hover-top")),this.removeClass(b.toThemeProperty("MLjqui-tabs-title-hover-bottom"))})},_addHoverHandlers:function(a){var b=this,c=this._titleList[a];this.addHandler(c,"mouseenter",function(d){if(a!=b._selectedItem&&("top"==b.position?c.addClass(b.toThemeProperty("MLjqui-tabs-title-hover-top")):c.addClass(b.toThemeProperty("MLjqui-tabs-title-hover-bottom")),c.addClass(b.toThemeProperty("MLjqui-fill-state-hover")),b.showCloseButtons)){var e=c.children(0).children(b.toThemeProperty(".MLjqui-tabs-close-button",!0));e.addClass(b.toThemeProperty("MLjqui-tabs-close-button-hover",!0))}}),this.addHandler(c,"mouseleave",function(d){if(a!=b._selectedItem&&("top"==b.position?c.removeClass(b.toThemeProperty("MLjqui-tabs-title-hover-top")):c.removeClass(b.toThemeProperty("MLjqui-tabs-title-hover-bottom")),c.removeClass(b.toThemeProperty("MLjqui-fill-state-hover")),b.showCloseButtons)){
var e=c.children(0).children(b.toThemeProperty(".MLjqui-tabs-close-button",!0));e.removeClass(b.toThemeProperty("MLjqui-tabs-close-button-hover",!0))}})},_addEventListenerAt:function(a){var b=this;if(!this._titleList[a].disabled){this.reorder&&!this._isTouchDevice&&this._addDragDropHandlers(a),this._addSelectHandler(a),this.enabledHover&&this._addHoverHandlers(a);var c=this._titleList[a].find(this.toThemeProperty(".MLjqui-tabs-close-button",!0));this.removeHandler(c,"click"),this.addHandler(c,"click",function(c){return b.removeAt(a),!1})}},_removeEventHandlers:function(){for(var b=this.length();b;)b--,this._removeEventListenerAt(b);this.scrollable&&(this.removeHandler(this._leftArrow,"mousedown"),this.removeHandler(this._rightArrow,"mousedown")),this.removeHandler(a(document),"mousemove.tab"+this.element.id,this._moveElement),this.removeHandler(a(document),"mouseup.tab"+this.element.id,this._mouseUpScrollDocumentHandler),this.removeHandler(a(document),"mouseup.tab"+this.element.id,this._mouseUpDragDocumentHandler),this.removeHandler(this.host,"keydown")},_removeEventListenerAt:function(a){this.removeHandler(this._titleList[a],this.toggleMode),this.removeHandler(this._titleList[a],"mouseenter"),this.removeHandler(this._titleList[a],"mouseleave"),this.removeHandler(this._titleList[a],"mousedown"),this.removeHandler(this._titleList[a],"mouseup");var b=this._titleList[a].children(0).children(this.toThemeProperty(".MLjqui-tabs-close-button",!0));this.removeHandler(b,"click")},_moveSelectionTrack:function(a,b,c){var d=this;if(-1!=a&&0!=this._titleList.length&&!(a>=this._titleList.length)&&this.selectionTracker&&this._selectionTracker){if(this._selectionTracker.stop(),this._unlockAnimation("selectionTracker"),void 0===c){var e=parseInt(this._titleList[a].position().left);isNaN(parseInt(this._unorderedList.css("left")))||(e+=parseInt(this._unorderedList.css("left"))),isNaN(parseInt(this._unorderedList.css("margin-left")))||(e+=parseInt(this._unorderedList.css("margin-left"))),isNaN(parseInt(this._titleList[a].css("margin-left")))||(e+=parseInt(this._titleList[a].css("margin-left"))),!isNaN(parseInt(this._titleList[a].css("margin-right")))}else var e=c;var f=0,g=0;"top"===this.position&&(f=parseInt(this._headerWrapper.height())-parseInt(this._titleList[a].outerHeight()),this.autoHeight||(g+=parseInt(this._titleList[a].css("margin-top")))),this._lockAnimation("selectionTracker");var h=parseInt(this._titleList[a].css("padding-left"))+parseInt(this._titleList[a].css("padding-right")),i="top"==this.position?0:1,j=parseInt(this._headerWrapper.css("padding-top")),k=parseInt(this._titleList[a].css("padding-top"))+parseInt(this._titleList[a].css("padding-bottom"));this._selectionTracker.css("visibility","visible"),this._moveSelectionTrackerContainer.css("visibility","visible");var l=parseInt(this._titleList[a].css("margin-top"));isNaN(l)&&(l=0),this._selectionTracker.animate({top:j+l-i,left:e+"px",height:parseInt(this._titleList[a].height()+k),width:this._titleList[a].width()+h},b,function(){d._unlockAnimation("selectionTracker"),d._selectionTracker.css("visibility","hidden"),d._addSelectStyle(a,!0),d._moveSelectionTrackerContainer.css("visibility","hidden")})}},destroy:function(){a.MLjqui.utilities.resize(this.host,null,!0),this.host.remove()},_switchTabs:function(a,b){if(a!==b&&!this._activeAnimation()&&!this._tabCaptured){var c=this;return this._raiseEvent(7,{item:b}),this._raiseEvent(6,{item:a}),this._currentEvent&&this._currentEvent.cancel?void(this._currentEvent=null):(this._unselect(b,null,!0),this._select(a,c.contentTransitionDuration,null,!0),!0)}return!1},_activeAnimation:function(){for(child in this._isAnimated)if(this._isAnimated.hasOwnProperty(child)&&this._isAnimated[child])return!0;return!1},_indexOf:function(a){for(var b=this.length();b;)if(b--,this._titleList[b][0]===a[0]||this._contentList[b][0]===a[0])return b;return-1},_validateProperties:function(){try{if(this.scrollAnimationDuration<0||isNaN(this.scrollAnimationDuration))throw new Error(this._invalidArgumentExceptions.invalidScrollAnimationDuration);if(parseInt(this.width)<0&&"auto"!==this.width)throw new Error(this._invalidArgumentExceptions.invalidWidth);if(parseInt(this.height)<0&&"auto"!==this.height)throw new Error(this._invalidArgumentExceptions.invalidHeight);if("none"!==this.animationType&&"fade"!==this.animationType)throw new Error(this._invalidArgumentExceptions.invalidAnimationType);if(this.contentTransitionDuration<0||isNaN(this.contentTransitionDuration))throw new Error(this._invalidArgumentExceptions.invalidcontentTransitionDuration);if("click"!==this.toggleMode&&"dblclick"!==this.toggleMode&&"mouseenter"!==this.toggleMode&&"none"!==this.toggleMode)throw new Error(this._invalidArgumentExceptions.invalidToggleMode);if("top"!==this.position&&"bottom"!==this.position)throw new Error(this._invalidArgumentExceptions.invalidPosition);if("left"!==this.scrollPosition&&"right"!==this.scrollPosition&&"both"!==this.scrollPosition)throw new Error(this._invalidArgumentExceptions.invalidScrollPosition);if(this.scrollStep<0||isNaN(this.scrollStep))throw new Error(this._invalidArgumentExceptions.invalidScrollStep);if(this._titleList.length!==this._contentList.length||0==this._titleList.length)throw new Error(this._invalidArgumentExceptions.invalidStructure);if(this.arrowButtonSize<0||isNaN(this.arrowButtonSize))throw new Error(this._invalidArgumentExceptions.invalidArrowSize);if(this.closeButtonSize<0||isNaN(this.closeButtonSize))throw new Error(this._invalidArgumentExceptions.invalidCloseSize)}catch(a){alert(a)}},_startScrollRepeat:function(a,b){var c=this;a?this._scrollLeft(b):this._scrollRight(b),this._scrollTimeout&&clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(function(){c._startScrollRepeat(a,c.scrollAnimationDuration)},b)},_performLayout:function(){for(var a=this.length();a;)a--,"top"!==this.position&&"bottom"!==this.position||(this.rtl?this._titleList[a].css("float","right"):this._titleList[a].css("float","left"));this._fitToSize(),this._performHeaderLayout(),this._fitToSize()},updatetabsheader:function(){this._performHeaderLayout()},_setSize:function(){this._fitToSize(),this._positionArrows(this._totalItemsWidth),this._totalItemsWidth>this.element.offsetWidth?this._unorderedList.width(this._totalItemsWidth):this._unorderedList[0].style.width=this.element.offsetWidth-2+"px",this._fitToSize()},_addArrows:function(){this._leftArrow&&this._rightArrow&&(this._leftArrow.remove(),this._rightArrow.remove()),this._leftArrow=a('<div><span style="display: block; width: 16px; height: 16px;" class="'+this.toThemeProperty("MLjqui-tabs-arrow-left")+'"></span></div>'),this._rightArrow=a('<div><span style="display: block; width: 16px; height: 16px;" class="'+this.toThemeProperty("MLjqui-tabs-arrow-right")+'"></span></div>'),this._leftArrow.addClass(this.toThemeProperty("MLjqui-tabs-arrow-background")),this._rightArrow.addClass(this.toThemeProperty("MLjqui-tabs-arrow-background")),this._leftArrow.addClass(this.toThemeProperty("MLjqui-widget-header")),this._rightArrow.addClass(this.toThemeProperty("MLjqui-widget-header")),this._headerWrapper.append(this._leftArrow),this._headerWrapper.append(this._rightArrow),this._leftArrow.width(this.arrowButtonSize),this._leftArrow.height("100%"),this._rightArrow.width(this.arrowButtonSize),this._rightArrow.height("100%"),this._leftArrow.css({"z-index":"30"}),this._rightArrow.css({"z-index":"30"}),this._leftArrow.css("display","none"),this._rightArrow.css("display","none")},_tabsWithVisibleCloseButtons:function(){if(!this.showCloseButtons)return 0;var b=this.length();return a.each(this._titleList,function(){var a=this.attr("hasclosebutton");void 0!=a&&null!=a&&("false"!=a&&0!=a||b--)}),b},_calculateTitlesSize:function(){var b=0,c=0,d=this.length();for(this.rtl&&a.MLjqui.browser.msie&&a.MLjqui.browser.version<8&&(this._measureItem=a("<span style='position: relative; visibility: hidden;'></span>"),a(document.body).append(this._measureItem));d;){if(d--,this._measureItem&&(this._measureItem.html(this._titleList[d].html()),this._titleList[d].width(this._measureItem.width())),this._titleList[d].css("position","static"),this._titleList[d].find(this.toThemeProperty(".MLjqui-tabs-close-button",!0)).css("display","none"),c+=parseInt(this._titleList[d].outerWidth(!0)),b<this._titleList[d].outerHeight(!0)&&(b=Math.round(parseInt(this._titleList[d].outerHeight(!0)))),0==this._titleList[d].height()){var e=this._titleList[d].clone();a(document.body).append(e),b=Math.round(parseInt(e.outerHeight(!0))),e.remove()}var f=this._titleList[d].attr("hasCloseButton");if(void 0!=f&&null!=f){var g=!1;this.hiddenCloseButtons&&1==this.hiddenCloseButtons[d]&&(this._titleList[d].find(this.toThemeProperty(".MLjqui-tabs-close-button",!0)).css("display","none"),g=!0),g||("true"==f||1==f?(c+=this.closeButtonSize,this._titleList[d].find(this.toThemeProperty(".MLjqui-tabs-close-button",!0)).css("display","block")):"false"!=f&&0!=f||this._titleList[d].find(this.toThemeProperty(".MLjqui-tabs-close-button",!0)).css("display","none"))}else if(this.showCloseButtons&&(this.canCloseAllTabs||this._tabsWithVisibleCloseButtons()>1)){var g=!1;this.hiddenCloseButtons&&1==this.hiddenCloseButtons[d]&&(this._titleList[d].find(this.toThemeProperty(".MLjqui-tabs-close-button",!0)).css("display","none"),g=!0),g||(c+=this.closeButtonSize,this._titleList[d].find(this.toThemeProperty(".MLjqui-tabs-close-button",!0)).css("display","block"))}this._titleList[d].height(this._titleList[d].height())}return this._measureItem&&this._measureItem.remove(),{height:b,width:10+c}},_reorderHeaderElements:function(){if(this.selectionTracker&&this._moveSelectionTrackerContainer.css({position:"absolute",height:"100%",top:"0px",left:"0px",width:"100%"}),this._headerWrapper.css({position:"relative",left:"0px",top:"0px"}),this.scrollable){this._rightArrow.css({width:this.arrowButtonSize,position:"absolute",top:"0px"}),this._leftArrow.css({width:this.arrowButtonSize,position:"absolute",top:"0px"});var a=this.theme&&-1!=this.theme.indexOf("ui-")?3:0;a>0&&(this._rightArrow.addClass(this.toThemeProperty("MLjqui-rc-r")),this._leftArrow.addClass(this.toThemeProperty("MLjqui-rc-l")));var b=this.scrollPosition;switch(this.rtl&&("left"==b&&(b="right"),"right"==b&&(b="left")),b){case"both":this._rightArrow.css("right","0px"),this._leftArrow.css("left","0px");break;case"left":this._rightArrow.css("left",this.arrowButtonSize+"px"),this._leftArrow.css("left","0px");break;case"right":this._rightArrow.css("right",-a+"px"),this._leftArrow.css("right",this.arrowButtonSize-a+"px")}}},_positionArrows:function(a){a>=parseInt(this._headerWrapper[0].offsetWidth)&&this.scrollable?(this._needScroll=!0,0===this._unorderedList.position().left&&(this._unorderedListLeftBackup=this._getArrowsDisplacement()+"px"),this._leftArrow.css("display","block"),this._rightArrow.css("display","block")):(this._needScroll=!1,this._leftArrow[0].style.display="none",this._rightArrow[0].style.display="none",this._unorderedList[0].style.left="0px")},_performHeaderLayout:function(){this._removeSelectStyle();var b=this._calculateTitlesSize(),c=b.height,d=b.width;this._headerWrapper.height(c),this._unorderedList.height(c),null!=this.headerHeight&&"auto"!=this.headerHeight&&(this._headerWrapper.height(this.headerHeight),this._unorderedList.height(this.headerHeight)),d>this.host.width()?this._unorderedList.width(d):this._unorderedList.width(this.host.width()),a.MLjqui.browser.msie&&a.MLjqui.browser.version<8&&(this._unorderedList.css("position","relative"),this._headerWrapper.css("overflow","hidden")),this._reorderHeaderElements(),d+=parseInt(this._unorderedList.css("margin-left")),this._totalItemsWidth=d,this._positionArrows(d),this._unorderedList.css({position:"relative",top:"0px"}),this._verticalAlignElements(),this._moveSelectionTrack(this._selectedItem,0),this._addSelectStyle(this.selectedItem)},_verticalAlignElements:function(){var a=this.length();for(this._maxHeightTab();a;){a--;var b=this._titleList[a].find(".MLjqui-tabs-titleContentWrapper"),c=(b.height(),this._titleList[a].find(this.toThemeProperty(".MLjqui-tabs-close-button",!0))),d=parseInt(this._titleList[a].css("padding-top"));if(d||(d=0),this.autoHeight){var e=this._titleList[a].outerHeight(!0)-this._titleList[a].height(),f=parseInt(this._titleList[a].css("padding-top")),g=parseInt(this._titleList[a].css("padding-bottom")),h=parseInt(this._titleList[a].css("border-top-width")),i=parseInt(this._titleList[a].css("border-bottom-width"));this._titleList[a].height(this._unorderedList.outerHeight()-f-g-h-i)}else if("top"===this.position){var j=parseInt(this._unorderedList.height())-parseInt(this._titleList[a].outerHeight(!0));parseInt(this._titleList[a].css("margin-top"))!==j&&0!==j&&this._titleList[a].css("margin-top",j)}else this._titleList[a].height(this._titleList[a].height());this._titleList[a].children(0).height("100%");var k=parseInt(this._titleList[a].height()),l=parseInt(k)/2-parseInt(c.height())/2;c.css("margin-top",1+l);var m=parseInt(k)/2-parseInt(b.height())/2;b.css("margin-top",m)}if(this.scrollable){var e=parseInt(this._headerWrapper.outerHeight())-this.arrowButtonSize,n=e/2;this._rightArrow.children(0).css("margin-top",n),this._rightArrow.height("100%"),this._leftArrow.height("100%"),this._leftArrow.children(0).css("margin-top",n)}},_getImageUrl:function(a){var b=a.css("background-image");return b=b.replace('url("',""),b=b.replace('")',""),b=b.replace("url(",""),b=b.replace(")","")},_fitToSize:function(){var a=!1,b=!1,c=this;if(null!=c.width&&-1!=c.width.toString().indexOf("%")&&(a=!0),null!=c.height&&-1!=c.height.toString().indexOf("%")&&(b=!0),a&&(this.host[0].style.width=this.width,this._contentWrapper[0].style.width="100%"),b){this.host[0].style.height=this.height,this._contentWrapper[0].style.width="100%",this._contentWrapper[0].style.height="auto";var d=this.element.offsetHeight-this._headerWrapper[0].offsetHeight;this._contentWrapper[0].style.height=d+"px"}if(a||(this.host.width(this.width),"auto"!=this.width&&this._contentWrapper.css("width","100%")),!b)if("auto"!==this.height){this.host.height(this.height);var d=this.host.height()-this._headerWrapper.outerHeight();this._contentWrapper.height(d)}else this._contentWrapper.css("height","auto")},_maxHeightTab:function(){for(var a=this.length(),b=-1,c=-1;a;)a--,b<parseInt(this._titleList[a].outerHeight(!0))&&(c=a);return c},_addSelectionTracker:function(){this._moveSelectionTrackerContainer&&this._moveSelectionTrackerContainer.remove(),this._moveSelectionTrackerContainer=a('<div class="'+this.toThemeProperty("MLjqui-tabs-selection-tracker-container")+'">');var b=this.toThemeProperty("MLjqui-tabs-selection-tracker-"+this.position);this._selectionTracker=a('<div class="'+b+'">'),this._selectionTracker.css("color","inherit"),this._moveSelectionTrackerContainer.append(this._selectionTracker),this._headerWrapper.append(this._moveSelectionTrackerContainer),this._selectionTracker.css({position:"absolute","z-index":"10",left:"0px",top:"0px",display:"inline-block"})},_addContentWrapper:function(){var b="none",c=void 0==this._contentWrapper;this._contentWrapper=this._contentWrapper||a('<div class="'+this.toThemeProperty("MLjqui-tabs-content")+'" style="float:'+b+';">'),this._contentWrapper.addClass(this.toThemeProperty("MLjqui-widget-content"));for(var d=this.length();d;)d--,this._contentList[d].addClass(this.toThemeProperty("MLjqui-tabs-content-element"));c&&(this.host.find(".MLjqui-tabs-content-element").wrapAll(this._contentWrapper),this._contentWrapper=this.host.find(".MLjqui-tabs-content")),this.roundedCorners&&("top"==this.position?this._contentWrapper.addClass(this.toThemeProperty("MLjqui-rc-b")):this._contentWrapper.addClass(this.toThemeProperty("MLjqui-rc-t")),this.host.addClass(this.toThemeProperty("MLjqui-rc-all")))},_addHeaderWrappers:function(){var b=this.length();for(this._unorderedList.remove(),this._headerWrapper=this._headerWrapper||a('<div class="MLjqui-tabs-headerWrapper" style="outline: none;">'),this._headerWrapper.remove(),"top"==this.position?this._headerWrapper.prependTo(this.host):this._headerWrapper.appendTo(this.host),this._unorderedList.appendTo(this._headerWrapper),this._headerWrapper.addClass(this.toThemeProperty("MLjqui-tabs-header")),this._headerWrapper.addClass(this.toThemeProperty("MLjqui-widget-header")),"bottom"==this.position?this._headerWrapper.addClass(this.toThemeProperty("MLjqui-tabs-header-bottom")):this._headerWrapper.removeClass(this.toThemeProperty("MLjqui-tabs-header-bottom")),this.roundedCorners&&("top"==this.position?(this._headerWrapper.addClass(this.toThemeProperty("MLjqui-rc-t")),this._headerWrapper.removeClass(this.toThemeProperty("MLjqui-rc-b"))):(this._headerWrapper.removeClass(this.toThemeProperty("MLjqui-rc-t")),this._headerWrapper.addClass(this.toThemeProperty("MLjqui-rc-b"))));b;){if(b--,this._titleList[b].children(".MLjqui-tabs-titleWrapper").length<=0){var c=a('<div class="MLjqui-tabs-titleWrapper" style="outline: none; position: relative;">');c.append(this._titleList[b].html()),this._titleList[b].empty(),c.appendTo(this._titleList[b])}this._titleList[b].children(".MLjqui-tabs-titleWrapper").css("z-index","15")}},_render:function(){this._addCloseButtons(),this._addHeaderWrappers(),this._addContentWrapper(),this.selectionTracker&&this._addSelectionTracker(),this._addArrows()},_addCloseButton:function(b){var c=b;if(this._titleList[c].find(this.toThemeProperty(".MLjqui-tabs-close-button",!0)).length<=0&&this._titleList[c].find(".MLjqui-tabs-titleContentWrapper").length<=0){var d=a('<div class="MLjqui-tabs-titleContentWrapper"></div>'),e="left";this.rtl&&(e="right"),d.css("float",e),d.addClass("MLjqui-disableselect"),d.append(this._titleList[c].html()),this._titleList[c].html("");var f=a('<div class="'+this.toThemeProperty("MLjqui-tabs-close-button")+'"></div>');f.css({height:this.closeButtonSize,width:this.closeButtonSize,"float":e,"font-size":"1px"});this._titleList[c].append(d),this._titleList[c].append(f),this.showCloseButtons?this.hiddenCloseButtons&&1==this.hiddenCloseButtons[b]&&f.css("display","none"):f.css("display","none")}},_addCloseButtons:function(){for(var a=this.length();a;)a--,this._addCloseButton(a)},_prepareTabs:function(){var a=this.length(),b=this.selectionTracker;for(this.selectionTracker=!1;a;)a--,this._selectedItem!==a&&this._unselect(a,null,!1);this._select(this._selectedItem,0,null,!1),this.selectionTracker=b,this.initTabContent&&(this._initTabContentList[this.selectedItem]||this._hiddenParent()||(this.initTabContent(this.selectedItem),this._initTabContentList[this.selectedItem]=!0))},_isValidIndex:function(a){return a>=0&&a<this.length()},_removeSelectStyle:function(){for(var a=this.length();a;){a--;var b=null;if(this.showCloseButtons){var b=this._titleList[a].children(0).children(this.toThemeProperty(".MLjqui-tabs-close-button",!0));b.removeClass(this.toThemeProperty("MLjqui-tabs-close-button-selected"))}"top"==this.position?this._titleList[a].removeClass(this.toThemeProperty("MLjqui-tabs-title-selected-top")):this._titleList[a].removeClass(this.toThemeProperty("MLjqui-tabs-title-selected-bottom")),this._titleList[a].removeClass(this.toThemeProperty("MLjqui-fill-state-pressed"))}},_addSelectStyle:function(a,b){this.length();if(this._removeSelectStyle(),(!this.selectionTracker||void 0!=b&&b)&&a>=0&&void 0!=this._titleList[a]){var c=null;if(this.showCloseButtons){var c=this._titleList[a].children(0).children(this.toThemeProperty(".MLjqui-tabs-close-button",!0));this.hiddenCloseButtons&&1==this.hiddenCloseButtons[a]&&(c=null)}this._titleList[a].removeClass(this.toThemeProperty("MLjqui-fill-state-hover")),"top"==this.position?(this._titleList[a].removeClass(this.toThemeProperty("MLjqui-tabs-title-hover-top")),this._titleList[a].addClass(this.toThemeProperty("MLjqui-tabs-title-selected-top"))):(this._titleList[a].removeClass(this.toThemeProperty("MLjqui-tabs-title-hover-bottom")),this._titleList[a].addClass(this.toThemeProperty("MLjqui-tabs-title-selected-bottom"))),this._titleList[a].addClass(this.toThemeProperty("MLjqui-fill-state-pressed")),null!=c&&c.addClass(this.toThemeProperty("MLjqui-tabs-close-button-selected"))}},_addItemTo:function(a,b,c){if(b<a.length){for(var d=void 0,e=void 0,f=b;f+1<a.length;f++)void 0===d?(d=a[f+1],a[f+1]=a[f]):(e=a[f+1],a[f+1]=d,d=e);void 0===d&&(d=a[b]),a[b]=c,a.push(d)}else a.push(c)},_select:function(b,c,d,e,f){if(!this._tabCaptured){this.host.attr("hideFocus","true");var g=this;if(void 0==f?this._addSelectStyle(b):this._addSelectStyle(b,f),this.isCollapsed&&this.collapsible)return this._contentList[b].css("display","none"),void this._selectCallback(b,d,e);switch(this.animationType){case"none":if(g.selectionTracker)setTimeout(function(){g._contentList[b].css("display","block"),a.MLjqui.aria(g._titleList[b],"aria-selected",!0),a.MLjqui.aria(g._contentList[b],"aria-hidden",!1),a.MLjqui.aria(g,"aria-activedescendant",g._titleList[b][0].id)},this.selectionTrackerAnimationDuration);else{for(var h=0;h<this._contentList.length;h++)b!=h&&"block"==this._contentList[h].css("display")&&(this._contentList[h].css("display","none"),a.MLjqui.aria(this._titleList[h],"aria-selected",!1),a.MLjqui.aria(this._contentList[h],"aria-hidden",!0));this._contentList[b].css("display","block"),a.MLjqui.aria(this._titleList[b],"aria-selected",!0),a.MLjqui.aria(this._contentList[b],"aria-hidden",!1),a.MLjqui.aria(this,"aria-activedescendant",this._titleList[b][0].id)}this._selectCallback(b,d,e);break;case"fade":this._lockAnimation("contentListSelect"),g._selectCallback(b,d,e),this._contentList[b].fadeIn(c,function(){g._unlockAnimation("contentListSelect"),a.MLjqui.aria(g._titleList[b],"aria-selected",!0),a.MLjqui.aria(g._contentList[b],"aria-hidden",!1),a.MLjqui.aria(g,"aria-activedescendant",g._titleList[b][0].id)})}}},_selectCallback:function(a,b,c){this._selectedItem=a,this.selectedItem=this._selectedItem,b&&b(),c&&this._raiseEvent(1,{item:a})},_unselect:function(b,c,d){if(b>=0&&!this._tabCaptured){var e=this;this._contentList[b].stop(),"fade"==this.animationType?(this._contentList[b].css("display","none"),a.MLjqui.aria(e._titleList[b],"aria-selected",!1),a.MLjqui.aria(e._contentList[b],"aria-hidden",!0)):this.selectionTracker?setTimeout(function(){e._contentList[b].css("display","none"),a.MLjqui.aria(e._titleList[b],"aria-selected",!1),a.MLjqui.aria(e._contentList[b],"aria-hidden",!0)},this.selectionTrackerAnimationDuration):(this._contentList[b].css("display","none"),a.MLjqui.aria(e._titleList[b],"aria-selected",!1),a.MLjqui.aria(e._contentList[b],"aria-hidden",!0)),this._unselectCallback(b,c,d),this.selectionTracker||(this._titleList[b].removeClass(this.toThemeProperty("MLjqui-tabs-title-selected")),this._titleList[b].removeClass(this.toThemeProperty("MLjqui-fill-state-pressed")))}},_unselectCallback:function(a,b,c){c&&this._raiseEvent(8,{item:a}),b&&b()},disable:function(){for(var a=this.length();a;)a--,this.disableAt(a)},enable:function(){for(var a=this.length();a;)a--,this.enableAt(a)},getEnabledTabsCount:function(){var b=0;return a.each(this._titleList,function(){this.disabled||b++}),b},getDisabledTabsCount:function(){var b=0;return a.each(this._titleList,function(){this.disabled&&b++}),b},removeAt:function(a){if(this._isValidIndex(a)&&(this.canCloseAllTabs||this.length()>1)){this._removeHoverStates();var b=this,c=(this._titleList[this._selectedItem],parseInt(this._titleList[a].outerWidth(!0))),d=this.getTitleAt(a);this._unorderedList.width(parseInt(this._unorderedList.width())-c),this._titleList[a].remove(),this._contentList[a].remove();if(this._titleList.splice(a,1),this._contentList.splice(a,1),this._addStyles(),this._performHeaderLayout(),this._removeEventHandlers(),this._addEventHandlers(),this._raiseEvent(3,{item:a,title:d}),this._isAnimated={},this.selectedItem>0){this._selectedItem=-1;var e=this._getPreviousIndex(this.selectedItem);this.select(e)}else{this._selectedItem=-1;var e=this._getNextIndex(this.selectedItem);this.select(e)}if(parseInt(this._unorderedList.css("left"))>this._getArrowsDisplacement()&&this._unorderedList.css("left",this._getArrowsDisplacement()),parseInt(this._unorderedList.width())<=parseInt(this._headerWrapper.width())){var f=this.enableScrollAnimation?this.scrollAnimationDuration:0;this._lockAnimation("unorderedList"),this._unorderedList.animate({left:0},f,function(){b._unlockAnimation("unorderedList")})}}},removeFirst:function(){this.removeAt(0)},removeLast:function(){this.removeAt(this.length()-1)},disableAt:function(a){if(!this._titleList[a].disabled||void 0===this._titleList[a].disabled){if(this.selectedItem==a){var b=this.next();b||(b=this.previous())}this._titleList[a].disabled=!0,this.removeHandler(this._titleList[a],this.toggleMode),this.enabledHover&&this._titleList[a].off("mouseenter").off("mouseleave"),this._removeEventListenerAt(a),this._titleList[a].addClass(this.toThemeProperty("MLjqui-tabs-title-disable")),this._titleList[a].addClass(this.toThemeProperty("MLjqui-fill-state-disabled")),this._raiseEvent(5,{item:a})}},enableAt:function(a){this._titleList[a].disabled&&(this._titleList[a].disabled=!1,this._addEventListenerAt(a),this._titleList[a].removeClass(this.toThemeProperty("MLjqui-tabs-title-disable")),this._titleList[a].removeClass(this.toThemeProperty("MLjqui-fill-state-disabled")),this._raiseEvent(4,{item:a}))},addAt:function(b,c,d){if(b>=0||b<=this.length()){this._removeHoverStates();var e=a("<li>"+c+"</li>"),f=a("<div>"+d+"</div>");e.addClass(this.toThemeProperty("MLjqui-tabs-title")),e.addClass(this.toThemeProperty("MLjqui-item")),f.addClass(this.toThemeProperty("MLjqui-tabs-content-element")),"bottom"==this.position&&e.addClass(this.toThemeProperty("MLjqui-tabs-title-bottom"));var g=!1;0==this._titleList.length?this._unorderedList.append(e):b<this.length()&&b>=0?this._titleList[b].before(e):this._titleList[this.length()-1].after(e),f.appendTo(this._contentWrapper),this._addItemTo(this._titleList,b,e),this._addItemTo(this._contentList,b,f),this._selectedItem>b&&this._selectedItem++,this._switchTabs(b,this._selectedItem),this._selectedItem=b,this.showCloseButtons&&this._titleList.length>0&&this._addCloseButton(b),this._uiRefresh(g),this._raiseEvent(2,{item:b}),this._moveSelectionTrack(this._selectedItem,0)}},addFirst:function(a,b){this.addAt(0,a,b)},addLast:function(a,b){this.addAt(this.length(),a,b)},val:function(a){return 0==arguments.length||"object"==typeof a?this._selectedItem:(this.select(a),this._selectedItem)},select:function(a,b){"object"==typeof a&&(a=this._indexOf(a));var c=a>=0&&a<this._titleList.length?this._titleList[a].attr("canselect"):!0;if((void 0==c||"true"==c||1==c)&&a!==this._selectedItem&&this._isValidIndex(a)&&!this._activeAnimation()&&!this._titleList[a].disabled){var d=this._switchTabs(a,this._selectedItem);d&&this.ensureVisible(a)}},previous:function(a){var b=this._selectedItem;for(void 0==a||isNaN(a)||(b=a);b>0&&b<this._titleList.length;)if(b--,!this._titleList[b].disabled)return this.select(b),!0;return!1},_getPreviousIndex:function(a){if(void 0==a||isNaN(a))return 0;for(var b=a;a>0&&a<=this._titleList.length;)if(a--,!this._titleList[a].disabled)return a;return b},_getNextIndex:function(a){if(void 0==a||isNaN(a))return 0;for(var b=a;a>=0&&a<this._titleList.length;){if(!this._titleList[a].disabled)return a;a++}return b},next:function(a){var b=this._selectedItem;for(void 0==a||isNaN(a)||(b=a);b>=0&&b<this._titleList.length-1;)if(b++,!this._titleList[b].disabled)return this.select(b),!0;return!1},first:function(){var a=0;this._titleList[a].disabled?this.next(a):this.select(a)},last:function(){var a=this._titleList.length-1;this._titleList[a].disabled?this.previous(a):this.select(a)},length:function(){return this._titleList.length},lockAt:function(a){!this._isValidIndex(a)||this._titleList[a].locked&&void 0!==this._titleList[a].locked||(this._titleList[a].locked=!0,this._raiseEvent(11,{item:a}))},unlockAt:function(a){this._isValidIndex(a)&&this._titleList[a].locked&&(this._titleList[a].locked=!1,this._raiseEvent(12,{item:a}))},lockAll:function(){for(var a=this.length();a;)a--,this.lockAt(a)},unlockAll:function(){for(var a=this.length();a;)a--,this.unlockAt(a)},showCloseButtonAt:function(a){if(this._isValidIndex(a)){this.showCloseButtons||(this.showCloseButtons=!0,this.updatetabsheader());var b=this._titleList[a].find(this.toThemeProperty(".MLjqui-tabs-close-button",!0));b.css("display","block"),this.hiddenCloseButtons||(this.hiddenCloseButtons=new Array),this.hiddenCloseButtons[a]=0}},hideCloseButtonAt:function(a){if(this._isValidIndex(a)){var b=this._titleList[a].find(this.toThemeProperty(".MLjqui-tabs-close-button",!0));b.css("display","none"),this.hiddenCloseButtons||(this.hiddenCloseButtons=new Array),this.hiddenCloseButtons[a]=1}},hideAllCloseButtons:function(){for(var a=this.length();a;)a--,this.hideCloseButtonAt(a)},showAllCloseButtons:function(){for(var a=this.length();a;)a--,this.showCloseButtonAt(a)},getTitleAt:function(a){return this._titleList[a]?this._titleList[a].text():null},getContentAt:function(a){return this._contentList[a]?this._contentList[a]:null},setTitleAt:function(a,b){this._titleList[a]&&(this._titleList[a].text(b),this.showCloseButtons&&(this._addCloseButton(a),this._removeEventHandlers(),this._addEventHandlers()),this.render(),this.refresh())},setContentAt:function(a,b){this._contentList[a]&&this._contentList[a].html(b)},ensureVisible:function(a){var b=this;if(void 0!=a&&-1!=a&&null!=a||(a=this.selectedItem),!this._isValidIndex(a))return!1;var c,d,e=parseInt(this._titleList[a].position().left)+parseInt(this._unorderedList.css("margin-left")),f=parseInt(this._unorderedList.css("left")),g=parseInt(this._headerWrapper.outerWidth(!0)),h=parseInt(this._titleList[a].outerWidth(!0)),i=f-this._getArrowsDisplacement(),j=g-this._getArrowsDisplacement()-i;if(-i>e)c=-e+this._getArrowsDisplacement(),d=this._getArrowsDisplacement();else{if(!(e+h>j-this._getArrowsDisplacement()))return this._moveSelectionTrack(a,this.selectionTrackerAnimationDuration),!0;c=-e+g-h-(this.scrollable?2*this.arrowButtonSize-this._getArrowsDisplacement():0),d=g-h-this._getArrowsDisplacement()}return this._lockAnimation("unorderedList"),this._unorderedList.animate({left:c},this.scrollAnimationDuration,function(){return b._unlockAnimation("unorderedList"),b._moveSelectionTrack(b._selectedItem,0),!0}),this._moveSelectionTrack(a,this.selectionTrackerAnimationDuration,d),!0},isVisibleAt:function(a){if(void 0!=a&&-1!=a&&null!=a||(a=this.selectedItem),!this._isValidIndex(a))return!1;var b=parseInt(this._titleList[a].position().left)+parseInt(this._unorderedList.css("margin-left")),c=parseInt(this._unorderedList.css("left")),d=parseInt(this._headerWrapper.outerWidth(!0)),e=parseInt(this._titleList[a].outerWidth(!0)),f=c-this._getArrowsDisplacement(),g=d-this._getArrowsDisplacement()-f;return-f>b?!1:!(b+e>g)},isDisabled:function(a){return this._titleList[a].disabled},_lockAnimation:function(a){this._isAnimated&&(this._isAnimated[a]=!0)},_unlockAnimation:function(a){this._isAnimated&&(this._isAnimated[a]=!1)},propertiesChangedHandler:function(a,b,c){c&&c.width&&c.height&&2==Object.keys(c).length&&a._setSize()},propertyChangedHandler:function(b,c,d,e){if(!(b.batchUpdate&&b.batchUpdate.width&&b.batchUpdate.height&&2==Object.keys(b.batchUpdate).length)){switch(this._validateProperties(),c){case"touchMode":e&&(b.enabledHover=!1,b.keyboardNavigation=!1);break;case"width":case"height":return void b._setSize();case"disabled":return void(e?this.disable():this.enable());case"showCloseButtons":return e?this.showAllCloseButtons():this.hideAllCloseButtons(),void this._moveSelectionTrack(this._selectedItem,this.selectionTrackerAnimationDuration);case"selectedItem":return void(this._isValidIndex(e)&&this.select(e));case"scrollStep":case"contentTransitionDuration":case"scrollAnimationDuration":case"enableScrollAnimation":return;case"selectionTracker":return void(e?(this._refresh(),this.select(this._selectedItem)):null!=this._selectionTracker&&this._selectionTracker.remove());
case"scrollable":return void(e?(this._refresh(),this.select(this._selectedItem)):(this._leftArrow.remove(),this._rightArrow.remove(),this._performHeaderLayout()));case"autoHeight":return void this._performHeaderLayout();case"theme":return void a.MLjqui.utilities.setTheme(d,e,this.host)}this._unorderedList.css("left","0px"),this._refresh(),this.select(this._selectedItem),this._addSelectStyle(this._selectedItem,!0)}}})}(MLjquiBaseFramework),function(a){a.MLjqui.MLjquiWidget("MLjquiLoader","",{}),a.extend(a.MLjqui._MLjquiLoader.prototype,{defineInstance:function(){var b={width:200,height:150,text:"Loading...",html:null,textPosition:"bottom",imagePosition:"center",isModal:!1,autoOpen:!1,rtl:!1,events:["create"]};a.extend(!0,this,b)},createInstance:function(a){var b=this;b._render(!0),b._raiseEvent("0")},render:function(){this._render()},open:function(a,b){var c=this;null!==this.width&&-1!==this.width.toString().indexOf("%")&&c.host.css("width",this.width),null!==this.height&&-1!==this.height.toString().indexOf("%")&&c.host.css("height",this.height),c.host.show(),c.host.css("left",-c.host.width()/2),c.host.css("top",-c.host.height()/2),a&&b&&(c.host.css("left",a),c.host.css("top",b)),c.isModal&&c._modal.show()},close:function(){var a=this;a.host.hide(),a.isModal&&a._modal.hide()},_checkBrowser:function(){var b=this;"msie"===a.MLjqui.browser.browser&&("7.0"===a.MLjqui.browser.version?(b.isModal===!1&&b.host.addClass(b.toThemeProperty("MLjqui-loader-ie-transparency")),b.host.css("top",Math.max(0,(a(window).height()-a(b.host).outerHeight())/2+a(window).scrollTop())+"px"),b.host.css("left",Math.max(0,(a(window).width()-a(b.host).outerWidth())/2+a(window).scrollLeft())+"px"),a(window).resize(function(){b.host.css("top",Math.max(0,(a(window).height()-a(b.host).outerHeight())/2+a(window).scrollTop())+"px"),b.host.css("left",Math.max(0,(a(window).width()-a(b.host).outerWidth())/2+a(window).scrollLeft())+"px")}),this.host.css({"margin-top":"0","margin-left":"0"})):"8.0"===a.MLjqui.browser.version&&b.isModal===!1&&b.host.addClass(b.toThemeProperty("MLjqui-loader-ie-transparency")))},_textPos:function(){var a=this;this._text=a.host.children("div:eq(1)"),this._image&&this._image.css("background-position-y",a.imagePosition),"top"===a.textPosition?(this._text.addClass(a.toThemeProperty("MLjqui-loader-text-top")),this._text.removeClass(a.toThemeProperty("MLjqui-loader-text-bottom")),this._text.removeClass(a.toThemeProperty("MLjqui-loader-text-left")),this._text.removeClass(a.toThemeProperty("MLjqui-loader-text-right"))):"bottom"===a.textPosition?(this._text.addClass(a.toThemeProperty("MLjqui-loader-text-bottom")),this._text.removeClass(a.toThemeProperty("MLjqui-loader-text-top")),this._text.removeClass(a.toThemeProperty("MLjqui-loader-text-left")),this._text.removeClass(a.toThemeProperty("MLjqui-loader-text-right"))):"left"===a.textPosition?(this._text.addClass(a.toThemeProperty("MLjqui-loader-text-left")),this._text.removeClass(a.toThemeProperty("MLjqui-loader-text-right")),this._text.removeClass(a.toThemeProperty("MLjqui-loader-text-top")),this._text.removeClass(a.toThemeProperty("MLjqui-loader-text-bottom"))):"right"===a.textPosition&&(this._text.addClass(a.toThemeProperty("MLjqui-loader-text-right")),this._text.removeClass(a.toThemeProperty("MLjqui-loader-text-left")),this._text.removeClass(a.toThemeProperty("MLjqui-loader-text-top")),this._text.removeClass(a.toThemeProperty("MLjqui-loader-text-bottom")))},refresh:function(a){a!==!0&&this._render(!1)},destroy:function(){var a=this;a._removeHandlers(),a.host.remove()},propertyChangedHandler:function(a,b,c,d){if(d!==c)switch(b){case"width":a.host.width(d);break;case"height":a.host.height(d);break;case"text":a._text.text(d);break;case"html":a.host.html(d);break;case"textPosition":a._textPos(d);break;case"rtl":d===!0?a._text.addClass(a.toThemeProperty("MLjqui-loader-rtl")):a._text.removeClass(a.toThemeProperty("MLjqui-loader-rtl"))}},_raiseEvent:function(b,c){var d=this,e=d.events[b],f=new a.Event(e);f.owner=d,f.args=c;try{var g=d.host.trigger(f)}catch(h){}return g},_render:function(b){var c=this;if(c.host.width(c.width),c.host.height(c.height),c.autoOpen===!1&&c.host.hide(),b&&(null===c.html?(c.host.append('<div class="'+c.toThemeProperty("MLjqui-loader-icon")+'"></div><div class="'+c.toThemeProperty("MLjqui-loader-text")+'">'+c.text+"</div>"),c._image=c.host.children("div:eq(0)"),c._text=c.host.children("div:eq(1)")):c.host.html(this.html),c.isModal===!0)){var d=c.host.css("display");c._modal=a('<div id="'+c.element.id+'Modal" class="'+c.toThemeProperty("MLjqui-loader-modal")+'" style="display: '+d+';"></div>'),a("body").append(c._modal)}c._checkBrowser(),c._textPos(),c._addClass(),c._removeHandlers(),c._addHandlers()},_addHandlers:function(){var b=this;b.isModal===!0&&b.addHandler(a(document),"keyup.loader"+b.element.id,function(a){27===a.keyCode&&b.close()})},_removeHandlers:function(){var b=this;b.removeHandler(a(document),"keyup.loader"+b.element.id)},_addClass:function(){var b=this;b.host.addClass(b.toThemeProperty("MLjqui-widget")),b.host.addClass(b.toThemeProperty("MLjqui-loader")),b.host.addClass(b.toThemeProperty("MLjqui-rc-all")),b.host.addClass(b.toThemeProperty("MLjqui-fill-state-normal")),b.rtl&&b._text.addClass(b.toThemeProperty("MLjqui-loader-rtl")),a.MLjqui.browser.msie&&b.host.addClass(this.toThemeProperty("MLjqui-noshadow")),b.host.addClass(this.toThemeProperty("MLjqui-rc-t")),b.host.addClass(this.toThemeProperty("MLjqui-rc-b")),b.host.addClass(this.toThemeProperty("MLjqui-popup"))}})}(MLjquiBaseFramework),"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),function(a,b,c){var d={init:function(b,c){var d=this;d.$elem=a(c),d.options=a.extend({},a.fn.owlCarousel.options,d.$elem.data(),b),d.userOptions=b,d.loadContent()},loadContent:function(){function b(a){var b,c="";if("function"==typeof d.options.jsonSuccess)d.options.jsonSuccess.apply(this,[a]);else{for(b in a.owl)a.owl.hasOwnProperty(b)&&(c+=a.owl[b].item);d.$elem.html(c)}d.logIn()}var c,d=this;"function"==typeof d.options.beforeInit&&d.options.beforeInit.apply(this,[d.$elem]),"string"==typeof d.options.jsonPath?(c=d.options.jsonPath,a.getJSON(c,b)):d.logIn()},logIn:function(){var a=this;a.$elem.data("owl-originalStyles",a.$elem.attr("style")).data("owl-originalClasses",a.$elem.attr("class")),a.$elem.css({opacity:0}),a.orignalItems=a.options.items,a.checkBrowser(),a.wrapperWidth=0,a.checkVisible=null,a.setVars()},setVars:function(){var a=this;return 0===a.$elem.children().length?!1:(a.baseClass(),a.eventTypes(),a.$userItems=a.$elem.children(),a.itemsAmount=a.$userItems.length,a.wrapItems(),a.$owlItems=a.$elem.find(".owl-item"),a.$owlWrapper=a.$elem.find(".owl-wrapper"),a.playDirection="next",a.prevItem=0,a.prevArr=[0],a.currentItem=0,a.customEvents(),void a.onStartup())},onStartup:function(){var a=this;a.updateItems(),a.calculateAll(),a.buildControls(),a.updateControls(),a.response(),a.moveEvents(),a.stopOnHover(),a.owlStatus(),a.options.transitionStyle!==!1&&a.transitionTypes(a.options.transitionStyle),a.options.autoPlay===!0&&(a.options.autoPlay=5e3),a.play(),a.$elem.find(".owl-wrapper").css("display","block"),a.$elem.is(":visible")?a.$elem.css("opacity",1):a.watchVisibility(),a.onstartup=!1,a.eachMoveUpdate(),"function"==typeof a.options.afterInit&&a.options.afterInit.apply(this,[a.$elem])},eachMoveUpdate:function(){var a=this;a.options.lazyLoad===!0&&a.lazyLoad(),a.options.autoHeight===!0&&a.autoHeight(),a.onVisibleItems(),"function"==typeof a.options.afterAction&&a.options.afterAction.apply(this,[a.$elem])},updateVars:function(){var a=this;"function"==typeof a.options.beforeUpdate&&a.options.beforeUpdate.apply(this,[a.$elem]),a.watchVisibility(),a.updateItems(),a.calculateAll(),a.updatePosition(),a.updateControls(),a.eachMoveUpdate(),"function"==typeof a.options.afterUpdate&&a.options.afterUpdate.apply(this,[a.$elem])},reload:function(){var a=this;b.setTimeout(function(){a.updateVars()},0)},watchVisibility:function(){var a=this;return a.$elem.is(":visible")!==!1?!1:(a.$elem.css({opacity:0}),b.clearInterval(a.autoPlayInterval),b.clearInterval(a.checkVisible),void(a.checkVisible=b.setInterval(function(){a.$elem.is(":visible")&&(a.reload(),a.$elem.animate({opacity:1},200),b.clearInterval(a.checkVisible))},500)))},wrapItems:function(){var a=this;a.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>'),a.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">'),a.wrapperOuter=a.$elem.find(".owl-wrapper-outer"),a.$elem.css("display","block")},baseClass:function(){var a=this,b=a.$elem.hasClass(a.options.baseClass),c=a.$elem.hasClass(a.options.theme);b||a.$elem.addClass(a.options.baseClass),c||a.$elem.addClass(a.options.theme)},updateItems:function(){var b,c,d=this;if(d.options.responsive===!1)return!1;if(d.options.singleItem===!0)return d.options.items=d.orignalItems=1,d.options.itemsCustom=!1,d.options.itemsDesktop=!1,d.options.itemsDesktopSmall=!1,d.options.itemsTablet=!1,d.options.itemsTabletSmall=!1,d.options.itemsMobile=!1,!1;if(b=a(d.options.responsiveBaseWidth).width(),b>(d.options.itemsDesktop[0]||d.orignalItems)&&(d.options.items=d.orignalItems),d.options.itemsCustom!==!1)for(d.options.itemsCustom.sort(function(a,b){return a[0]-b[0]}),c=0;c<d.options.itemsCustom.length;c+=1)d.options.itemsCustom[c][0]<=b&&(d.options.items=d.options.itemsCustom[c][1]);else b<=d.options.itemsDesktop[0]&&d.options.itemsDesktop!==!1&&(d.options.items=d.options.itemsDesktop[1]),b<=d.options.itemsDesktopSmall[0]&&d.options.itemsDesktopSmall!==!1&&(d.options.items=d.options.itemsDesktopSmall[1]),b<=d.options.itemsTablet[0]&&d.options.itemsTablet!==!1&&(d.options.items=d.options.itemsTablet[1]),b<=d.options.itemsTabletSmall[0]&&d.options.itemsTabletSmall!==!1&&(d.options.items=d.options.itemsTabletSmall[1]),b<=d.options.itemsMobile[0]&&d.options.itemsMobile!==!1&&(d.options.items=d.options.itemsMobile[1]);d.options.items>d.itemsAmount&&d.options.itemsScaleUp===!0&&(d.options.items=d.itemsAmount)},response:function(){var c,d,e=this;return e.options.responsive!==!0?!1:(d=a(b).width(),e.resizer=function(){a(b).width()!==d&&(e.options.autoPlay!==!1&&b.clearInterval(e.autoPlayInterval),b.clearTimeout(c),c=b.setTimeout(function(){d=a(b).width(),e.updateVars()},e.options.responsiveRefreshRate))},void a(b).resize(e.resizer))},updatePosition:function(){var a=this;a.jumpTo(a.currentItem),a.options.autoPlay!==!1&&a.checkAp()},appendItemsSizes:function(){var b=this,c=0,d=b.itemsAmount-b.options.items;b.$owlItems.each(function(e){var f=a(this);f.css({width:b.itemWidth}).data("owl-item",Number(e)),e%b.options.items!==0&&e!==d||e>d||(c+=1),f.data("owl-roundPages",c)})},appendWrapperSizes:function(){var a=this,b=a.$owlItems.length*a.itemWidth;a.$owlWrapper.css({width:2*b,left:0}),a.appendItemsSizes()},calculateAll:function(){var a=this;a.calculateWidth(),a.appendWrapperSizes(),a.loops(),a.max()},calculateWidth:function(){var a=this;a.itemWidth=Math.round(a.$elem.width()/a.options.items)},max:function(){var a=this,b=-1*(a.itemsAmount*a.itemWidth-a.options.items*a.itemWidth);return a.options.items>a.itemsAmount?(a.maximumItem=0,b=0,a.maximumPixels=0):(a.maximumItem=a.itemsAmount-a.options.items,a.maximumPixels=b),b},min:function(){return 0},loops:function(){var b,c,d,e=this,f=0,g=0;for(e.positionsInArray=[0],e.pagesInArray=[],b=0;b<e.itemsAmount;b+=1)g+=e.itemWidth,e.positionsInArray.push(-g),e.options.scrollPerPage===!0&&(c=a(e.$owlItems[b]),d=c.data("owl-roundPages"),d!==f&&(e.pagesInArray[f]=e.positionsInArray[b],f=d))},buildControls:function(){var b=this;b.options.navigation!==!0&&b.options.pagination!==!0||(b.owlControls=a('<div class="owl-controls"/>').toggleClass("clickable",!b.browser.isTouch).appendTo(b.$elem)),b.options.pagination===!0&&b.buildPagination(),b.options.navigation===!0&&b.buildButtons()},buildButtons:function(){var b=this,c=a('<div class="owl-buttons_img"/>');b.owlControls.append(c),c.append(b.buttonPrev).append(b.buttonNext),c.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(a){a.preventDefault()}),c.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(c){c.preventDefault(),a(this).hasClass("owl-next")&&b.next()})},buildPagination:function(){var b=this;b.paginationWrapper=a('<div class="owl-pagination"/>'),b.owlControls.append(b.paginationWrapper),b.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(c){c.preventDefault(),Number(a(this).data("owl-page"))!==b.currentItem&&b.goTo(Number(a(this).data("owl-page")),!0)})},updatePagination:function(){var b,c,d,e,f,g,h=this;if(h.options.pagination===!1)return!1;for(h.paginationWrapper.html(""),b=0,c=h.itemsAmount-h.itemsAmount%h.options.items,e=0;e<h.itemsAmount;e+=1)e%h.options.items===0&&(b+=1,c===e&&(d=h.itemsAmount-h.options.items),f=a("<div/>",{"class":"owl-page"}),g=a("<span></span>",{text:h.options.paginationNumbers===!0?b:"","class":h.options.paginationNumbers===!0?"owl-numbers":""}),f.append(g),f.data("owl-page",c===e?d:e),f.data("owl-roundPages",b),h.paginationWrapper.append(f));h.checkPagination()},checkPagination:function(){var b=this;return b.options.pagination===!1?!1:void b.paginationWrapper.find(".owl-page").each(function(){a(this).data("owl-roundPages")===a(b.$owlItems[b.currentItem]).data("owl-roundPages")&&(b.paginationWrapper.find(".owl-page").removeClass("active"),a(this).addClass("active"))})},checkNavigation:function(){var a=this;return a.options.navigation===!1?!1:void(a.options.rewindNav===!1&&(0===a.currentItem&&0===a.maximumItem?(a.buttonPrev.addClass("disabled"),a.buttonNext.addClass("disabled")):0===a.currentItem&&0!==a.maximumItem?(a.buttonPrev.addClass("disabled"),a.buttonNext.removeClass("disabled")):a.currentItem===a.maximumItem?(a.buttonPrev.removeClass("disabled"),a.buttonNext.addClass("disabled")):0!==a.currentItem&&a.currentItem!==a.maximumItem&&(a.buttonPrev.removeClass("disabled"),a.buttonNext.removeClass("disabled"))))},updateControls:function(){var a=this;a.updatePagination(),a.checkNavigation(),a.owlControls&&(a.options.items>=a.itemsAmount?a.owlControls.hide():a.owlControls.show())},destroyControls:function(){var a=this;a.owlControls&&a.owlControls.remove()},next:function(a){var b=this;if(b.isTransition)return!1;if(b.currentItem+=b.options.scrollPerPage===!0?b.options.items:1,b.currentItem>b.maximumItem+(b.options.scrollPerPage===!0?b.options.items-1:0)){if(b.options.rewindNav!==!0)return b.currentItem=b.maximumItem,!1;b.currentItem=0,a="rewind"}b.goTo(b.currentItem,a)},prev:function(a){var b=this;if(b.isTransition)return!1;if(b.options.scrollPerPage===!0&&b.currentItem>0&&b.currentItem<b.options.items?b.currentItem=0:b.currentItem-=b.options.scrollPerPage===!0?b.options.items:1,b.currentItem<0){if(b.options.rewindNav!==!0)return b.currentItem=0,!1;b.currentItem=b.maximumItem,a="rewind"}b.goTo(b.currentItem,a)},goTo:function(a,c,d){var e,f=this;return f.isTransition?!1:("function"==typeof f.options.beforeMove&&f.options.beforeMove.apply(this,[f.$elem]),a>=f.maximumItem?a=f.maximumItem:0>=a&&(a=0),f.currentItem=f.owl.currentItem=a,f.options.transitionStyle!==!1&&"drag"!==d&&1===f.options.items&&f.browser.support3d===!0?(f.swapSpeed(0),f.browser.support3d===!0?f.transition3d(f.positionsInArray[a]):f.css2slide(f.positionsInArray[a],1),f.afterGo(),f.singleItemTransition(),!1):(e=f.positionsInArray[a],f.browser.support3d===!0?(f.isCss3Finish=!1,c===!0?(f.swapSpeed("paginationSpeed"),b.setTimeout(function(){f.isCss3Finish=!0},f.options.paginationSpeed)):"rewind"===c?(f.swapSpeed(f.options.rewindSpeed),b.setTimeout(function(){f.isCss3Finish=!0},f.options.rewindSpeed)):(f.swapSpeed("slideSpeed"),b.setTimeout(function(){f.isCss3Finish=!0},f.options.slideSpeed)),f.transition3d(e)):c===!0?f.css2slide(e,f.options.paginationSpeed):"rewind"===c?f.css2slide(e,f.options.rewindSpeed):f.css2slide(e,f.options.slideSpeed),void f.afterGo()))},jumpTo:function(a){var b=this;"function"==typeof b.options.beforeMove&&b.options.beforeMove.apply(this,[b.$elem]),a>=b.maximumItem||-1===a?a=b.maximumItem:0>=a&&(a=0),b.swapSpeed(0),b.browser.support3d===!0?b.transition3d(b.positionsInArray[a]):b.css2slide(b.positionsInArray[a],1),b.currentItem=b.owl.currentItem=a,b.afterGo()},afterGo:function(){var a=this;a.prevArr.push(a.currentItem),a.prevItem=a.owl.prevItem=a.prevArr[a.prevArr.length-2],a.prevArr.shift(0),a.prevItem!==a.currentItem&&(a.checkPagination(),a.checkNavigation(),a.eachMoveUpdate(),a.options.autoPlay!==!1&&a.checkAp()),"function"==typeof a.options.afterMove&&a.prevItem!==a.currentItem&&a.options.afterMove.apply(this,[a.$elem])},stop:function(){var a=this;a.apStatus="stop",b.clearInterval(a.autoPlayInterval)},checkAp:function(){var a=this;"stop"!==a.apStatus&&a.play()},play:function(){var a=this;return a.apStatus="play",a.options.autoPlay===!1?!1:(b.clearInterval(a.autoPlayInterval),void(a.autoPlayInterval=b.setInterval(function(){a.next(!0)},a.options.autoPlay)))},swapSpeed:function(a){var b=this;"slideSpeed"===a?b.$owlWrapper.css(b.addCssSpeed(b.options.slideSpeed)):"paginationSpeed"===a?b.$owlWrapper.css(b.addCssSpeed(b.options.paginationSpeed)):"string"!=typeof a&&b.$owlWrapper.css(b.addCssSpeed(a))},addCssSpeed:function(a){return{"-webkit-transition":"all "+a+"ms ease","-moz-transition":"all "+a+"ms ease","-o-transition":"all "+a+"ms ease",transition:"all "+a+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(a){return{"-webkit-transform":"translate3d("+a+"px, 0px, 0px)","-moz-transform":"translate3d("+a+"px, 0px, 0px)","-o-transform":"translate3d("+a+"px, 0px, 0px)","-ms-transform":"translate3d("+a+"px, 0px, 0px)",transform:"translate3d("+a+"px, 0px,0px)"}},transition3d:function(a){var b=this;b.$owlWrapper.css(b.doTranslate(a))},css2move:function(a){var b=this;b.$owlWrapper.css({left:a})},css2slide:function(a,b){var c=this;c.isCssFinish=!1,c.$owlWrapper.stop(!0,!0).animate({left:a},{duration:b||c.options.slideSpeed,complete:function(){c.isCssFinish=!0}})},checkBrowser:function(){var a,d,e,f,g=this,h="translate3d(0px, 0px, 0px)",i=c.createElement("div");i.style.cssText="  -moz-transform:"+h+"; -ms-transform:"+h+"; -o-transform:"+h+"; -webkit-transform:"+h+"; transform:"+h,a=/translate3d\(0px, 0px, 0px\)/g,d=i.style.cssText.match(a),e=null!==d&&1===d.length,f="ontouchstart"in b||b.navigator.msMaxTouchPoints,g.browser={support3d:e,isTouch:f}},moveEvents:function(){var a=this;a.options.mouseDrag===!1&&a.options.touchDrag===!1||(a.gestures(),a.disabledEvents())},eventTypes:function(){var a=this,b=["s","e","x"];a.ev_types={},a.options.mouseDrag===!0&&a.options.touchDrag===!0?b=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:a.options.mouseDrag===!1&&a.options.touchDrag===!0?b=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:a.options.mouseDrag===!0&&a.options.touchDrag===!1&&(b=["mousedown.owl","mousemove.owl","mouseup.owl"]),a.ev_types.start=b[0],a.ev_types.move=b[1],a.ev_types.end=b[2]},disabledEvents:function(){var b=this;b.$elem.on("dragstart.owl",function(a){a.preventDefault()}),b.$elem.on("mousedown.disableTextSelect",function(b){return a(b.target).is("input, textarea, select, option")})},gestures:function(){function d(a){if(void 0!==a.touches)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(void 0===a.touches){if(void 0!==a.pageX)return{x:a.pageX,y:a.pageY};if(void 0===a.pageX)return{x:a.clientX,y:a.clientY}}}function e(b){"on"===b?(a(c).on(i.ev_types.move,g),a(c).on(i.ev_types.end,h)):"off"===b&&(a(c).off(i.ev_types.move),a(c).off(i.ev_types.end))}function f(c){var f,g=c.originalEvent||c||b.event;if(3===g.which)return!1;if(!(i.itemsAmount<=i.options.items)){if(i.isCssFinish===!1&&!i.options.dragBeforeAnimFinish)return!1;if(i.isCss3Finish===!1&&!i.options.dragBeforeAnimFinish)return!1;i.options.autoPlay!==!1&&b.clearInterval(i.autoPlayInterval),i.browser.isTouch===!0||i.$owlWrapper.hasClass("grabbing")||i.$owlWrapper.addClass("grabbing"),i.newPosX=0,i.newRelativeX=0,a(this).css(i.removeTransition()),f=a(this).position(),j.relativePos=f.left,j.offsetX=d(g).x-f.left,j.offsetY=d(g).y-f.top,e("on"),j.sliding=!1,j.targetElement=g.target||g.srcElement}}function g(e){var f,g,h=e.originalEvent||e||b.event;i.newPosX=d(h).x-j.offsetX,i.newPosY=d(h).y-j.offsetY,i.newRelativeX=i.newPosX-j.relativePos,"function"==typeof i.options.startDragging&&j.dragging!==!0&&0!==i.newRelativeX&&(j.dragging=!0,i.options.startDragging.apply(i,[i.$elem])),(i.newRelativeX>8||i.newRelativeX<-8)&&i.browser.isTouch===!0&&(void 0!==h.preventDefault?h.preventDefault():h.returnValue=!1,j.sliding=!0),(i.newPosY>10||i.newPosY<-10)&&j.sliding===!1&&a(c).off("touchmove.owl"),f=function(){return i.newRelativeX/5},g=function(){return i.maximumPixels+i.newRelativeX/5},i.newPosX=Math.max(Math.min(i.newPosX,f()),g()),i.browser.support3d===!0?i.transition3d(i.newPosX):i.css2move(i.newPosX)}function h(c){var d,f,g,h=c.originalEvent||c||b.event;h.target=h.target||h.srcElement,j.dragging=!1,i.browser.isTouch!==!0&&i.$owlWrapper.removeClass("grabbing"),i.newRelativeX<0?i.dragDirection=i.owl.dragDirection="left":i.dragDirection=i.owl.dragDirection="right",0!==i.newRelativeX&&(d=i.getNewPosition(),i.goTo(d,!1,"drag"),j.targetElement===h.target&&i.browser.isTouch!==!0&&(a(h.target).on("click.disable",function(b){b.stopImmediatePropagation(),b.stopPropagation(),b.preventDefault(),a(b.target).off("click.disable")}),f=a._data(h.target,"events").click,g=f.pop(),f.splice(0,0,g))),e("off")}var i=this,j={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};i.isCssFinish=!0,i.$elem.on(i.ev_types.start,".owl-wrapper",f)},getNewPosition:function(){var a=this,b=a.closestItem();return b>a.maximumItem?(a.currentItem=a.maximumItem,b=a.maximumItem):a.newPosX>=0&&(b=0,a.currentItem=0),b},closestItem:function(){var b=this,c=b.options.scrollPerPage===!0?b.pagesInArray:b.positionsInArray,d=b.newPosX,e=null;return a.each(c,function(f,g){d-b.itemWidth/20>c[f+1]&&d-b.itemWidth/20<g&&"left"===b.moveDirection()?(e=g,b.options.scrollPerPage===!0?b.currentItem=a.inArray(e,b.positionsInArray):b.currentItem=f):d+b.itemWidth/20<g&&d+b.itemWidth/20>(c[f+1]||c[f]-b.itemWidth)&&"right"===b.moveDirection()&&(b.options.scrollPerPage===!0?(e=c[f+1]||c[c.length-1],b.currentItem=a.inArray(e,b.positionsInArray)):(e=c[f+1],b.currentItem=f+1))}),b.currentItem},moveDirection:function(){var a,b=this;return b.newRelativeX<0?(a="right",b.playDirection="next"):(a="left",b.playDirection="prev"),a},customEvents:function(){var a=this;a.$elem.on("owl.next",function(){a.next()}),a.$elem.on("owl.prev",function(){a.prev()}),a.$elem.on("owl.play",function(b,c){a.options.autoPlay=c,a.play(),a.hoverStatus="play"}),a.$elem.on("owl.stop",function(){a.stop(),a.hoverStatus="stop"}),a.$elem.on("owl.goTo",function(b,c){a.goTo(c)}),a.$elem.on("owl.jumpTo",function(b,c){a.jumpTo(c)})},stopOnHover:function(){var a=this;a.options.stopOnHover===!0&&a.browser.isTouch!==!0&&a.options.autoPlay!==!1&&(a.$elem.on("mouseover",function(){a.stop()}),a.$elem.on("mouseout",function(){"stop"!==a.hoverStatus&&a.play()}))},lazyLoad:function(){var b,c,d,e,f,g=this;if(g.options.lazyLoad===!1)return!1;for(b=0;b<g.itemsAmount;b+=1)c=a(g.$owlItems[b]),"loaded"!==c.data("owl-loaded")&&(d=c.data("owl-item"),e=c.find(".lazyOwl"),"string"==typeof e.data("src")?(void 0===c.data("owl-loaded")&&(e.hide(),c.addClass("loading").data("owl-loaded","checked")),f=g.options.lazyFollow===!0?d>=g.currentItem:!0,f&&d<g.currentItem+g.options.items&&e.length&&g.lazyPreload(c,e)):c.data("owl-loaded","loaded"))},lazyPreload:function(a,c){function d(){a.data("owl-loaded","loaded").removeClass("loading"),c.removeAttr("data-src"),"fade"===g.options.lazyEffect?c.fadeIn(400):c.show(),"function"==typeof g.options.afterLazyLoad&&g.options.afterLazyLoad.apply(this,[g.$elem])}function e(){h+=1,g.completeImg(c.get(0))||f===!0?d():100>=h?b.setTimeout(e,100):d()}var f,g=this,h=0;"DIV"===c.prop("tagName")?(c.css("background-image","url("+c.data("src")+")"),f=!0):c[0].src=c.data("src"),e()},autoHeight:function(){function c(){var c=a(f.$owlItems[f.currentItem]).height();f.wrapperOuter.css("height",c+"px"),f.wrapperOuter.hasClass("autoHeight")||b.setTimeout(function(){f.wrapperOuter.addClass("autoHeight")},0)}function d(){e+=1,f.completeImg(g.get(0))?c():100>=e?b.setTimeout(d,100):f.wrapperOuter.css("height","")}var e,f=this,g=a(f.$owlItems[f.currentItem]).find("img");void 0!==g.get(0)?(e=0,d()):c()},completeImg:function(a){var b;return a.complete?(b=typeof a.naturalWidth,"undefined"===b||0!==a.naturalWidth):!1},onVisibleItems:function(){var b,c=this;for(c.options.addClassActive===!0&&c.$owlItems.removeClass("active"),c.visibleItems=[],b=c.currentItem;b<c.currentItem+c.options.items;b+=1)c.visibleItems.push(b),c.options.addClassActive===!0&&a(c.$owlItems[b]).addClass("active");c.owl.visibleItems=c.visibleItems},transitionTypes:function(a){var b=this;b.outClass="owl-"+a+"-out",b.inClass="owl-"+a+"-in"},singleItemTransition:function(){function a(a){return{position:"relative",left:a+"px"}}var b=this,c=b.outClass,d=b.inClass,e=b.$owlItems.eq(b.currentItem),f=b.$owlItems.eq(b.prevItem),g=Math.abs(b.positionsInArray[b.currentItem])+b.positionsInArray[b.prevItem],h=Math.abs(b.positionsInArray[b.currentItem])+b.itemWidth/2,i="webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend";b.isTransition=!0,b.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":h+"px","-moz-perspective-origin":h+"px","perspective-origin":h+"px"}),f.css(a(g,10)).addClass(c).on(i,function(){b.endPrev=!0,f.off(i),b.clearTransStyle(f,c)}),e.addClass(d).on(i,function(){b.endCurrent=!0,e.off(i),b.clearTransStyle(e,d)})},clearTransStyle:function(a,b){var c=this;a.css({position:"",left:""}).removeClass(b),c.endPrev&&c.endCurrent&&(c.$owlWrapper.removeClass("owl-origin"),c.endPrev=!1,c.endCurrent=!1,c.isTransition=!1)},owlStatus:function(){var a=this;a.owl={userOptions:a.userOptions,baseElement:a.$elem,userItems:a.$userItems,owlItems:a.$owlItems,currentItem:a.currentItem,prevItem:a.prevItem,visibleItems:a.visibleItems,isTouch:a.browser.isTouch,browser:a.browser,dragDirection:a.dragDirection}},clearEvents:function(){var d=this;d.$elem.off(".owl owl mousedown.disableTextSelect"),a(c).off(".owl owl"),a(b).off("resize",d.resizer)},unWrap:function(){var a=this;0!==a.$elem.children().length&&(a.$owlWrapper.unwrap(),a.$userItems.unwrap().unwrap(),a.owlControls&&a.owlControls.remove()),a.clearEvents(),a.$elem.attr("style",a.$elem.data("owl-originalStyles")||"").attr("class",a.$elem.data("owl-originalClasses"))},destroy:function(){var a=this;a.stop(),b.clearInterval(a.checkVisible),a.unWrap(),a.$elem.removeData()},reinit:function(b){var c=this,d=a.extend({},c.userOptions,b);c.unWrap(),c.init(d,c.$elem)},addItem:function(a,b){var c,d=this;return a?0===d.$elem.children().length?(d.$elem.append(a),d.setVars(),!1):(d.unWrap(),c=void 0===b||-1===b?-1:b,c>=d.$userItems.length||-1===c?d.$userItems.eq(-1).after(a):d.$userItems.eq(c).before(a),void d.setVars()):!1},removeItem:function(a){var b,c=this;return 0===c.$elem.children().length?!1:(b=void 0===a||-1===a?-1:a,c.unWrap(),c.$userItems.eq(b).remove(),void c.setVars())}};a.fn.owlCarousel=function(b){return this.each(function(){if(a(this).data("owl-init")===!0)return!1;a(this).data("owl-init",!0);var c=Object.create(d);c.init(b,this),a.data(this,"owlCarousel",c)})},a.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:3e3,stopOnHover:!0,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:b,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}}(jQuery,window,document);